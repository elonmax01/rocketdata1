<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.2. Выпуск 16.2</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="release-16-3.html" title="E.1. Выпуск 16.3" /><link rel="next" href="release-16-1.html" title="E.3. Выпуск 16.1" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.2. Выпуск 16.2</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-16-3.html" title="E.1. Выпуск 16.3">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Приложение E. Замечания к выпускам">Наверх</a></td><th width="60%" align="center">Приложение E. Замечания к выпускам</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="release-16-1.html" title="E.3. Выпуск 16.1">След.</a></td></tr></table><hr /></div><div class="sect1" id="RELEASE-16-2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.2. Выпуск 16.2 <a href="#RELEASE-16-2" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-16-2.html#RELEASE-16-2-MIGRATION">E.2.1. Миграция на версию 16.2</a></span></dt><dt><span class="sect2"><a href="release-16-2.html#RELEASE-16-2-CHANGES">E.2.2. Изменения</a></span></dt></dl></div><p><strong>Дата выпуска: </strong>2024-02-08</p><p>В этот выпуск вошли различные исправления, внесённые после версии 16.1. За информацией о нововведениях версии 16 обратитесь к <a class="xref" href="release-16.html" title="E.4. Выпуск 16">Разделу E.4</a>.</p><div class="sect2" id="RELEASE-16-2-MIGRATION"><div class="titlepage"><div><div><h3 class="title">E.2.1. Миграция на версию 16.2 <a href="#RELEASE-16-2-MIGRATION" class="id_link">#</a></h3></div></div></div><p>Если используется версия 16.X, выгрузка/восстановление базы не требуется.</p><p>Однако была исправлена одна ошибка, потенциально приводившая к повреждению индексов GIN при одновременных изменениях. После установки этого обновления рекомендуется перестроить возможно повреждённые индексы.</p><p>Если вы обновляете сервер с более ранней версии, чем 16.1, см. также <a class="xref" href="release-16-1.html" title="E.3. Выпуск 16.1">Раздел E.3</a>.</p></div><div class="sect2" id="RELEASE-16-2-CHANGES"><div class="titlepage"><div><div><h3 class="title">E.2.2. Изменения <a href="#RELEASE-16-2-CHANGES" class="id_link">#</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Усиление ограничений безопасности команды <code class="command">REFRESH MATERIALIZED VIEW CONCURRENTLY</code> (Хейкки Линнакангас)</p><p>Один из шагов команды параллельного обновления выполнялся со слабыми ограничениями безопасности. Если владелец материализованного представления убеждал суперпользователя или другого пользователя с расширенными правами выполнить параллельное обновление этого представления, владелец представления мог контролировать код, выполняемый с правами пользователя, который запускал команду <code class="command">REFRESH</code>. Уязвимость устранена, теперь весь пользовательский код запускается от имени владельца представления, как и предполагается.</p><p>Поскольку единственный известный способ использования уязвимости не работает в <span class="productname">PostgreSQL</span> 16.0 и более поздних версиях, предполагается, что на практике версия 16 не подвержена ей.</p><p>Проект <span class="productname">PostgreSQL</span> благодарит Педро Гальегоса за сообщение об этой проблеме. (CVE-2024-0985)</p></li><li class="listitem"><p>Устранение утечки памяти при выполнении встраивания JIT (Андрес Фройнд, Даниэль Густафссон)</p><p>Неоднократно сообщалось о том, что серверные процессы страдают от нехватки памяти после достаточно большого количества JIT-компиляций. Данное исправление должно решить эту проблему.</p></li><li class="listitem"><p>Предотвращение создания некорректных планов соединения секций (Ричард Гуо)</p><p>Некоторые необычные ситуации, связанные с ссылками LATERAL, могли приводить к созданию некорректных планов. При этом могли выдаваться неверные результаты или вызываться странные ошибки, такие как <span class="quote">«<span class="quote">variable not found in subplan target list</span>»</span> (переменная не найдена в целевом списке подплана), или сбой исполнителя.</p></li><li class="listitem"><p>Устранение неправильного обёртывания выходных выражений подзапроса в PlaceHolderVar (Том Лейн)</p><p>Исправление исключает получение неправильных результаты, когда подзапрос находится под внешним объединением и в нём есть выходной столбец, который ссылается в LATERAL на что-то за пределами области внешнего соединения. Из-за действий внешнего соединения выходной столбец мог не отображаться как NULL, когда должен был.</p></li><li class="listitem"><p>Устранение неправильной обработки условий запуска оконных функций (Ричард Гуо)</p><p>Неправильная обработка могла приводить к ошибкам <span class="quote">«<span class="quote">WindowFunc not found in subplan target lists</span>»</span> (оконная функция не найдена в целевом списке подплана).</p></li><li class="listitem"><p>Устранение ошибки в обнаружении уникальности планов Memoize с внутренней стороны соединения (Ричард Гуо)</p><p>Это упущение могло приводить к ошибкам <span class="quote">«<span class="quote">cache entry already complete</span>»</span> (запись в кеш уже выполнена).</p></li><li class="listitem"><p>Исправлено вычисление <code class="literal">varnullingrel</code> при выборе поля, сводимого к константе (Ричард Гуо)</p><p>Ранее такое вычисление приводило к ошибкам вида <span class="quote">«<span class="quote">wrong varnullingrels (b) (expected (b 3)) for Var 2/2</span>»</span> (неправильные varnullingrels (b) (ожидалось (b 3)) для Var 2/2).</p></li><li class="listitem"><p>Пропуск недопустимых действий при межсекционных изменениях, вызванных командой <code class="command">MERGE</code> (Дин Рашид)</p><p>Если при выполнении действия <code class="literal">MERGE UPDATE</code> для секционированной таблицы операция <code class="literal">UPDATE</code> превращается в <code class="literal">DELETE</code> и <code class="literal">INSERT</code> из-за изменения столбца ключа разбиения, то теперь пропускается запуск триггеров <code class="literal">AFTER UPDATE ROW</code>,а также другие действия после обновления, например проверки RLS. Эти действия обычно завершались ошибкой, поэтому обычное действие <code class="literal">UPDATE</code> не выполняло их в таких случаях, и <code class="literal">MERGE</code> теперь тоже не будет.</p></li><li class="listitem"><p>Правильная обработка триггеров <code class="literal">BEFORE ROW DELETE</code> при межсекционных изменениях, выполняемых командой <code class="command">MERGE</code> (Дин Рашид)</p><p>Если такой триггер пытался предотвратить изменение, возвращая NULL, при выполнении команды <code class="command">MERGE</code> возникала ошибка или сбой проверочного утверждения.</p></li><li class="listitem"><p>Недопущение обращения к разделяемому буферу в триггерах <code class="literal">BEFORE ROW UPDATE</code> (Александр Лахин, Том Лейн)</p><p>Если обновляемый кортеж был только что обновлён и перемещён на другую страницу в рамках другого сеанса, появлялось узкое окно, в котором происходили попытки получить данные из новой версии кортежа без какого-либо закрепления буфера этого сеанса. В принципе это могло приводить к появлению мусорных данных в неизменённых столбцах предлагаемого нового кортежа. Однако вероятность возникновения проблем на практике крайне мала.</p></li><li class="listitem"><p>Предотвращение запроса слишком большого размера разделяемой памяти при параллельном хеш-соединении (Томас Манро, Андрей Лепихов, Александр Коротков)</p><p>Ограничивающее значение было слишком большим, что приводило к возникновению ошибок <span class="quote">«<span class="quote">invalid DSA memory alloc request size</span>»</span> (недопустимый запрошенный размер разделяемой памяти DSA) при достаточно больших ожидаемых размерах хеш-таблицы.</p></li><li class="listitem"><p>Устранение повреждения состояния локального буфера при возникновении ошибки во время попытки расширения временной таблицы (Тендер Ван)</p></li><li class="listitem"><p>Исправление использования слота кортежа при оценке агрегатов <code class="literal">DISTINCT</code> с несколькими аргументами (Дэвид Роули).</p><p>Ранее использование неправильного слота могло приводить к ошибкам вида <span class="quote">«<span class="quote">attribute 1 of type record has wrong type</span>»</span> (атрибут 1 записи типа имеет неправильный тип).</p></li><li class="listitem"><p>Предотвращение сбоев проверочных утверждений в функциях <code class="function">heap_update()</code> и <code class="function">heap_delete()</code> в случаях, когда кортеж, обновляемый триггером обеспечения целостности внешнего ключа, не проходит дополнительную перекрёстную проверку видимости (Александр Лахин)</p><p>Эта ошибка не влияла на сборки без проверочных утверждений.</p></li><li class="listitem"><p>Исправление слишком строгого проверочного утверждения для параметра <code class="varname">false_positive_rate</code> в классах операторов BRIN bloom (Александр Лахин)</p><p>Эта ошибка не влияла на сборки без проверочных утверждений.</p></li><li class="listitem"><p>Устранение возможного сбоя при выполнении команды <code class="command">ALTER TABLE ADD COLUMN</code> для сложного дерева наследования (Тендер Ван)</p><p>Если дочерняя таблица наследовала новый столбец через несколько промежуточных родителей, команда завершалась ошибкой <span class="quote">«<span class="quote">tuple already updated by self</span>»</span> (кортеж уже изменился сам).</p></li><li class="listitem"><p>Устранение проблем с повторяющимися именами фрагментов в командах <code class="command">ALTER TEXT SEARCH CONFIGURATION... MAPPING</code> (Тендер Ван, Микаэль Пакье)</p></li><li class="listitem"><p>Исправление поведения команды <code class="command">DROP ROLE</code> с дублирующимися именами ролей (Микаэль Пакье)</p><p>Ранее это приводило к ошибке <span class="quote">«<span class="quote">tuple already updated by self</span>»</span> (кортеж уже изменился сам). Теперь дубликат игнорируется.</p></li><li class="listitem"><p>Корректное получение блокировки связанной таблицы при выполнении команды <code class="command">DROP STATISTICS</code> (Томаш Вондра)</p><p>Невозможность получить блокировку могла приводить к ошибкам <span class="quote">«<span class="quote">tuple concurrently deleted</span>»</span> (одновременное удаление кортежей), если команда <code class="command">DROP</code> выполнялась одновременно с командой <code class="command">ANALYZE</code>.</p></li><li class="listitem"><p>Исправление проверки изменчивости функций для выражений <code class="literal">GENERATED</code> и <code class="literal">DEFAULT</code> (Том Лейн).</p><p>Вставка выражений аргумента по умолчанию изменчивой функции могла игнорироваться, или полиморфная функция могла восприниматься как изменчивая, хотя на самом деле являлась постоянной для необходимого типа данных. Это могло приводить к неправильному отклонению или принятию предложения <code class="literal">GENERATED</code> или к ошибочному применению оптимизации постоянного значения по умолчанию в <code class="command">ALTER TABLE ADD COLUMN</code>.</p></li><li class="listitem"><p>Обнаружение устаревания новой записи в кеше каталога при распаковке полей (Том Лейн)</p><p>Все поля отдельно хранящихся строк расширяются в кортеже каталога перед его вставкой в кеш каталога. Эти действия предполагают доступ к базе данных, который может приводить к аннулированию записей кеша каталога. При этом раньше новая запись не находилась в кеше, из-за чего она не становилась недействительной. В результате появлялись условия гонки, при которых уже устаревшая запись в кеше могла создаваться, а затем сохраняться неопределённо долго. Это приводило к труднопрогнозируемому некорректному поведению. Теперь видимость кортежа перепроверяется после распаковки.</p></li><li class="listitem"><p>Устранена ошибка обнаружения целочисленного переполнения в особых случаях на некоторых платформах (Дин Рашид)</p><p>Вычисление <code class="literal">0 - INT64_MIN</code> должно вызывать ошибку переполнения, что и происходит на большинстве платформ. Однако платформы, не имеющие ни встроенного целочисленного переполнения, ни 128-битных целых чисел, не могли обнаружить переполнение и вместо вызова ошибки вычисляли <code class="literal">INT64_MIN</code>.</p></li><li class="listitem"><p>Обнаружение переполнения юлианской даты при добавлении значений типа <code class="type">interval</code> к значениям типа <code class="type">timestamp</code> или вычитании первых из вторых (Том Лейн)</p><p>В некоторых случаях, которые должны вызывать ошибку выхода за пределы допустимого диапазона, вместо этого выдавался неверный результат.</p></li><li class="listitem"><p>Добавление дополнительных проверок на переполнение в функциях <code class="function">interval_mul()</code> и <code class="function">interval_div()</code> (Дин Рашид)</p><p>В некоторых случаях, которые должны вызывать ошибку выхода за пределы допустимого диапазона, вместо этого выдавался неверный результат.</p></li><li class="listitem"><p>Возможность прерывания функции <code class="function">scram_SaltedPassword()</code> (Боуэн Ши)</p><p>При больших значениях <code class="varname">scram_iterations</code> выполнение этой функции могло занимать много времени. Теперь её можно прерывать сигналом отмены запроса.</p></li><li class="listitem"><p>Удаление данных кешированной статистики после изменения переменной <code class="varname">stats_fetch_consistency</code> (Синъя Като)</p><p>В некоторых местах кода были попытки возвращать устаревшую статистику.</p></li><li class="listitem"><p>Обеспечение проверки допустимости неприменяемых значений для параметров с контекстом <code class="literal">backend</code> или <code class="literal">superuser-backend</code> в представлении <code class="structname">pg_file_settings</code> (Том Лейн)</p><p>Недопустимые значения не отмечались в представлении должным образом. Это упущение было трудно обнаружить, поскольку в данных группах очень мало параметров.</p></li><li class="listitem"><p>Сопоставление правил сортировки при сопоставлении существующего индекса с новым секционированным индексом (Питер Эйзентраут)</p><p>Ранее как соответствующий мог приниматься индекс, правила сортировки которого отличаются от соответствующего элемента ключа разбиения, что могло приводить к неправильному поведению.</p></li><li class="listitem"><p>Предотвращение сбоя при удалении дочернего индекса одновременно с выполнением команды <code class="command">REINDEX INDEX</code> для секционированного индекса (Фей Чанхун)</p></li><li class="listitem"><p>Исправление недостаточной блокировки при неполном разделении части внутренней страницы индекса GIN (Фей Чанхун, Хейкки Линнакангас)</p><p>В коде использовалась общая, а не эксклюзивная блокировка буфера. Это могло приводить к повреждению индекса, если два процесса пытались выполнить очистку одновременно.</p></li><li class="listitem"><p>Предотвращение преждевременного освобождения закрепления буфера при вставке индекса GIN (Том Лейн)</p><p>Если разделение корневой страницы индекса происходило одновременно с пользовательской вставкой, выполнение кода могло завершаться ошибкой <span class="quote">«<span class="quote">buffer NNNN is not owned by resource owner</span>»</span> (буфер NNNN не принадлежит владельцу ресурса).</p></li><li class="listitem"><p>Предотвращение сбоев при использовании секционированных индексов SP-GiST (Том Лейн)</p><p>Попытка использовать индекс такого типа могла приводить к ошибкам <span class="quote">«<span class="quote">No such file or directory</span>»</span> (Нет такого файла или каталога).</p></li><li class="listitem"><p>Исправление проверок владения большими объектами (Том Лейн)</p><p>При выполнении не суперпользователями операции с большими объектами, требующими прав владения, завершались ошибкой <span class="quote">«<span class="quote">unrecognized class ID: 2613</span>»</span> (нераспознанный ID класса: 2613).</p></li><li class="listitem"><p>Исправление отчётов об изменении владельца для больших объектов (Том Лейн)</p><p>Ничего не делающая команда <code class="command">ALTER LARGE OBJECT OWNER</code> (то есть команда, выбирающая существующего владельца) передавала неправильный идентификатор класса в <code class="varname">PostAlterHook</code>, что могло вызывать нарушения в работе любого расширения, использующего этот обработчик.</p></li><li class="listitem"><p>Исправление отчётов о данных времени ввода-вывода в <code class="literal">EXPLAIN (BUFFERS)</code> (Микаэль Пакье)</p><p>Значения, помеченные как <span class="quote">«<span class="quote">shared/local</span>»</span> (общие/локальные), на самом деле относятся только к общим буферам, поэтому эта метка была изменена на <span class="quote">«<span class="quote">shared</span>»</span> (общие).</p></li><li class="listitem"><p>Обеспечение надёжности команды <code class="command">CREATE DATABASE</code> (Ной Миш)</p><p>При сбое операционной системы во время или вскоре после выполнения команды <code class="command">CREATE DATABASE</code> восстановление или последующие подключения к новой базе данных могли завершаться ошибкой. Если в этом временном окне была создана базовая резервная копия, при попытке её использовать могли наблюдаться аналогичные проблемы. При этом каталог базы данных, файл <code class="filename">PG_VERSION</code> или файл <code class="filename">pg_filenode.map</code> могли быть пустыми или отсутствовать.</p></li><li class="listitem"><p>Запись в журнал дополнительных сообщений <code class="literal">LOG</code> при запуске и завершении восстановления из резервной копии (Андрес Фройнд)</p><p>Это изменение вносит дополнительную информацию в журнал управляющего процесса postmaster, которая может быть полезна для диагностики проблем при восстановлении.</p></li><li class="listitem"><p>Предотвращение неправильной обработки «мёртвых» индексных кортежей во время подтранзакций на резервных серверах (Фей Чанхун)</p><p>Флаг <code class="structfield">startedInRecovery</code> был неправильно задан для подтранзакций. Это влияло только на обработку «мёртвых» индексных кортежей и могло позволить запросу в подтранзакции игнорировать записи индекса, которые он должен возвращать (если они уже «мертвы» на ведущем сервере, но не «мертвы» для транзакции на резервном), или преждевременно помечать на резервном сервере «мёртвыми» такие записи, которые ещё не являются «мёртвыми» на ведущем. Неясно, приводил ли последний случай к каким-либо серьёзным последствиям, но предполагалось другое поведение.</p></li><li class="listitem"><p>Исправление обработки сигналов в процессах walreceiver (Хейкки Линнакангас)</p><p>Отменено изменение, из-за которого процессы walreceiver не реагировали на <span class="systemitem">SIGTERM</span> во время ожидания установки соединения репликации.</p></li><li class="listitem"><p>Устранение риска целочисленного переполнения при проверке того, поместится ли запись в буфер декодирования WAL (Томас Манро)</p><p>Эта ошибка, по-видимому, являлась скрытой, за исключением случаев запуска 32-битной сборки <span class="productname">PostgreSQL</span> на 64-битной платформе.</p></li><li class="listitem"><p>Устранение взаимоблокировок между процессом применения изменений логической репликации, процессом tablesync и процессом сеанса, пытающимся изменить подписку (Шлок Кьял)</p><p>На одной из сторон цикла взаимоблокировки не включалось ожидание блокировки, поэтому взаимоблокировка оставалась незамеченной, что требовало ручного вмешательства.</p></li><li class="listitem"><p>Обеспечение корректной передачи значений столбцов по умолчанию подключаемым модулем логической репликации <span class="application">pgoutput</span> (Никхил Бенеш)</p><p>Команда <code class="command">ALTER TABLE ADD COLUMN</code> с постоянным значением по умолчанию для нового столбца не перезаписывает существующие кортежи, вместо этого предполагается, что при чтении будет вставлено правильное значение по умолчанию в кортеж, в котором отсутствует этот столбец. Если впоследствии для таблицы была инициирована репликация, <span class="application">pgoutput</span> передавал NULL вместо правильного значения по умолчанию для такого столбца, что могло нарушить репликацию на подписчике.</p></li><li class="listitem"><p>Устранение сбоя начальной синхронизации логической репликации для таблицы без столбцов (Вигнеш Си)</p><p>При таком сбое команда <code class="command">COPY</code> создавалась в некорректном формате.</p></li><li class="listitem"><p>Повторная проверка строки подключения подписки перед использованием (Вигнеш Си)</p><p>Повторная проверка предназначена для выявления случаев, когда подписка была создана без пароля (что разрешено суперпользователям), но затем владелец подписки был изменён на обычного пользователя.</p></li><li class="listitem"><p>Возвращение правильного кода состояния, когда новый клиент отключается, не отвечая на запрос пароля сервером (Лю Ланг, Том Лейн)</p><p>В некоторых случаях эта ситуация рассматривалась как регистрируемая ошибка, что не планировалось и приводило к созданию лишних сообщений в журналах, поскольку обычные клиенты, такие как <span class="application">psql</span>, часто отключались. Это также могло нарушать работу расширений, использующих <code class="varname">ClientAuthentication_hook</code>.</p></li><li class="listitem"><p>Исправление несовместимости с <span class="application">OpenSSL</span> 3.2 (Тристан Партин, Бо Андресон)</p><p>Раньше предполагалось, что для частного хранилища можно использовать поле <span class="quote">«<span class="quote">data</span>»</span>, что не вызывало проблем, но в версии 3.2 приводило к сбоям и сообщениям о двойном освобождении. Теперь используется поле BIO <span class="quote">«<span class="quote">app_data</span>»</span>.</p></li><li class="listitem"><p>Особое внимание у случаям, когда <span class="application">OpenSSL</span> не устанавливает <code class="varname">errno</code> при возникновении ошибки (Том Лейн)</p><p>Теперь, если <code class="varname">errno</code> не установлен, предполагается, что причиной сообщения о сбое является чтение признака конца файла. Это исправление устраняет редкие случаи странных сообщений об ошибках, таких как <span class="quote">«<span class="quote">could not accept SSL connection: Success</span>»</span> (не удалось принять SSL-соединение: Успех).</p></li><li class="listitem"><p>Устранение утечки файлового дескриптора при сбое функции обёртки сторонних данных <code class="function">ForeignAsyncRequest</code> (Хейкки Линнакангас)</p></li><li class="listitem"><p>Устранение незначительной утечки памяти при проверке строки подключения в команде <code class="command">CREATE SUBSCRIPTION</code> (Джефф Дэвис)</p></li><li class="listitem"><p>Сообщение об ошибках <span class="systemitem">ENOMEM</span> из системных вызовов, связанных с файлами, в виде <code class="literal">ERRCODE_OUT_OF_MEMORY</code>, а не <code class="literal">ERRCODE_INTERNAL_ERROR</code> (Александр Кузьменков)</p></li><li class="listitem"><p>Поддержка SQL-команд типа <code class="command">CREATE FUNCTION</code>/<code class="command">CREATE PROCEDURE</code> с телами по стандарту SQL в <span class="application">PL/pgSQL</span> (Том Лейн)</p><p>Ранее выполнение таких команд завершалось сбоем из-за ошибок разбора, вызванных появлением точек с запятой в теле функции.</p></li><li class="listitem"><p>Исправление обработки ошибок в конвейерах библиотекой <span class="application">libpq</span> (Альваро Эррера)</p><p>Состояние конвейера могло рассинхронизироваться, если ошибка возвращалась не из-за проблем с запросом (например, при потере соединения). Потенциально это могло приводить к возникновению цикла с ожиданием в вызывающем приложении.</p></li><li class="listitem"><p>Обеспечение сброса буфера вывода клиента функцией <span class="application">libpq</span> <code class="function">PQsendFlushRequest()</code> по тем же правилам, что и другие функции <code class="literal">PQsend</code> (Йелте Феннема-Нио)</p><p>В конвейерном режиме всё равно может потребоваться вызов функции <code class="function">PQflush()</code>, но это изменение устраняет ранее существовавшую несогласованность.</p></li><li class="listitem"><p>Устранение условий гонки при инициализации библиотекой <span class="application">libpq</span> поддержки <span class="application">OpenSSL</span> одновременно в двух разных потоках (Вилли Манн, Микаэль Пакье)</p></li><li class="listitem"><p>Устранение сбоя с зависимостью от времени при передаче данных GSSAPI (Том Лейн)</p><p>При использовании шифрования GSSAPI в неблокирующем режиме библиотека <span class="application">libpq</span> иногда выдавала ошибку <span class="quote">«<span class="quote">GSSAPI caller failed to retransmit all data needing to be retried</span>»</span> (вызывающей стороне GSSAPI не удалось повторно передать все необходимые данные).</p></li><li class="listitem"><p>Изменение поведения утилиты <span class="application">initdb</span>: теперь всегда удаляются знаки комментариев для параметров <code class="literal">lc_<em class="replaceable"><code>xxx</code></em></code> в файле <code class="filename">postgresql.conf</code> (Кётаро Хоригути)</p><p>Утилита <span class="application">initdb</span> работала таким образом до версии 16, и теперь это поведение восстановлено. Изменение поведения ранее привело к тому, что параметр <code class="option">--no-locale</code> не оказывал должного эффекта на <code class="varname">lc_messages</code>.</p></li><li class="listitem"><p>Исключение выгрузки в <span class="application">pg_dump</span> политик RLS или меток безопасности для объектов, являющихся членами расширения (Том Лейн, Джейкоб Чемпион)</p><p>Раньше в выгрузку включались команды для установки этих параметров, что неверно, поскольку их следует рассматривать как внутренние команды расширения. Более того, проводящий восстановление пользователь мог не иметь достаточных прав для их установки, а пользователь, производящий выгрузку, может не иметь достаточных прав для их выгрузки (поскольку для выгрузки политик RLS требуется получение блокировки для их таблицы).</p></li><li class="listitem"><p>Исключение выгрузки объекта расширенной статистики в <span class="application">pg_dump</span>, если нижележащая для него таблица не выгружается (Райан Макгуайр, Том Лейн)</p><p>Такое поведение соответствует поведению других зависимых объектов, таких как индексы.</p></li><li class="listitem"><p>Правильное обнаружение нехватки памяти в одном месте кода <span class="application">pg_dump</span> (Даниэль Густафссон)</p></li><li class="listitem"><p>Добавление ошибки для случая, когда по завершении скрипта <span class="application">pgbench</span> конвейер остаётся открытым (Антонин Боннефой)</p><p>Раньше <span class="application">pgbench</span> демонстрировал некорректное поведение, если команде <code class="command">\startpipeline</code> не хватало соответствующего <code class="command">\endpipeline</code>. Данный случай похож на ошибку скрипта, а не на рядовую ситуацию для продолжения работы <span class="application">pgbench</span>, поэтому теперь выдаётся ошибка.</p></li><li class="listitem"><p>Устранения сбоя в <code class="filename">contrib/intarray</code> в случаях, когда массив с элементом, равным <code class="literal">INT_MAX</code>, вставлялся в индекс <code class="literal">gist__int_ops</code> (Александр Лахин, Том Лейн)</p></li><li class="listitem"><p>Повышение информативности сообщений об ошибках при применении функции <code class="function">hash_bitmap_info()</code> <code class="filename">contrib/pageinspect</code> к секционированному хеш-индексу (Александр Лахин, Микаэль Пакье)</p></li><li class="listitem"><p>Повышение информативности сообщений об ошибках при применении функции <code class="function">pgstathashindex()</code> <code class="filename">contrib/pgstattuple</code> к секционированному хеш-индексу (Александр Лахин)</p></li><li class="listitem"><p>Отключение в Windows параметров автозапуска при запуске подпроцессов в <span class="application">pg_ctl</span> и <span class="application">pg_regress</span> (Кётаро Хоригути)</p><p>При запуске дочернего процесса через <code class="filename">cmd.exe</code> теперь передаётся флаг <code class="option">/D</code>, чтобы предотвратить выполнение любых команд автозапуска, указанных в реестре. Это позволяет избежать возможных непредвиденных побочных эффектов.</p></li><li class="listitem"><p>Перенос функции <code class="function">is_valid_ascii()</code> из <code class="filename">mb/pg_wchar.h</code> в <code class="filename">utils/ascii.h</code> (Джубили Янг)</p><p>Это изменение позволяет не включать <code class="filename">&lt;simd.h&gt;</code> в <code class="filename">pg_wchar.h</code>, что ранее вызывало проблемы для некоторого стороннего кода.</p></li><li class="listitem"><p>Устранение ошибок компиляции с <span class="application">libxml2</span> версии 2.12.0 или новее (Том Лейн)</p></li><li class="listitem"><p>Устранение ошибок компиляции кода <code class="literal">WAL_DEBUG</code> в Windows (Бхарат Рупиредди)</p></li><li class="listitem"><p>Подавление предупреждений компилятора о конструкциях в заголовочных файлах Python (Питер Эйзентраут, Том Лейн)</p><p>При использовании предпочтительных параметров компилятора выдаются предупреждения о конструкциях, появляющихся в последних версиях заголовочных файлов Python. При использовании <span class="application">gcc</span> эти предупреждения можно подавить с помощью указаний pragma.</p></li><li class="listitem"><p>Исключение предупреждений об устаревании при компиляции с использованием LLVM 18 (Томас Манро)</p></li><li class="listitem"><p>Обновление данных часовых поясов до версии <span class="application">tzdata</span> 2024a, включающее изменение правил перехода на летнее время в Гренландии, Казахстане и Палестине, исправления для антарктических станций Кейси и «Восток», а также корректировку исторических данных для Вьетнама, Торонто и Микелона.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-16-3.html" title="E.1. Выпуск 16.3">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html" title="Приложение E. Замечания к выпускам">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="release-16-1.html" title="E.3. Выпуск 16.1">След.</a></td></tr><tr><td width="40%" align="left" valign="top">E.1. Выпуск 16.3 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> E.3. Выпуск 16.1</td></tr></table></div></body></html>