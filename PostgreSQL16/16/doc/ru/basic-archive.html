<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>F.6. basic_archive — пример модуля архивирования WAL</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="basebackup-to-shell.html" title="F.5. basebackup_to_shell — пример создания получателей резервной копии для модуля pg_basebackup" /><link rel="next" href="bloom.html" title="F.7. bloom — индексный метод доступа, основанный на фильтрах Блума" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">F.6. basic_archive — пример модуля архивирования WAL</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="basebackup-to-shell.html" title="F.5. basebackup_to_shell — пример создания получателей резервной копии для модуля pg_basebackup">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><th width="60%" align="center">Приложение F. Дополнительно поставляемые модули и расширения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="bloom.html" title="F.7. bloom — индексный метод доступа, основанный на фильтрах Блума">След.</a></td></tr></table><hr /></div><div class="sect1" id="BASIC-ARCHIVE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">F.6. basic_archive — пример модуля архивирования WAL <a href="#BASIC-ARCHIVE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="basic-archive.html#BASIC-ARCHIVE-CONFIGURATION-PARAMETERS">F.6.1. Параметры конфигурации</a></span></dt><dt><span class="sect2"><a href="basic-archive.html#BASIC-ARCHIVE-NOTES">F.6.2. Замечания</a></span></dt><dt><span class="sect2"><a href="basic-archive.html#BASIC-ARCHIVE-AUTHOR">F.6.3. Автор</a></span></dt></dl></div><a id="id-1.11.7.16.2" class="indexterm"></a><p>Модуль <code class="filename">basic_archive</code> является примером модуля архивирования. Он копирует файлы завершённых сегментов WAL в указанный каталог. Он не очень полезен сам по себе, но на его основе можно разработать собственный модуля архивирования. За дополнительными сведениями о модулях архивирования обратитесь к разделу <a class="xref" href="archive-modules.html" title="Глава 51. Модули архивирования">Глава 51</a>.</p><p>Чтобы этот модуль работал, его нужно добавить в <a class="xref" href="runtime-config-client.html#GUC-SHARED-PRELOAD-LIBRARIES">shared_preload_libraries</a>, а также включить режим <a class="xref" href="runtime-config-wal.html#GUC-ARCHIVE-MODE">archive_mode</a>.</p><div class="sect2" id="BASIC-ARCHIVE-CONFIGURATION-PARAMETERS"><div class="titlepage"><div><div><h3 class="title">F.6.1. Параметры конфигурации <a href="#BASIC-ARCHIVE-CONFIGURATION-PARAMETERS" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">basic_archive.archive_directory</code> (<code class="type">string</code>) <a id="id-1.11.7.16.5.2.1.1.3" class="indexterm"></a></span></dt><dd><p>Каталог, в который сервер должен копировать файлы сегментов WAL. Этот каталог уже должен существовать. Значение по умолчанию — пустая строка, то есть архивирование WAL остановлено, но если <a class="xref" href="runtime-config-wal.html#GUC-ARCHIVE-MODE">archive_mode</a> включён, сервер будет накапливать файлы сегментов WAL, ожидая, что значение будет вскоре задано.</p></dd></dl></div><p>Эти параметры должны задаваться в <code class="filename">postgresql.conf</code>. Обычное использование выглядит так:</p><pre class="programlisting"># postgresql.conf
archive_mode = 'on'
archive_library = 'basic_archive'
basic_archive.archive_directory = '/path/to/archive/directory'</pre></div><div class="sect2" id="BASIC-ARCHIVE-NOTES"><div class="titlepage"><div><div><h3 class="title">F.6.2. Замечания <a href="#BASIC-ARCHIVE-NOTES" class="id_link">#</a></h3></div></div></div><p>В случаях сбоя сервера в каталоге архива могут оставаться временные файлы с префиксом <code class="filename">archtemp</code>. Такие файлы рекомендуется удалять перед перезапуском сервера после сбоя, но их можно удалять и во время работы сервера, убедившись в том, что они не относятся к выполняющимся процессам архивирования.</p></div><div class="sect2" id="BASIC-ARCHIVE-AUTHOR"><div class="titlepage"><div><div><h3 class="title">F.6.3. Автор <a href="#BASIC-ARCHIVE-AUTHOR" class="id_link">#</a></h3></div></div></div><p>Натан Боссарт (Nathan Bossart)</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basebackup-to-shell.html" title="F.5. basebackup_to_shell — пример создания получателей резервной копии для модуля pg_basebackup">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="bloom.html" title="F.7. bloom — индексный метод доступа, основанный на фильтрах Блума">След.</a></td></tr><tr><td width="40%" align="left" valign="top">F.5. basebackup_to_shell — пример создания получателей резервной копии для модуля pg_basebackup </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> F.7. bloom — индексный метод доступа, основанный на фильтрах Блума</td></tr></table></div></body></html>