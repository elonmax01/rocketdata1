<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.2. Изменение данных</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="dml-insert.html" title="6.1. Добавление данных" /><link rel="next" href="dml-delete.html" title="6.3. Удаление данных" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">6.2. Изменение данных</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="dml-insert.html" title="6.1. Добавление данных">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="dml.html" title="Глава 6. Модификация данных">Наверх</a></td><th width="60%" align="center">Глава 6. Модификация данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="dml-delete.html" title="6.3. Удаление данных">След.</a></td></tr></table><hr /></div><div class="sect1" id="DML-UPDATE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.2. Изменение данных <a href="#DML-UPDATE" class="id_link">#</a></h2></div></div></div><a id="id-1.5.5.4.2" class="indexterm"></a><a id="id-1.5.5.4.3" class="indexterm"></a><p>Модификация данных, уже сохранённых в БД, называется изменением. Изменить можно все строки таблицы, либо подмножество всех строк, либо только избранные строки. Каждый столбец при этом можно изменять независимо от других.</p><p>Для изменения данных в существующих строках используется команда <a class="xref" href="sql-update.html" title="UPDATE"><span class="refentrytitle">UPDATE</span></a>. Ей требуется следующая информация: </p><div class="orderedlist"><ol class="orderedlist compact" type="1"><li class="listitem"><p>Имя таблицы и изменяемого столбца</p></li><li class="listitem"><p>Новое значение столбца</p></li><li class="listitem"><p>Критерий отбора изменяемых строк</p></li></ol></div><p>Если вы помните, в <a class="xref" href="ddl.html" title="Глава 5. Определение данных">Главе 5</a> говорилось, что в SQL в принципе нет уникального идентификатора строк. Таким образом, не всегда возможно явно указать на строку, которую требуется изменить. Поэтому необходимо указать условия, каким должны соответствовать требуемая строка. Только если в таблице есть первичный ключ (вне зависимости от того, объявляли вы его или нет), можно однозначно адресовать отдельные строки, определив условие по первичному ключу. Этим пользуются графические инструменты для работы с базой данных, дающие возможность редактировать данные по строкам.</p><p>Например, следующая команда увеличивает цену всех товаров, имевших до этого цену 5, до 10: </p><pre class="programlisting">UPDATE products SET price = 10 WHERE price = 5;</pre><p> В результате может измениться ноль, одна или множество строк. И если этому запросу не будет удовлетворять ни одна строка, это не будет ошибкой.</p><p>Давайте рассмотрим эту команду подробнее. Она начинается с ключевого слова <code class="literal">UPDATE</code>, за которым идёт имя таблицы. Как обычно, имя таблицы может быть записано в полной форме, в противном случае она будет найдена по пути. Затем идёт ключевое слово <code class="literal">SET</code>, за которым следует имя столбца, знак равенства и новое значение столбца. Этим значением может быть любое скалярное выражение, а не только константа. Например, если вы захотите поднять цену всех товаров на 10%, это можно сделать так: </p><pre class="programlisting">UPDATE products SET price = price * 1.10;</pre><p> Как видно из этого примера, выражение нового значения может ссылаться на существующие значения столбцов в строке. Мы также опустили в нём предложение <code class="literal">WHERE</code>. Это означает, что будут изменены все строки в таблице. Если же это предложение присутствует, изменяются только строки, которые соответствуют условию <code class="literal">WHERE</code>. Заметьте, что хотя знак равенства в предложении <code class="literal">SET</code> обозначает операцию присваивания, а такой же знак в предложении <code class="literal">WHERE</code> используется для сравнения, это не приводит к неоднозначности. И конечно, в условии <code class="literal">WHERE</code> не обязательно должна быть проверка равенства, а могут применяться и другие операторы (см. <a class="xref" href="functions.html" title="Глава 9. Функции и операторы">Главу 9</a>). Необходимо только, чтобы это выражение возвращало логический результат.</p><p>В команде <code class="command">UPDATE</code> можно изменить значения сразу нескольких столбцов, перечислив их в предложении <code class="literal">SET</code>. Например: </p><pre class="programlisting">UPDATE mytable SET a = 5, b = 3, c = 1 WHERE a &gt; 0;</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dml-insert.html" title="6.1. Добавление данных">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="dml.html" title="Глава 6. Модификация данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="dml-delete.html" title="6.3. Удаление данных">След.</a></td></tr><tr><td width="40%" align="left" valign="top">6.1. Добавление данных </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 6.3. Удаление данных</td></tr></table></div></body></html>