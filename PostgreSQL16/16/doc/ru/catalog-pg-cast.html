<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.10. pg_cast</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="catalog-pg-auth-members.html" title="53.9. pg_auth_members" /><link rel="next" href="catalog-pg-class.html" title="53.11. pg_class" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.10. <code class="structname">pg_cast</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="catalog-pg-auth-members.html" title="53.9. pg_auth_members">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><th width="60%" align="center">Глава 53. Системные каталоги</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="catalog-pg-class.html" title="53.11. pg_class">След.</a></td></tr></table><hr /></div><div class="sect1" id="CATALOG-PG-CAST"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.10. <code class="structname">pg_cast</code> <a href="#CATALOG-PG-CAST" class="id_link">#</a></h2></div></div></div><a id="id-1.10.4.12.2" class="indexterm"></a><p>В каталоге <code class="structname">pg_cast</code> хранятся пути приведения типов (как встроенных, так и пользовательских).</p><p>Следует заметить, что <code class="structname">pg_cast</code> представляет не каждое приведение, которое может выполнять система, а только те, которые нельзя вывести по некоторым общим правилам. Например, приведение типа домена к его базовому типу не представляется явно в <code class="structname">pg_cast</code>. Ещё одно важное исключение составляют <span class="quote">«<span class="quote">автоматические приведения ввода/вывода</span>»</span>, которые выполняются с применением собственных функций ввода/вывода типа данных, преобразующих тип в <code class="type">text</code> или другие строковые типы — они также не представляются явно в <code class="structname">pg_cast</code>.</p><div class="table" id="id-1.10.4.12.5"><p class="title"><strong>Таблица 53.10. Столбцы <code class="structname">pg_cast</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы pg_cast" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">oid</code> <code class="type">oid</code>
      </p>
      <p>Идентификатор строки</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">castsource</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID исходного типа данных</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">casttarget</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID целевого типа данных</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">castfunc</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-proc.html" title="53.39. pg_proc"><code class="structname">pg_proc</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID функции, выполняющей приведение, или ноль, если для данного метода приведения не требуется функция.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">castcontext</code> <code class="type">char</code>
      </p>
      <p>Определяет, в каких контекстах может выполняться приведение. Символ <code class="literal">e</code> означает только явное приведение (explicit), с применением синтаксиса <code class="literal">CAST</code> или <code class="literal">::</code>. Символ <code class="literal">a</code> означает неявное присваивание (assignment) целевому столбцу, а также явное приведение. Символ <code class="literal">i</code> разрешает неявное приведение (implicit), а также все остальные варианты.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">castmethod</code> <code class="type">char</code>
      </p>
      <p>Показывает, как выполняется приведение. Символ <code class="literal">f</code> означает, что используется функция, указанная в поле <code class="structfield">castfunc</code>. Символ <code class="literal">i</code> означает, что используются функции ввода/вывода. Символ <code class="literal">b</code> означают, что типы являются двоично-сводимыми, так что преобразование не требуется.</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Функции приведения, перечисленные в <code class="structname">pg_cast</code>, должны всегда принимать исходный тип приведения в качестве типа первого аргумента и возвращать результат, имеющий целевой тип. Функция приведения может иметь до трёх аргументов. Второй аргумент, если он присутствует, должен иметь тип <code class="type">integer</code>; в нём передаётся модификатор типа, связанный с целевым типом, либо -1, если такого модификатора нет. Третий аргумент, если он присутствует, должен иметь тип <code class="type">boolean</code>; в нём передаётся <code class="literal">true</code>, если приведение выполняется явно, и <code class="literal">false</code> в противном случае.</p><p>Вполне возможно создать запись в <code class="structname">pg_cast</code>, в которой исходный тип будет совпадать с целевым, если связанная функция приведения принимает больше одного аргумента. Такие записи представляют <span class="quote">«<span class="quote">функции преобразования длины</span>»</span>, которые приводят значения некоторого типа в соответствие с заданным значением модификатора.</p><p>Когда в записи <code class="structname">pg_cast</code> исходный и целевой типы приведения различаются и функция принимает более одного аргумента, эта запись представляет преобразование типа из одного в другой и сведение к нужной длине за один шаг. Если же такой записи не находится, приведение к типу с определённым модификатором выполняется в два этапа, сначала выполняется преобразование типа, а затем применяется модификатор типа.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="catalog-pg-auth-members.html" title="53.9. pg_auth_members">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="catalog-pg-class.html" title="53.11. pg_class">След.</a></td></tr><tr><td width="40%" align="left" valign="top">53.9. <code class="structname">pg_auth_members</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 53.11. <code class="structname">pg_class</code></td></tr></table></div></body></html>