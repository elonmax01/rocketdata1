<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.48. pg_shdepend</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="catalog-pg-sequence.html" title="53.47. pg_sequence" /><link rel="next" href="catalog-pg-shdescription.html" title="53.49. pg_shdescription" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.48. <code class="structname">pg_shdepend</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="catalog-pg-sequence.html" title="53.47. pg_sequence">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><th width="60%" align="center">Глава 53. Системные каталоги</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="catalog-pg-shdescription.html" title="53.49. pg_shdescription">След.</a></td></tr></table><hr /></div><div class="sect1" id="CATALOG-PG-SHDEPEND"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.48. <code class="structname">pg_shdepend</code> <a href="#CATALOG-PG-SHDEPEND" class="id_link">#</a></h2></div></div></div><a id="id-1.10.4.50.2" class="indexterm"></a><p>В каталоге <code class="structname">pg_shdepend</code> записываются отношения зависимости между объектами баз данных и разделяемыми объектами, такими как роли. Эта информация позволяет <span class="productname">PostgreSQL</span> удостовериться, что эти объекты не используется, прежде чем удалять их.</p><p>Также смотрите каталог <a class="link" href="catalog-pg-depend.html" title="53.18. pg_depend"><code class="structname">pg_depend</code></a>, который играет подобную роль в отношении зависимостей объектов в одной базе данных.</p><p>В отличие от большинства системных каталогов, <code class="structname">pg_shdepend</code> разделяется всеми базами данных кластера: есть только один экземпляр <code class="structname">pg_shdepend</code> в кластере, а не отдельные в каждой базе данных.</p><div class="table" id="id-1.10.4.50.6"><p class="title"><strong>Таблица 53.48. Столбцы <code class="structname">pg_shdepend</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы pg_shdepend" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">dbid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-database.html" title="53.15. pg_database"><code class="structname">pg_database</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID базы данных, в которой находится зависимый объект, или ноль, если это глобальный объект</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">classid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID системного каталога, в котором находится зависимый объект</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">objid</code> <code class="type">oid</code> (ссылается на какой-либо столбец OID)</p>
      <p>OID определённого зависимого объекта</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">objsubid</code> <code class="type">int4</code>
      </p>
      <p>Для столбца таблицы это номер столбца (<code class="structfield">objid</code> и <code class="structfield">classid</code> указывают на саму таблицу). Для всех других типов объектов это поле содержит ноль.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">refclassid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID системного каталога, к которому относится вышестоящий объект (это должен быть разделяемый каталог)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">refobjid</code> <code class="type">oid</code> (ссылается на какой-либо столбец OID)</p>
      <p>OID определённого вышестоящего объекта</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">deptype</code> <code class="type">char</code>
      </p>
      <p>Код, определяющий конкретную семантику данного отношения зависимости; см. текст</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Во всех случаях запись в <code class="structname">pg_shdepend</code> показывает, что вышестоящий объект нельзя удалить, не удаляя подчинённый объект. Однако есть несколько подвидов зависимости, задаваемых в поле <code class="structfield">deptype</code>: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="symbol">SHARED_DEPENDENCY_OWNER</code> (<code class="literal">o</code>)</span></dt><dd><p>Вышестоящий объект (это должна быть роль) является владельцем зависимого объекта.</p></dd><dt><span class="term"><code class="symbol">SHARED_DEPENDENCY_ACL</code> (<code class="literal">a</code>)</span></dt><dd><p>Вышестоящий объект (это должна быть роль) упоминается в ACL (списке управления доступом, то есть списке прав) подчинённого объекта. (Запись <code class="symbol">SHARED_DEPENDENCY_ACL</code> не создаётся для владельца объекта, так как для владельца всё равно имеется запись <code class="symbol">SHARED_DEPENDENCY_OWNER</code>.)</p></dd><dt><span class="term"><code class="symbol">SHARED_DEPENDENCY_POLICY</code> (<code class="literal">r</code>)</span></dt><dd><p>Вышестоящий объект (это должна быть роль) упомянут в качестве целевого в объекте зависимой политики.</p></dd><dt><span class="term"><code class="symbol">SHARED_DEPENDENCY_TABLESPACE</code> (<code class="literal">t</code>)</span></dt><dd><p>Вышестоящий объект (это должно быть табличное пространство) упомянут в качестве табличного пространства для отношения, которое нигде не хранится.</p></dd></dl></div><p> В будущем могут появиться и другие подвиды зависимости. Заметьте в частности, что с текущим определением вышестоящими объектами могут быть только роли и табличные пространства.</p><p>Как и в каталоге <code class="structname">pg_depend</code>, большинство объектов, созданных во время работы <span class="application">initdb</span>, считаются <span class="quote">«<span class="quote">закреплёнными</span>»</span>. В <code class="structname">pg_shdepend</code> не добавляются никакие записи, в которых закреплённые объекты являлись бы зависимыми или зависящими.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="catalog-pg-sequence.html" title="53.47. pg_sequence">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="catalog-pg-shdescription.html" title="53.49. pg_shdescription">След.</a></td></tr><tr><td width="40%" align="left" valign="top">53.47. <code class="structname">pg_sequence</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 53.49. <code class="structname">pg_shdescription</code></td></tr></table></div></body></html>