<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>21.7. Аутентификация SSPI</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="gssapi-auth.html" title="21.6. Аутентификация GSSAPI" /><link rel="next" href="auth-ident.html" title="21.8. Аутентификация ident" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">21.7. Аутентификация SSPI</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="gssapi-auth.html" title="21.6. Аутентификация GSSAPI">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="client-authentication.html" title="Глава 21. Аутентификация клиентского приложения">Наверх</a></td><th width="60%" align="center">Глава 21. Аутентификация клиентского приложения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="auth-ident.html" title="21.8. Аутентификация ident">След.</a></td></tr></table><hr /></div><div class="sect1" id="SSPI-AUTH"><div class="titlepage"><div><div><h2 class="title" style="clear: both">21.7. Аутентификация SSPI <a href="#SSPI-AUTH" class="id_link">#</a></h2></div></div></div><a id="id-1.6.8.14.2" class="indexterm"></a><p><span class="productname">SSPI</span> — технология <span class="productname">Windows</span> для защищённой аутентификации с единственным входом. <span class="productname">PostgreSQL</span> использует SSPI в режиме <code class="literal">negotiate</code>, который применяет <span class="productname">Kerberos</span>, когда это возможно, и автоматически возвращается к <span class="productname">NTLM</span> в других случаях. <span class="productname">SSPI</span> и <span class="productname">GSSAPI</span> взаимодействуют как клиенты и серверы, например, клиент <span class="productname">SSPI</span> может проходить аутентификацию на сервере <span class="productname">GSSAPI</span>. Рекомендуется использовать <span class="productname">SSPI</span> для клиентов и серверов, работающих в Windows, и <span class="productname">GSSAPI</span> на других платформах.</p><p>Если используется аутентификация <span class="productname">Kerberos</span>, <span class="productname">SSPI</span> работает так же, как <span class="productname">GSSAPI</span>; подробнее об этом рассказывается в <a class="xref" href="gssapi-auth.html" title="21.6. Аутентификация GSSAPI">Разделе 21.6</a>.</p><p>Для <span class="productname">SSPI</span> доступны следующие параметры конфигурации: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">include_realm</code></span></dt><dd><p>Когда этот параметр равен 0, из принципала аутентифицированного пользователя убирается область, и оставшееся имя проходит сопоставление имён (см. <a class="xref" href="auth-username-maps.html" title="21.2. Файл сопоставления имён пользователей">Раздел 21.2</a>). Этот вариант не рекомендуется и поддерживается в основном для обратной совместимости, так как он небезопасен в окружениях с несколькими областями, если только дополнительно не задаётся <code class="literal">krb_realm</code>. Более предпочтительный вариант — оставить значение <code class="literal">include_realm</code> по умолчанию (1) и задать в <code class="filename">pg_ident.conf</code> явное сопоставление для преобразования имён принципалов в имена пользователей <span class="productname">PostgreSQL</span>.</p></dd><dt><span class="term"><code class="literal">compat_realm</code></span></dt><dd><p>Если равен 1, для параметра <code class="literal">include_realm</code> применяется имя домена, совместимое с SAM (также известное как имя NetBIOS). Это вариант по умолчанию. Если он равен 0, для имени принципала Kerberos применяется действительное имя области.</p><p>Этот параметр можно отключить, только если ваш сервер работает под именем доменного пользователя (в том числе, виртуального пользователя службы на компьютере, включённом в домен) и все клиенты, проходящие проверку подлинности через SSPI, также используют доменные учётные записи; в противном случае аутентификация не будет выполнена.</p></dd><dt><span class="term"><code class="literal">upn_username</code></span></dt><dd><p>Если этот параметр включён вместе с <code class="literal">compat_realm</code>, для аутентификации применяется имя Kerberos UPN. Если он отключён (по умолчанию), применяется SAM-совместимое имя пользователя. По умолчанию у новых учётных записей эти два имени совпадают.</p><p>Заметьте, что <span class="application">libpq</span> использует имя, совместимое с SAM, если имя не задано явно. Если вы применяете <span class="application">libpq</span> или драйвер на его базе, этот параметр следует оставить отключённым, либо явно задавать имя пользователя в строке подключения.</p></dd><dt><span class="term"><code class="literal">map</code></span></dt><dd><p>Позволяет сопоставить пользователей системы с пользователями баз данных. За подробностями обратитесь к <a class="xref" href="auth-username-maps.html" title="21.2. Файл сопоставления имён пользователей">Разделу 21.2</a>. Для принципала SSPI/Kerberos, такого как <code class="literal">username@EXAMPLE.COM</code> (или более редкого <code class="literal">username/hostbased@EXAMPLE.COM</code>), именем пользователя в сопоставлении будет <code class="literal">username@EXAMPLE.COM</code> (или <code class="literal">username/hostbased@EXAMPLE.COM</code>, соответственно), если <code class="literal">include_realm</code> не равно 0; в противном случае именем системного пользователя в сопоставлении будет <code class="literal">username</code> (или <code class="literal">username/hostbased</code>).</p></dd><dt><span class="term"><code class="literal">krb_realm</code></span></dt><dd><p>Устанавливает область, с которой будут сверяться имена принципалов пользователей. Если этот параметр задан, подключаться смогут только пользователи из этой области. Если не задан, подключаться смогут пользователи из любой области, в зависимости от установленного сопоставления имён пользователей.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="gssapi-auth.html" title="21.6. Аутентификация GSSAPI">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="client-authentication.html" title="Глава 21. Аутентификация клиентского приложения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="auth-ident.html" title="21.8. Аутентификация ident">След.</a></td></tr><tr><td width="40%" align="left" valign="top">21.6. Аутентификация GSSAPI </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 21.8. Аутентификация ident</td></tr></table></div></body></html>