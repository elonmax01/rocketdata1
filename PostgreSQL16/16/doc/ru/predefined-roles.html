<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>22.5. Предопределённые роли</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="role-removal.html" title="22.4. Удаление ролей" /><link rel="next" href="perm-functions.html" title="22.6. Безопасность функций" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">22.5. Предопределённые роли</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="role-removal.html" title="22.4. Удаление ролей">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="user-manag.html" title="Глава 22. Роли базы данных">Наверх</a></td><th width="60%" align="center">Глава 22. Роли базы данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="perm-functions.html" title="22.6. Безопасность функций">След.</a></td></tr></table><hr /></div><div class="sect1" id="PREDEFINED-ROLES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">22.5. Предопределённые роли <a href="#PREDEFINED-ROLES" class="id_link">#</a></h2></div></div></div><a id="id-1.6.9.9.2" class="indexterm"></a><p>В <span class="productname">PostgreSQL</span> имеется набор предопределённых ролей, которые дают доступ к некоторым часто востребованным, но не общедоступным функциям и данным. Администраторы (включая роли с правами <code class="literal">CREATEROLE</code>) могут назначать (<code class="command">GRANT</code>) эти роли пользователям и/или ролям в своей среде, таким образом открывая этим пользователям доступ к указанной функциональности и информации.</p><p>Имеющиеся предопределённые роли описаны в <a class="xref" href="predefined-roles.html#PREDEFINED-ROLES-TABLE" title="Таблица 22.1. Предопределённые роли">Таблица 22.1</a>. Заметьте, что конкретные разрешения для каждой из таких ролей в будущем могут изменяться по мере добавления дополнительной функциональности. Администраторы должны следить за этими изменениями, просматривая замечания к выпускам.</p><div class="table" id="PREDEFINED-ROLES-TABLE"><p class="title"><strong>Таблица 22.1. Предопределённые роли</strong></p><div class="table-contents"><table class="table" summary="Предопределённые роли" border="1"><colgroup><col class="col1" /><col class="col2" /></colgroup><thead><tr><th>Роль</th><th>Разрешаемый доступ</th></tr></thead><tbody><tr><td>pg_read_all_data</td><td>Читать все данные (таблицы, представления, последовательности), как будто роль имеет права <code class="command">SELECT</code> на эти объекты и права USAGE на все схемы, но при этом явным образом такие права ей не назначены. Атрибут <code class="literal">BYPASSRLS</code> для этой роли не установлен. Если используется политика RLS, администратор может задать атрибут <code class="literal">BYPASSRLS</code> членам этой роли.</td></tr><tr><td>pg_write_all_data</td><td>Записывать все данные (таблицы, представления, последовательности), как будто роль имеет права <code class="command">INSERT</code>, <code class="command">UPDATE</code> и <code class="command">DELETE</code> на эти объекты и права USAGE на все схемы, но при этом явным образом такие права ей не назначены. Атрибут <code class="literal">BYPASSRLS</code> для этой роли не установлен. Если используется политика RLS, администратор может задать атрибут <code class="literal">BYPASSRLS</code> членам этой роли.</td></tr><tr><td>pg_read_all_settings</td><td>Читать все конфигурационные переменные, даже те, что обычно видны только суперпользователям.</td></tr><tr><td>pg_read_all_stats</td><td>Читать все представления pg_stat_* и использовать различные расширения, связанные со статистикой, даже те, что обычно видны только суперпользователям.</td></tr><tr><td>pg_stat_scan_tables</td><td>Выполнять функции мониторинга, которые могут устанавливать блокировки <code class="literal">ACCESS SHARE</code> в таблицах, возможно, на длительное время.</td></tr><tr><td>pg_monitor</td><td>Читать/выполнять различные представления и функции для мониторинга. Эта роль включена в роли <code class="literal">pg_read_all_settings</code>, <code class="literal">pg_read_all_stats</code> и <code class="literal">pg_stat_scan_tables</code>.</td></tr><tr><td>pg_database_owner</td><td>Никакого. Неявным образом включает в себя владельца текущей базы данных.</td></tr><tr><td>pg_signal_backend</td><td>Передавать другим обслуживающим процессам сигналы для отмены запроса или завершения сеанса.</td></tr><tr><td>pg_read_server_files</td><td>Читать файлы в любом месте файловой системы, куда имеет доступ СУБД на сервере, выполняя COPY и другие функции работы с файлами.</td></tr><tr><td>pg_write_server_files</td><td>Записывать файлы в любом месте файловой системы, куда имеет доступ СУБД на сервере, выполняя COPY и другие функции работы с файлами.</td></tr><tr><td>pg_execute_server_program</td><td>Выполнять программы на сервере (от имени пользователя, запускающего СУБД) так же, как это делает команда COPY и другие функции, выполняющие программы на стороне сервера.</td></tr><tr><td>pg_checkpoint</td><td>Выполнять команду <a class="link" href="sql-checkpoint.html" title="CHECKPOINT"><code class="command">CHECKPOINT</code></a>.</td></tr><tr><td>pg_use_reserved_connections</td><td>Использовать слоты подключения, зарезервированные при помощи параметра <a class="xref" href="runtime-config-connection.html#GUC-RESERVED-CONNECTIONS">reserved_connections</a>.</td></tr><tr><td>pg_create_subscription</td><td>Разрешить пользователям с правом <code class="literal">CREATE</code> для базы данных выполнять команду <a class="link" href="sql-createsubscription.html" title="CREATE SUBSCRIPTION"><code class="command">CREATE SUBSCRIPTION</code></a>.</td></tr></tbody></table></div></div><br class="table-break" /><p>Роли <code class="literal">pg_monitor</code>, <code class="literal">pg_read_all_settings</code>, <code class="literal">pg_read_all_stats</code> и <code class="literal">pg_stat_scan_tables</code> созданы для того, чтобы администраторы могли легко настроить роль для мониторинга сервера БД. Эти роли наделяют своих членов набором общих прав, позволяющих читать различные полезные параметры конфигурации, статистику и другую системную информацию, что обычно доступно только суперпользователям.</p><p>Единственным членом роли <code class="literal">pg_database_owner</code> неявным образом является владелец текущей базы данных. Как и любая другая роль, она может владеть объектами или получать права доступа. Следовательно, права, данные роли <code class="literal">pg_database_owner</code> в базе-шаблоне, приобретёт владелец каждой базы, созданной из данного шаблона. Роль <code class="literal">pg_database_owner</code> не может быть членом какой-либо роли, и в неё не могут быть явно включены члены. Изначально эта роль владеет схемой <code class="literal">public</code>, то есть владелец базы данных управляет использованием данной схемы в своей базе.</p><p>Роль <code class="literal">pg_signal_backend</code> предназначена для того, чтобы администраторы могли давать доверенным, но не имеющим прав суперпользователя ролям право посылать сигналы другим обслуживающим процессам. В настоящее время эта роль позволяет передавать сигналы для отмены запроса, выполняющегося в другом процессе, или для завершения сеанса. Однако пользователь, включённый в эту роль, не может отправлять сигналы процессам, принадлежащим суперпользователям. См. <a class="xref" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL" title="9.27.2. Функции для передачи сигналов серверу">Подраздел 9.27.2</a>.</p><p>Роли <code class="literal">pg_read_server_files</code>, <code class="literal">pg_write_server_files</code> и <code class="literal">pg_execute_server_program</code> предназначены для того, чтобы администраторы могли выделить доверенные, но не имеющие права суперпользователей роли для доступа к файлам и запуска программ на сервере БД от имени пользователя, запускающего СУБД. Так как эти роли могут напрямую обращаться к любым файлам в файловой системе сервера, они обходят все проверки разрешений на уровне базы данных, а значит, воспользовавшись ими, можно получить права суперпользователя. Поэтому назначать их пользователям следует со всей осторожностью.</p><p>Управлять членством в этих ролях следует осмотрительно, чтобы они использовались только по необходимости и только с пониманием, что они открывают доступ к закрытой информации.</p><p>Администраторы могут давать пользователям доступ к этим ролям, используя команду <a class="link" href="sql-grant.html" title="GRANT"><code class="command">GRANT</code></a>. Например: </p><pre class="programlisting">GRANT pg_signal_backend TO admin_user;</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="role-removal.html" title="22.4. Удаление ролей">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="user-manag.html" title="Глава 22. Роли базы данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="perm-functions.html" title="22.6. Безопасность функций">След.</a></td></tr><tr><td width="40%" align="left" valign="top">22.4. Удаление ролей </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 22.6. Безопасность функций</td></tr></table></div></body></html>