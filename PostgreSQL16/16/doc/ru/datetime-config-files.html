<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>B.4. Файлы конфигурации даты/времени</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="datetime-keywords.html" title="B.3. Ключевые слова для обозначения даты и времени" /><link rel="next" href="datetime-posix-timezone-specs.html" title="B.5. Указание часовых поясов в стиле POSIX" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">B.4. Файлы конфигурации даты/времени</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="datetime-keywords.html" title="B.3. Ключевые слова для обозначения даты и времени">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Наверх</a></td><th width="60%" align="center">Приложение B. Поддержка даты и времени</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="datetime-posix-timezone-specs.html" title="B.5. Указание часовых поясов в стиле POSIX">След.</a></td></tr></table><hr /></div><div class="sect1" id="DATETIME-CONFIG-FILES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">B.4. Файлы конфигурации даты/времени <a href="#DATETIME-CONFIG-FILES" class="id_link">#</a></h2></div></div></div><a id="id-1.11.3.7.2" class="indexterm"></a><p>Поскольку аббревиатуры часовых поясов недостаточно стандартизированы, <span class="productname">PostgreSQL</span> предлагает средства для определения набора аббревиатур, принимаемых сервером. Параметром выполнения <a class="xref" href="runtime-config-client.html#GUC-TIMEZONE-ABBREVIATIONS">timezone_abbreviations</a> определяется активный набор аббревиатур. Хотя данный параметр может быть изменён любым пользователем базы данных, возможные значения для него контролируются администратором базы данных и являются именами конфигурационных файлов, хранящихся в <code class="filename">.../share/timezonesets/</code> каталога установки. Добавляя или изменяя файлы в этом каталоге, администратор может определить местную специфику выбора аббревиатур часовых поясов.</p><p>Значение <code class="varname">timezone_abbreviations</code> может быть установлено в любое имя файла, находящегося в <code class="filename">.../share/timezonesets/</code>, если имя файла состоит только из букв. (Запрет на использование небуквенных символов в <code class="varname">timezone_abbreviations</code> делает невозможным чтение файлов, находящихся вне заданного каталога, а также резервных файлов редактора и прочих внешних файлов.)</p><p>Файл аббревиатур часовых поясов может содержать пустые строки и комментарии, начинающиеся с <code class="literal">#</code>. Строки, не имеющие комментариев, должны иметь один из следующих форматов: </p><pre class="synopsis">
<em class="replaceable"><code>аббревиатура_пояса</code></em> <em class="replaceable"><code>смещение</code></em>
<em class="replaceable"><code>аббревиатура_пояса</code></em> <em class="replaceable"><code>смещение</code></em> D
<em class="replaceable"><code>аббревиатура_пояса</code></em> <em class="replaceable"><code>имя_часового_пояса</code></em>
@INCLUDE <em class="replaceable"><code>имя_файла</code></em>
@OVERRIDE
</pre><p>Поле <em class="replaceable"><code>аббревиатура_пояса</code></em> лишь задаёт определяемую аббревиатуру. <em class="replaceable"><code>Смещение</code></em> — это целое число, задающее эквивалентное смещение от UTC в секундах, положительное — к востоку от Гринвичского меридиана, а отрицательное — к западу. Например, -18000 означало бы пять часов к западу от Гринвича, или Североамериканское восточное время. <code class="literal">D</code> указывает, что название пояса представляет местное летнее, а не поясное время.</p><p>В качестве альтернативы может быть задано <em class="replaceable"><code>имя_часового_пояса</code></em>, определённое в базе данных часовых поясов IANA. В этом случае система обращается к определению пояса, чтобы выяснить, используется или использовалась ли аббревиатура для этого пояса, и если да, действовать будет соответствующее значение — то есть, значение, действовавшее в указанный момент времени, или действовавшее непосредственно перед ним, если текущее на тот момент неизвестно, либо самое старое значение, если первое определение появилось после этого момента. Это поведение важно для тех аббревиатур, значение которых менялось в ходе истории. Также допускается определение аббревиатуры через имя часового пояса, с которым эта аббревиатура не связана; в таком случае использование аббревиатуры равнозначно написанию просто имени пояса.</p><div class="tip"><h3 class="title">Подсказка</h3><p>Простое целочисленное <em class="replaceable"><code>смещение</code></em> предпочтительнее использовать, когда определяется аббревиатура, смещение которой от UTC никогда не менялось, так как обрабатывать подобные аббревиатуры гораздо легче, чем те, что требуют обращения к определению часового пояса.</p></div><p>Использование <code class="literal">@INCLUDE</code> позволяет включить другой файл в каталоге <code class="filename">.../share/timezonesets/</code>. Включение может быть вложенным до ограниченной глубины.</p><p>Использование <code class="literal">@OVERRIDE</code> указывает, что последующие записи в файле могут переопределять предыдущие (как правило, это записи, полученные из включённых файлов). Без этого указания конфликтующие определения аббревиатуры одного и того же часового пояса считаются ошибкой.</p><p>При установке без внесения изменений, файл <code class="filename">Default</code> содержит все неконфликтующие аббревиатуры часовых поясов для большей части земного шара. Дополнительные файлы <code class="filename">Australia</code> и <code class="filename">India</code> предоставляются для данных регионов. Эти файлы сначала включают файл <code class="literal">Default</code>, а затем добавляют и изменяют аббревиатуры по мере необходимости.</p><p>В качестве справочной информации стандартная установка также содержит файлы <code class="filename">Africa.txt</code>, <code class="filename">America.txt</code> и т. д., содержащие информацию о каждой используемой аббревиатуре часового пояса, включённой в базу данных часовых поясов IANA. Определения названий часовых поясов, находящиеся в этих файлах, можно копировать и помещать в файл с нестандартной конфигурацией по мере необходимости. Заметьте, что данные файлы нельзя указывать непосредственно в значении <code class="varname">timezone_abbreviations</code>, так как их имена включают точку.</p><div class="note"><h3 class="title">Примечание</h3><p>Если при чтении набора аббревиатур часовых поясов возникает ошибка, новое значение не применяется и сохраняется старый набор. Если ошибка возникает при запуске базы данных, происходит сбой.</p></div><div class="caution"><h3 class="title">Внимание</h3><p>Аббревиатуры часового пояса, определённые в файле конфигурации, переопределяют не относящиеся к часовому поясу значения, встроенные в <span class="productname">PostgreSQL</span>. Например, файл конфигурации <code class="filename">Australia</code> определяет <code class="literal">SAT</code> (для Южноавстралийского стандартного времени, South Australian Standard Time). Когда этот файл активен, <code class="literal">SAT</code> не будет распознаваться как сокращение слова «суббота».</p></div><div class="caution"><h3 class="title">Внимание</h3><p>Если вы модифицируете файлы в <code class="filename">.../share/timezonesets/</code>, вы можете сами выполнить резервное копирование, так как обычный дамп базы данных не содержит этот каталог.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datetime-keywords.html" title="B.3. Ключевые слова для обозначения даты и времени">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="datetime-posix-timezone-specs.html" title="B.5. Указание часовых поясов в стиле POSIX">След.</a></td></tr><tr><td width="40%" align="left" valign="top">B.3. Ключевые слова для обозначения даты и времени </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> B.5. Указание часовых поясов в стиле <acronym class="acronym">POSIX</acronym></td></tr></table></div></body></html>