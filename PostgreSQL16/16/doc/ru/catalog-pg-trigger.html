<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.58. pg_trigger</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="catalog-pg-transform.html" title="53.57. pg_transform" /><link rel="next" href="catalog-pg-ts-config.html" title="53.59. pg_ts_config" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.58. <code class="structname">pg_trigger</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="catalog-pg-transform.html" title="53.57. pg_transform">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><th width="60%" align="center">Глава 53. Системные каталоги</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="catalog-pg-ts-config.html" title="53.59. pg_ts_config">След.</a></td></tr></table><hr /></div><div class="sect1" id="CATALOG-PG-TRIGGER"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.58. <code class="structname">pg_trigger</code> <a href="#CATALOG-PG-TRIGGER" class="id_link">#</a></h2></div></div></div><a id="id-1.10.4.60.2" class="indexterm"></a><p>В каталоге <code class="structname">pg_trigger</code> хранятся триггеры для таблиц и представлений. За дополнительными сведениями обратитесь к описанию <a class="xref" href="sql-createtrigger.html" title="CREATE TRIGGER"><span class="refentrytitle">CREATE TRIGGER</span></a>.</p><div class="table" id="id-1.10.4.60.4"><p class="title"><strong>Таблица 53.58. Столбцы <code class="structname">pg_trigger</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы pg_trigger" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">oid</code> <code class="type">oid</code>
      </p>
      <p>Идентификатор строки</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgrelid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Таблица, к которой относится этот триггер</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgparentid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-trigger.html" title="53.58. pg_trigger"><code class="structname">pg_trigger</code></a>.<code class="structfield">oid</code>)</p>
      <p>Родительский триггер, из которого был скопирован данный (это поле заполняется, когда секция создаётся или присоединяется к секционированной таблице); ноль, если данный триггер — не копия</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgname</code> <code class="type">name</code>
      </p>
      <p>Имя триггера (должно быть уникальным среди триггеров одной таблицы)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgfoid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-proc.html" title="53.39. pg_proc"><code class="structname">pg_proc</code></a>.<code class="structfield">oid</code>)</p>
      <p>Вызываемая функция</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgtype</code> <code class="type">int2</code>
      </p>
      <p>Битовая маска, задающая условия срабатывания триггера</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgenabled</code> <code class="type">char</code>
      </p>
      <p>Устанавливает, в каких режимах <a class="xref" href="runtime-config-client.html#GUC-SESSION-REPLICATION-ROLE">session_replication_role</a> срабатывает триггер: <code class="literal">O</code> = триггер срабатывает в режимах <span class="quote">«<span class="quote">origin</span>»</span> (источник) и <span class="quote">«<span class="quote">local</span>»</span> (локально), <code class="literal">D</code> = триггер отключён, <code class="literal">R</code> = триггер срабатывает в режиме <span class="quote">«<span class="quote">replica</span>»</span> (реплика), <code class="literal">A</code> = триггер срабатывает всегда.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgisinternal</code> <code class="type">bool</code>
      </p>
      <p>True, если триггер создан внутри системы (обычно, для реализации ограничения, заданного в <code class="structfield">tgconstraint</code>)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgconstrrelid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Таблица, задействованная в ограничении ссылочной целостности (ноль, если триггер предназначен не для реализации ограничения ссылочной целостности)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgconstrindid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Индекс, поддерживающий ограничение уникальности, первичного ключа или ссылочной целостности, либо ограничение-исключение (ноль, если триггер предназначен не для реализации таких ограничений)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgconstraint</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-constraint.html" title="53.13. pg_constraint"><code class="structname">pg_constraint</code></a>.<code class="structfield">oid</code>)</p>
      <p>Запись в <a class="link" href="catalog-pg-constraint.html" title="53.13. pg_constraint"><code class="structname">pg_constraint</code></a>, связанная с этим триггером (ноль, если триггер предназначен не для реализации ограничения)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgdeferrable</code> <code class="type">bool</code>
      </p>
      <p>True, если триггер ограничения является откладываемым</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tginitdeferred</code> <code class="type">bool</code>
      </p>
      <p>True, если триггер ограничения изначально отложенный</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgnargs</code> <code class="type">int2</code>
      </p>
      <p>Число аргументов, передаваемых функции триггера</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">tgattr</code> <code class="type">int2vector</code> (ссылается на <a class="link" href="catalog-pg-attribute.html" title="53.7. pg_attribute"><code class="structname">pg_attribute</code></a>.<code class="structfield">attnum</code>)</p>
      <p>Номера столбцов, если триггер привязан к столбцам; в противном случае пустой массив</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgargs</code> <code class="type">bytea</code>
      </p>
      <p>Аргументы строкового типа, передаваемые триггеру, с NULL в конце каждого</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgqual</code> <code class="type">pg_node_tree</code>
      </p>
      <p>Дерево выражения (в представлении <code class="function">nodeToString()</code>) для условия триггера <code class="literal">WHEN</code>, либо NULL, если оно отсутствует</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgoldtable</code> <code class="type">name</code>
      </p>
      <p>Предложение <code class="literal">REFERENCING</code> для <code class="literal">OLD TABLE</code> или NULL в случае его отсутствия</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">tgnewtable</code> <code class="type">name</code>
      </p>
      <p>Предложение <code class="literal">REFERENCING</code> для <code class="literal">NEW TABLE</code> или NULL в случае его отсутствия</p></td></tr></tbody></table></div></div><br class="table-break" /><p>В настоящее время триггеры, привязанные к столбцам, поддерживаются только для событий <code class="literal">UPDATE</code>, так что <code class="structfield">tgattr</code> применимо только к событиям такого типа. Поле <code class="structfield">tgtype</code> может содержать биты и для других типов событий, но они распространяются только на таблицы, вне зависимости от значения <code class="structfield">tgattr</code>.</p><div class="note"><h3 class="title">Примечание</h3><p>Когда <code class="structfield">tgconstraint</code> содержит не ноль, то есть ссылается на запись в <a class="link" href="catalog-pg-constraint.html" title="53.13. pg_constraint"><code class="structname">pg_constraint</code></a>, поля <code class="structfield">tgconstrrelid</code>, <code class="structfield">tgconstrindid</code>, <code class="structfield">tgdeferrable</code> и <code class="structfield">tginitdeferred</code> по большому счёту избыточны, они повторяют значения в этой записи. Однако возможно связать неоткладываемый триггер с откладываемым ограничением: с ограничениями внешнего ключа могут быть связаны и откладываемые, и неоткладываемые триггеры.</p></div><div class="note"><h3 class="title">Примечание</h3><p>Если для отношения есть какие-либо триггеры в этом каталоге, значением <code class="literal">pg_class.relhastriggers</code> для неё должно быть true.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="catalog-pg-transform.html" title="53.57. pg_transform">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="catalog-pg-ts-config.html" title="53.59. pg_ts_config">След.</a></td></tr><tr><td width="40%" align="left" valign="top">53.57. <code class="structname">pg_transform</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 53.59. <code class="structname">pg_ts_config</code></td></tr></table></div></body></html>