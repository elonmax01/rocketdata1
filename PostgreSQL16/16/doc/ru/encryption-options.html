<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.8. Возможности шифрования</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="preventing-server-spoofing.html" title="19.7. Защита от подмены сервера" /><link rel="next" href="ssl-tcp.html" title="19.9. Защита соединений TCP/IP с применением SSL" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">19.8. Возможности шифрования</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="preventing-server-spoofing.html" title="19.7. Защита от подмены сервера">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime.html" title="Глава 19. Подготовка к работе и сопровождение сервера">Наверх</a></td><th width="60%" align="center">Глава 19. Подготовка к работе и сопровождение сервера</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="ssl-tcp.html" title="19.9. Защита соединений TCP/IP с применением SSL">След.</a></td></tr></table><hr /></div><div class="sect1" id="ENCRYPTION-OPTIONS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">19.8. Возможности шифрования <a href="#ENCRYPTION-OPTIONS" class="id_link">#</a></h2></div></div></div><a id="id-1.6.6.11.2" class="indexterm"></a><p><span class="productname">PostgreSQL</span> обеспечивает шифрование на разных уровнях и даёт гибкость в выборе средств защиты данных в случае кражи сервера, от недобросовестных администраторов или в небезопасных сетях. Шифрование может также требоваться для защиты конфиденциальных данных, например, медицинских сведений или финансовых транзакций.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Шифрование паролей</span></dt><dd><p>Пароли пользователей базы данных хранятся в виде хешей (алгоритм хеширования определяется параметром <a class="xref" href="runtime-config-connection.html#GUC-PASSWORD-ENCRYPTION">password_encryption</a>), так что администратор не может узнать, какой именно пароль имеет пользователь. Если шифрование SCRAM или MD5 применяется и при проверке подлинности, пароль не присутствует на сервере в открытом виде даже кратковременно, так как клиент шифрует его перед тем как передавать по сети. Предпочтительным методом является SCRAM, так как это стандарт, принятый в Интернете, и он более безопасен, чем собственный протокол проверки MD5 в PostgreSQL.</p></dd><dt><span class="term">Шифрование избранных столбцов</span></dt><dd><p>Модуль <a class="xref" href="pgcrypto.html" title="F.28. pgcrypto — криптографические функции">pgcrypto</a> позволяет хранить в зашифрованном виде избранные поля. Это полезно, если ценность представляют только некоторые данные. Чтобы прочитать эти поля, клиент передаёт дешифрующий ключ, сервер расшифровывает данные и выдаёт их клиенту.</p><p>Расшифрованные данные и ключ дешифрования находятся на сервере в процессе расшифровывания и передачи данных. Именно в этот момент данные и ключи могут быть перехвачены тем, кто имеет полный доступ к серверу баз данных, например, системным администратором.</p></dd><dt><span class="term">Шифрование раздела данных</span></dt><dd><p>Шифрование хранилища данных можно реализовать на уровне файловой системы или на уровне блоков. В Linux можно воспользоваться шифрованными файловыми системами eCryptfs и EncFS, а во FreeBSD есть PEFS. Шифрование всего диска на блочном уровне в Linux можно организовать, используя dm-crypt + LUKS, а во FreeBSD — модули GEOM, geli и gbde. Подобные возможности есть и во многих других операционных системах, включая Windows.</p><p>Этот механизм не позволяет читать незашифрованные данные с дисков в случае кражи дисков или всего компьютера. При этом он не защищает данные от чтения, когда эта файловая система смонтирована, так как на смонтированном устройстве операционная система видит все данные в незашифрованном виде. Однако чтобы смонтировать файловую систему, нужно передать операционной системе ключ (иногда он хранится где-то на компьютере, который выполняет монтирование).</p></dd><dt><span class="term">Шифрование данных при передаче по сети</span></dt><dd><p>SSL-соединения шифруют все данные, передаваемые по сети: пароль, запросы и возвращаемые данные. Файл <code class="filename">pg_hba.conf</code> позволяет администраторам указать, для каких узлов будут разрешены незашифрованные соединения (<code class="literal">host</code>), а для каких будет требоваться SSL (<code class="literal">hostssl</code>). Кроме того, и на стороне клиента можно разрешить подключения к серверам только с SSL.</p><p>Защищённые GSSAPI соединения шифруют все данные, передаваемые по сети, включая запросы и возвращаемые данные. (Пароль по сети не передаётся.) В файле <code class="filename">pg_hba.conf</code> администраторы могут указать, для каких узлов будут разрешены незашифрованные соединения (<code class="literal">host</code>), а для каких будет требоваться шифрование GSSAPI (<code class="literal">hostgssenc</code>). В дополнение и клиенты можно настроить так, чтобы они подключались к серверу только с защитой GSSAPI (<code class="literal">gssencmode=require</code>).</p><p>Для шифрования передаваемых данных можно также применять <span class="application">Stunnel</span> или <span class="application">SSH</span>.</p></dd><dt><span class="term">Проверка подлинности сервера SSL</span></dt><dd><p>И клиент, и сервер могут проверять подлинность друг друга по сертификатам SSL. Это требует дополнительной настройки на каждой стороне, но даёт более надёжную гарантию подлинности, чем обычные пароли. С такой защитой подставной компьютер не сможет представлять из себя сервер с целью получить пароли клиентов. Она также предотвращает атаки с посредником (<span class="quote">«<span class="quote">man in the middle</span>»</span>), когда компьютер между клиентом и сервером представляется сервером и незаметно передаёт все запросы и данные между клиентом и подлинным сервером.</p></dd><dt><span class="term">Шифрование на стороне клиента</span></dt><dd><p>Если системный администратор сервера, где работает база данных, не является доверенным, клиент должен сам шифровать данные; тогда незашифрованные данные никогда не появятся на этом сервере. В этом случае клиент шифрует данные, прежде чем передавать их серверу, а получив из базы данных результаты, он расшифровывает их для использования.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preventing-server-spoofing.html" title="19.7. Защита от подмены сервера">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime.html" title="Глава 19. Подготовка к работе и сопровождение сервера">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="ssl-tcp.html" title="19.9. Защита соединений TCP/IP с применением SSL">След.</a></td></tr><tr><td width="40%" align="left" valign="top">19.7. Защита от подмены сервера </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 19.9. Защита соединений TCP/IP с применением SSL</td></tr></table></div></body></html>