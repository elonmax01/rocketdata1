<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>75.4. Команды BKI</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="bki-format.html" title="75.3. Формат файла BKI" /><link rel="next" href="bki-structure.html" title="75.5. Структура файла BKI" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">75.4. Команды <acronym class="acronym">BKI</acronym></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="bki-format.html" title="75.3. Формат файла BKI">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="bki.html" title="Глава 75. Объявление и начальное содержимое системных каталогов">Наверх</a></td><th width="60%" align="center">Глава 75. Объявление и начальное содержимое системных каталогов</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="bki-structure.html" title="75.5. Структура файла BKI">След.</a></td></tr></table><hr /></div><div class="sect1" id="BKI-COMMANDS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">75.4. Команды <acronym class="acronym">BKI</acronym> <a href="#BKI-COMMANDS" class="id_link">#</a></h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">create</code> <em class="replaceable"><code>имя_таблицы</code></em> <em class="replaceable"><code>oid_таблицы</code></em> [<span class="optional"><code class="literal">bootstrap</code></span>] [<span class="optional"><code class="literal">shared_relation</code></span>] [<span class="optional"><code class="literal">rowtype_oid</code> <em class="replaceable"><code>oid</code></em></span>] (<em class="replaceable"><code>имя1</code></em> = <em class="replaceable"><code>тип1</code></em> [<span class="optional"><code class="literal">FORCE NOT NULL</code> | <code class="literal">FORCE NULL</code></span>] [<span class="optional">, <em class="replaceable"><code>имя2</code></em> = <em class="replaceable"><code>тип2</code></em> [<span class="optional"><code class="literal">FORCE NOT NULL</code> | <code class="literal">FORCE NULL</code></span>], ...</span>])</span></dt><dd><p>Создать таблицу <em class="replaceable"><code>имя_таблицы</code></em> с заданным <em class="replaceable"><code>oid_таблицы</code></em> и столбцами, указанными в скобках.</p><p>Непосредственно <code class="filename">bootstrap.c</code> поддерживает следующие типы столбцов: <code class="type">bool</code>, <code class="type">bytea</code>, <code class="type">char</code> (1 байт), <code class="type">name</code>, <code class="type">int2</code>, <code class="type">int4</code>, <code class="type">regproc</code>, <code class="type">regclass</code>, <code class="type">regtype</code>, <code class="type">text</code>, <code class="type">oid</code>, <code class="type">tid</code>, <code class="type">xid</code>, <code class="type">cid</code>, <code class="type">int2vector</code>, <code class="type">oidvector</code>, <code class="type">_int4</code> (массив), <code class="type">_text</code> (массив), <code class="type">_oid</code> (массив), <code class="type">_char</code> (массив), <code class="type">_aclitem</code> (массив). Хотя возможно создать таблицы, содержащие столбцы и других типов, это нельзя сделать, пока не будет создан и заполнен соответствующими записями каталог <code class="structname">pg_type</code>. (По сути это означает, что только эти типы столбцов могут быть в каталогах начальной загрузки, хотя другие каталоги могут содержать любые встроенные типы.)</p><p>С указанием <code class="literal">bootstrap</code> таблица будет создана только на диске; никакие записи о ней не будут добавлены в <code class="structname">pg_class</code>, <code class="structname">pg_attribute</code> и т. д. Таким образом, таблица не будет доступна для обычных операций SQL, пока такие записи не будут добавлены явно (командами <code class="literal">insert</code>). Это указание применяется для создания самой структуры <code class="structname">pg_class</code> и подобных ей.</p><p>Если добавлено указание <code class="literal">shared_relation</code>, таблица создаётся как общая. Дополнительным предложением <code class="literal">rowtype_oid</code> может быть задан OID типа строки (OID записи в <code class="structname">pg_type</code>); если он не указан, OID генерируется автоматически. (Предложение <code class="literal">rowtype_oid</code> бесполезно, если присутствует указание <code class="literal">bootstrap</code>, но его всё равно можно добавить для документирования.)</p></dd><dt><span class="term">
     <code class="literal">open</code> <em class="replaceable"><code>имя_таблицы</code></em>
    </span></dt><dd><p>Открыть таблицу <em class="replaceable"><code>имя_таблицы</code></em> для добавления данных. Любая другая таблица, открытая в данный момент, закрывается.</p></dd><dt><span class="term">
     <code class="literal">close</code> <em class="replaceable"><code>имя_таблицы</code></em>
    </span></dt><dd><p>Закрыть открытую таблицу. Имя таблицы должно задаваться для перепроверки.</p></dd><dt><span class="term"><code class="literal">insert</code> <code class="literal">(</code> [<span class="optional"><em class="replaceable"><code>значение_oid</code></em></span>] <em class="replaceable"><code>значение1</code></em> <em class="replaceable"><code>значение2</code></em> ... <code class="literal">)</code></span></dt><dd><p>Вставить строку в открытую таблицу с именами столбцов <em class="replaceable"><code>значение1</code></em>, <em class="replaceable"><code>значение2</code></em> и т. д.</p><p>Значения NULL могут задаваться специальным ключевым словом <code class="literal">_null_</code>. Значения, отличные от идентификаторов и цифровых строк, должны заключаться в двойные кавычки. (Апострофы, включаемые в значение, необходимо дублировать. В строке также допускается экранирование с обратной косой чертой.)</p></dd><dt><span class="term">
     <code class="literal">declare</code> [<span class="optional"><code class="literal">unique</code></span>]
     <code class="literal">index</code> <em class="replaceable"><code>имя_индекса</code></em>
     <em class="replaceable"><code>oid_индекса</code></em>
     <code class="literal">on</code> <em class="replaceable"><code>имя_таблицы</code></em>
     <code class="literal">using</code> <em class="replaceable"><code>имя_метода_доступа</code></em>
     <code class="literal">(</code> <em class="replaceable"><code>класс_оп1</code></em>
     <em class="replaceable"><code>имя1</code></em>
     [<span class="optional">, ...</span>] <code class="literal">)</code>
    </span></dt><dd><p>Создать индекс <em class="replaceable"><code>имя_индекса</code></em> с OID, равным <em class="replaceable"><code>oid_индекса</code></em>, в таблице <em class="replaceable"><code>имя_таблицы</code></em>, с методом доступа <em class="replaceable"><code>имя_метода_доступа</code></em>. Индекс строится по полям <em class="replaceable"><code>имя1</code></em>, <em class="replaceable"><code>имя2</code></em> и т. д., и для них используются соответственно классы операторов <em class="replaceable"><code>класс_оп1</code></em>, <em class="replaceable"><code>класс_оп2</code></em> и т. д. Эта команда создаёт файл индекса и добавляет соответствующие записи в каталог, но не инициализирует содержимое индекса.</p></dd><dt><span class="term">
     <code class="literal">declare toast</code>
     <em class="replaceable"><code>oid_таблицы_toast</code></em>
     <em class="replaceable"><code>oid_индекса_toast</code></em>
     <code class="literal">on</code> <em class="replaceable"><code>имя_таблицы</code></em>
    </span></dt><dd><p>Создаёт таблицу TOAST для таблицы <em class="replaceable"><code>имя_таблицы</code></em>. Таблице TOAST назначается OID, равный <em class="replaceable"><code>oid_таблицы_toast</code></em>, а её индексу назначается OID, равный <em class="replaceable"><code>oid_индекса_toast</code></em>. Как и с <code class="literal">declare index</code>, заполнение индекса откладывается.</p></dd><dt><span class="term"><code class="literal">build indices</code></span></dt><dd><p>Заполнить индексы, объявленные ранее.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bki-format.html" title="75.3. Формат файла BKI">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="bki.html" title="Глава 75. Объявление и начальное содержимое системных каталогов">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="bki-structure.html" title="75.5. Структура файла BKI">След.</a></td></tr><tr><td width="40%" align="left" valign="top">75.3. Формат файла <acronym class="acronym">BKI</acronym> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 75.5. Структура файла <acronym class="acronym">BKI</acronym></td></tr></table></div></body></html>