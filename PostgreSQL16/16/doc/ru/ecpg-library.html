<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>36.11. Библиотечные функции</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="ecpg-process.html" title="36.10. Компиляция программ со встраиваемым SQL" /><link rel="next" href="ecpg-lo.html" title="36.12. Большие объекты" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">36.11. Библиотечные функции</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="ecpg-process.html" title="36.10. Компиляция программ со встраиваемым SQL">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="ecpg.html" title="Глава 36. ECPG — Встраиваемый SQL в C">Наверх</a></td><th width="60%" align="center">Глава 36. <span class="application">ECPG</span> — Встраиваемый <acronym class="acronym">SQL</acronym> в C</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="ecpg-lo.html" title="36.12. Большие объекты">След.</a></td></tr></table><hr /></div><div class="sect1" id="ECPG-LIBRARY"><div class="titlepage"><div><div><h2 class="title" style="clear: both">36.11. Библиотечные функции <a href="#ECPG-LIBRARY" class="id_link">#</a></h2></div></div></div><p>Библиотека <code class="filename">libecpg</code> в основном содержит <span class="quote">«<span class="quote">скрытые</span>»</span> функции, применяемые для реализации функциональности, выражаемой встраиваемыми командами SQL. Но есть также некоторые функции, которые можно вызывать напрямую. Заметьте, что код, задействующий эти функции, будет непереносимым.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="function">ECPGdebug(int <em class="replaceable"><code>вкл</code></em>, FILE *<em class="replaceable"><code>поток</code></em>)</code> с первым аргументом, отличным от нуля, включает вывод отладочных сообщений в заданный <em class="replaceable"><code>поток</code></em>. Журнал сообщений, полученный таким образом, будет содержать все операторы <acronym class="acronym">SQL</acronym> с заданными входными переменными и результаты, выданные сервером <span class="productname">PostgreSQL</span>. Это может быть очень полезно для поиска ошибок в командах <acronym class="acronym">SQL</acronym>.</p><div class="note"><h3 class="title">Примечание</h3><p>В Windows, если библиотека <span class="application">ecpg</span> и приложение скомпилированы с разными флагами, эта функция может вызвать крах приложения из-за различий внутреннего представления указателей <code class="literal">FILE</code>. В частности, флаги многопоточной/однопоточной, выпускаемой/отладочной или статической/динамической сборки должны быть одинаковыми для библиотеки и всех использующих её приложений.</p></div></li><li class="listitem"><p><code class="function">ECPGget_PGconn(const char *<em class="replaceable"><code>имя_подключения</code></em>)</code> возвращает указатель на подключение к базе данных, имеющее заданное имя. Если аргумент <em class="replaceable"><code>имя_подключения</code></em> равен <code class="literal">NULL</code>, возвращается указатель на текущее подключение. Если определить подключение не удаётся, возвращается <code class="literal">NULL</code>. Полученный указатель на подключение, если требуется, можно использовать при вызове любых других функций <span class="application">libpq</span>.</p><div class="note"><h3 class="title">Примечание</h3><p>Манипулировать подключениями, открытыми средствами <span class="application">ecpg</span>, напрямую через <span class="application">libpq</span> не следует.</p></div></li><li class="listitem"><p><code class="function">ECPGtransactionStatus(const char *<em class="replaceable"><code>имя_подключения</code></em>)</code> возвращает состояние текущей транзакции для подключения, на которое указывает <em class="replaceable"><code>имя_подключения</code></em>. О возвращаемых кодах состояния можно узнать в <a class="xref" href="libpq-status.html" title="34.2. Функции, описывающие текущее состояние подключения">Раздел 34.2</a> и в описании входящей в libpq функции <a class="xref" href="libpq-status.html#LIBPQ-PQTRANSACTIONSTATUS"><code class="function">PQtransactionStatus</code></a>.</p></li><li class="listitem"><p><code class="function">ECPGstatus(int <em class="replaceable"><code>номер_строки</code></em>, const char* <em class="replaceable"><code>имя_подключения</code></em>)</code> возвращает true при наличии подключения к базе данных и false в противном случае. В аргументе <em class="replaceable"><code>имя_подключения</code></em> можно передать <code class="literal">NULL</code>, если применяется одно подключение.</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ecpg-process.html" title="36.10. Компиляция программ со встраиваемым SQL">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ecpg.html" title="Глава 36. ECPG — Встраиваемый SQL в C">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="ecpg-lo.html" title="36.12. Большие объекты">След.</a></td></tr><tr><td width="40%" align="left" valign="top">36.10. Компиляция программ со встраиваемым SQL </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 36.12. Большие объекты</td></tr></table></div></body></html>