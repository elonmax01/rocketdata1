<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.11. Параметры клиентских сеансов по умолчанию</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="runtime-config-autovacuum.html" title="20.10. Автоматическая очистка" /><link rel="next" href="runtime-config-locks.html" title="20.12. Управление блокировками" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">20.11. Параметры клиентских сеансов по умолчанию</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-autovacuum.html" title="20.10. Автоматическая очистка">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><th width="60%" align="center">Глава 20. Настройка сервера</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="runtime-config-locks.html" title="20.12. Управление блокировками">След.</a></td></tr></table><hr /></div><div class="sect1" id="RUNTIME-CONFIG-CLIENT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.11. Параметры клиентских сеансов по умолчанию <a href="#RUNTIME-CONFIG-CLIENT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="runtime-config-client.html#RUNTIME-CONFIG-CLIENT-STATEMENT">20.11.1. Поведение команд</a></span></dt><dt><span class="sect2"><a href="runtime-config-client.html#RUNTIME-CONFIG-CLIENT-FORMAT">20.11.2. Языковая среда и форматы</a></span></dt><dt><span class="sect2"><a href="runtime-config-client.html#RUNTIME-CONFIG-CLIENT-PRELOAD">20.11.3. Предзагрузка разделяемых библиотек</a></span></dt><dt><span class="sect2"><a href="runtime-config-client.html#RUNTIME-CONFIG-CLIENT-OTHER">20.11.4. Другие параметры по умолчанию</a></span></dt></dl></div><div class="sect2" id="RUNTIME-CONFIG-CLIENT-STATEMENT"><div class="titlepage"><div><div><h3 class="title">20.11.1. Поведение команд <a href="#RUNTIME-CONFIG-CLIENT-STATEMENT" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-CLIENT-MIN-MESSAGES"><span class="term"><code class="varname">client_min_messages</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.1.1.3" class="indexterm"></a></span> <a href="#GUC-CLIENT-MIN-MESSAGES" class="id_link">#</a></dt><dd><p>Управляет минимальным <a class="link" href="runtime-config-logging.html#RUNTIME-CONFIG-SEVERITY-LEVELS" title="Таблица 20.2. Уровни важности сообщений">уровнем сообщений</a>, посылаемых клиенту. Допустимые значения <code class="literal">DEBUG5</code>, <code class="literal">DEBUG4</code>, <code class="literal">DEBUG3</code>, <code class="literal">DEBUG2</code>, <code class="literal">DEBUG1</code>, <code class="literal">LOG</code>, <code class="literal">NOTICE</code>, <code class="literal">WARNING</code> и <code class="literal">ERROR</code>. Каждый из перечисленных уровней включает все идущие после него. Чем дальше в этом списке уровень сообщения, тем меньше сообщений будет посылаться клиенту. По умолчанию используется <code class="literal">NOTICE</code>. Обратите внимание, позиция <code class="literal">LOG</code> здесь отличается от принятой в <a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a>.</p><p>Сообщения уровня <code class="literal">INFO</code> передаются клиенту всегда.</p></dd><dt id="GUC-SEARCH-PATH"><span class="term"><code class="varname">search_path</code> (<code class="type">string</code>) <a id="id-1.6.7.14.2.2.2.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.2.1.4" class="indexterm"></a></span> <a href="#GUC-SEARCH-PATH" class="id_link">#</a></dt><dd><p>Эта переменная определяет порядок, в котором будут просматриваться схемы при поиске объекта (таблицы, типа данных, функции и т. д.), к которому обращаются просто по имени, без указания схемы. Если объекты с одинаковым именем находятся в нескольких схемах, использоваться будет тот, что встретится первым при просмотре пути поиска. К объекту, который не относится к схемам, перечисленным в пути поиска, можно обратиться только по полному имени (с точкой), с указанием содержащей его схемы.</p><p>Значением <code class="varname">search_path</code> должен быть список имён схем через запятую. Если для имени, указанного в этом списке, не находится существующая схема, либо пользователь не имеет права <code class="literal">USAGE</code> для схемы с этим именем, такое имя просто игнорируется.</p><p>Если список содержит специальный элемент <code class="literal">$user</code>, вместо него подставляется схема с именем, возвращаемым функцией <code class="function">CURRENT_USER</code>, если такая схема существует и пользователь имеет право <code class="literal">USAGE</code> для неё. (В противном случае элемент <code class="literal">$user</code> игнорируется.)</p><p>Схема системных каталогов, <code class="literal">pg_catalog</code>, просматривается всегда, независимо от того, указана она в пути или нет. Если она указана в пути, она просматривается в заданном порядке. Если же <code class="literal">pg_catalog</code> отсутствует в пути, эта схема будет просматриваться <span class="emphasis"><em>перед</em></span> остальными элементами пути.</p><p>Аналогично всегда просматривается схема временных таблиц текущего сеанса, <code class="literal">pg_temp_<em class="replaceable"><code>nnn</code></em></code>, если она существует. Её можно включить в путь поиска, указав её псевдоним <code class="literal">pg_temp</code><a id="id-1.6.7.14.2.2.2.2.5.3" class="indexterm"></a>. Если она отсутствует в пути, она будет просматриваться первой (даже перед <code class="literal">pg_catalog</code>). Временная схема просматривается только при поиске отношений (таблиц, представлений, последовательностей и т. д.) и типов данных, но никогда при поиске функций и операторов.</p><p>Когда объекты создаются без указания определённой целевой схемы, они помещаются в первую пригодную схему, указанную в <code class="varname">search_path</code>. Если путь поиска схем пуст, выдаётся ошибка.</p><p>По умолчанию этот параметр имеет значение <code class="literal">"$user", public</code>. При таком значении поддерживается совместное использование базы данных (когда пользователи не имеют личных схем, все используют схему <code class="literal">public</code>), использование личных схем, а также комбинация обоих вариантов. Другие подходы можно реализовать, изменяя значение пути по умолчанию, либо глобально, либо индивидуально для каждого пользователя.</p><p>Более подробно обработка схем описана в <a class="xref" href="ddl-schemas.html" title="5.9. Схемы">Разделе 5.9</a>. В частности, стандартная конфигурация схем подходит только для баз данных с одним пользователем или с взаимно доверяющими пользователями.</p><p>Текущее действующее значение пути поиска можно получить, воспользовавшись <acronym class="acronym">SQL</acronym>-функцией <code class="function">current_schemas</code> (см. <a class="xref" href="functions-info.html" title="9.26. Системные информационные функции и операторы">Раздел 9.26</a>). Это значение может отличаться от значения <code class="varname">search_path</code>, так как <code class="function">current_schemas</code> показывает, как были преобразованы элементы, фигурирующие в <code class="varname">search_path</code>.</p></dd><dt id="GUC-ROW-SECURITY"><span class="term"><code class="varname">row_security</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.3.1.3" class="indexterm"></a></span> <a href="#GUC-ROW-SECURITY" class="id_link">#</a></dt><dd><p>Эта переменная определяет, должна ли выдаваться ошибка при применении политик защиты строк. Со значением <code class="literal">on</code> политики применяются в обычном режиме. Со значением <code class="literal">off</code> запросы, ограничиваемые минимум одной политикой, будут выдавать ошибку. Значение по умолчанию — <code class="literal">on</code>. Значение <code class="literal">off</code> рекомендуется, когда ограничение видимости строк чревато некорректными результатами; например, <span class="application">pg_dump</span> устанавливает это значение. Эта переменная не влияет на роли, которые обходят все политики защиты строк, а именно, на суперпользователей и роли с атрибутом <code class="literal">BYPASSRLS</code>.</p><p>Подробнее о политиках защиты строк можно узнать в описании <a class="xref" href="sql-createpolicy.html" title="CREATE POLICY"><span class="refentrytitle">CREATE POLICY</span></a>.</p></dd><dt id="GUC-DEFAULT-TABLE-ACCESS-METHOD"><span class="term"><code class="varname">default_table_access_method</code> (<code class="type">string</code>) <a id="id-1.6.7.14.2.2.4.1.3" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TABLE-ACCESS-METHOD" class="id_link">#</a></dt><dd><p>Этот параметр задаёт табличный метод доступа по умолчанию, который будет использоваться при создании таблиц или материализованных представлений, если в команде <code class="command">CREATE</code> не будет явно указан метод доступа, или при выполнении команды <code class="command">SELECT ... INTO</code>, в которой явно задать метод доступа нельзя. Значение по умолчанию — <code class="literal">heap</code>.</p></dd><dt id="GUC-DEFAULT-TABLESPACE"><span class="term"><code class="varname">default_tablespace</code> (<code class="type">string</code>) <a id="id-1.6.7.14.2.2.5.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.5.1.4" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TABLESPACE" class="id_link">#</a></dt><dd><p>Эта переменная устанавливает табличное пространство по умолчанию, в котором будут создаваться объекты (таблицы и индексы), когда в команде <code class="command">CREATE</code> табличное пространство не указывается явно.</p><p>Её значением может быть либо имя табличного пространства, либо пустая строка, подразумевающая использование табличного пространства по умолчанию в текущей базе данных. Если табличное пространство с заданным именем не существует, <span class="productname">PostgreSQL</span> будет автоматически использовать табличное пространство по умолчанию. Если используется не пространство по умолчанию, пользователь должен иметь право <code class="literal">CREATE</code> для него, иначе он не сможет создавать объекты.</p><p>Эта переменная не используется для временных таблиц; для них задействуется <a class="xref" href="runtime-config-client.html#GUC-TEMP-TABLESPACES">temp_tablespaces</a>.</p><p>Эта переменная также не используется при создании баз данных. По умолчанию, новая база данных наследует выбор табличного пространства от базы-шаблона, из которой она копируется.</p><p>Если на момент создания секционированной таблицы значение этого параметра отлично от пустого, оно задаёт табличное пространство для секционированной таблицы, в котором по умолчанию будут располагаться её секции, создаваемые в дальнейшем, даже если позже значение <code class="varname">default_tablespace</code> будет изменено.</p><p>За дополнительными сведениями о табличных пространствах обратитесь к <a class="xref" href="manage-ag-tablespaces.html" title="23.6. Табличные пространства">Разделу 23.6</a>.</p></dd><dt id="GUC-DEFAULT-TOAST-COMPRESSION"><span class="term"><code class="varname">default_toast_compression</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.6.1.3" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TOAST-COMPRESSION" class="id_link">#</a></dt><dd><p>Эта переменная устанавливает метод сжатия <a class="link" href="storage-toast.html" title="73.2. TOAST">TOAST</a> по умолчанию для значений сжимаемых столбцов. (Его можно переопределить для отдельных столбцов, установив параметр столбца <code class="literal">COMPRESSION</code> в <code class="command">CREATE TABLE</code> или <code class="command">ALTER TABLE</code>.) Поддерживаемые методы сжатия: <code class="literal">pglz</code> и <code class="literal">lz4</code> (если <span class="productname">PostgreSQL</span> скомпилирован с параметром <code class="option">--with-lz4</code>). По умолчанию используется <code class="literal">pglz</code>.</p></dd><dt id="GUC-TEMP-TABLESPACES"><span class="term"><code class="varname">temp_tablespaces</code> (<code class="type">string</code>) <a id="id-1.6.7.14.2.2.7.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.7.1.4" class="indexterm"></a></span> <a href="#GUC-TEMP-TABLESPACES" class="id_link">#</a></dt><dd><p>Эта переменная задаёт табличные пространства, в которых будут создаваться временные объекты (временные таблицы и индексы временных таблиц), когда в команде <code class="command">CREATE</code> табличное пространство не указывается явно. В этих табличных пространствах также создаются временные файлы для внутреннего использования, например, для сортировки больших наборов данных.</p><p>Её значение содержит список имён табличных пространств. Когда этот список содержит больше одного имени, <span class="productname">PostgreSQL</span> выбирает из этого списка случайный элемент при создании каждого временного объекта; однако при создании последующих объектов внутри транзакции табличные пространства перебираются последовательно. Если в этом списке оказывается пустая строка, <span class="productname">PostgreSQL</span> будет автоматически использовать вместо этого элемента табличное пространство по умолчанию для текущей базы данных.</p><p>Когда <code class="varname">temp_tablespaces</code> задаётся интерактивно, указание несуществующего табличного пространства считается ошибкой, как и указание табличного пространства, для которого пользователь не имеет права <code class="literal">CREATE</code>. Однако при использовании значения, заданного ранее, несуществующие табличные пространства и пространства, для которых у пользователя нет права <code class="literal">CREATE</code>, просто игнорируются. В частности, это касается значения, заданного в <code class="filename">postgresql.conf</code>.</p><p>По умолчанию значение этой переменной — пустая строка. С таким значением все временные объекты создаются в табличном пространстве по умолчанию, установленном для текущей базы данных.</p><p>См. также <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLESPACE">default_tablespace</a>.</p></dd><dt id="GUC-CHECK-FUNCTION-BODIES"><span class="term"><code class="varname">check_function_bodies</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.8.1.3" class="indexterm"></a></span> <a href="#GUC-CHECK-FUNCTION-BODIES" class="id_link">#</a></dt><dd><p>Этот параметр обычно включён. Выключение этого параметра (присваивание ему значения <code class="literal">off</code>) отключает проверку строки с телом подпрограммы, передаваемой командам <a class="xref" href="sql-createfunction.html" title="CREATE FUNCTION"><span class="refentrytitle">CREATE FUNCTION</span></a> и <a class="xref" href="sql-createprocedure.html" title="CREATE PROCEDURE"><span class="refentrytitle">CREATE PROCEDURE</span></a>. Отключение проверки позволяет избежать побочных эффектов процесса проверки, в частности исключить ложные срабатывания из-за таких проблем, как ссылки вперёд. Этому параметру нужно присваивать значение <code class="literal">off</code> перед загрузкой функций от лица других пользователей; <span class="application">pg_dump</span> делает это автоматически.</p></dd><dt id="GUC-DEFAULT-TRANSACTION-ISOLATION"><span class="term"><code class="varname">default_transaction_isolation</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.9.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.9.1.4" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TRANSACTION-ISOLATION" class="id_link">#</a></dt><dd><p>Для каждой транзакции в SQL устанавливается уровень изоляции: <span class="quote">«<span class="quote">read uncommitted</span>»</span>, <span class="quote">«<span class="quote">read committed</span>»</span>, <span class="quote">«<span class="quote">repeatable read</span>»</span> или <span class="quote">«<span class="quote">serializable</span>»</span>. Этот параметр задаёт уровень изоляции, который будет устанавливаться по умолчанию для новых транзакций. Значение этого параметра по умолчанию — <span class="quote">«<span class="quote">read committed</span>»</span>.</p><p>Дополнительную информацию вы можете найти в <a class="xref" href="mvcc.html" title="Глава 13. Управление конкурентным доступом">Главе 13</a> и <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-DEFAULT-TRANSACTION-READ-ONLY"><span class="term"><code class="varname">default_transaction_read_only</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.10.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.10.1.4" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TRANSACTION-READ-ONLY" class="id_link">#</a></dt><dd><p>SQL-транзакции в режиме «только чтение» не могут модифицировать не временные таблицы. Этот параметр определяет, будут ли новые транзакции по умолчанию иметь характеристику «только чтение». Значение этого параметра по умолчанию — <code class="literal">off</code> (допускается чтение и запись).</p><p>За дополнительной информацией обратитесь к <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-DEFAULT-TRANSACTION-DEFERRABLE"><span class="term"><code class="varname">default_transaction_deferrable</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.11.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.11.1.4" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TRANSACTION-DEFERRABLE" class="id_link">#</a></dt><dd><p>Транзакция, работающая на уровне изоляции <code class="literal">serializable</code>, в режиме «только чтение» может быть задержана, прежде чем будет разрешено её выполнение. Однако когда она начинает выполняться, для обеспечения сериализуемости не требуется никаких дополнительных усилий, так что коду сериализации ни при каких условиях не придётся прерывать её из-за параллельных изменений, поэтому это вполне подходит для длительных транзакций в режиме «только чтение».</p><p>Этот параметр определяет, будет ли каждая новая транзакция по умолчанию откладываемой. В настоящее время его действие не распространяется на транзакции, для которых устанавливается режим «чтение/запись» или уровень изоляции ниже <code class="literal">serializable</code>. Значение по умолчанию — <code class="literal">off</code> (выкл.).</p><p>За дополнительной информацией обратитесь к <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-TRANSACTION-ISOLATION"><span class="term"><code class="varname">transaction_isolation</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.12.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.12.1.4" class="indexterm"></a></span> <a href="#GUC-TRANSACTION-ISOLATION" class="id_link">#</a></dt><dd><p>Данный параметр отражает уровень изоляции текущей транзакции. В начале каждой транзакции ему присваивается текущее значение <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TRANSACTION-ISOLATION">default_transaction_isolation</a>. Последующая попытка изменить значение этого параметра равнозначна команде <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-TRANSACTION-READ-ONLY"><span class="term"><code class="varname">transaction_read_only</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.13.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.13.1.4" class="indexterm"></a></span> <a href="#GUC-TRANSACTION-READ-ONLY" class="id_link">#</a></dt><dd><p>Данный параметр отражает характеристику <span class="quote">«<span class="quote">только чтение</span>»</span> для текущей транзакции. В начале каждой транзакции ему присваивается текущее значение <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TRANSACTION-READ-ONLY">default_transaction_read_only</a>. Последующая попытка изменить значение этого параметра равнозначна команде <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-TRANSACTION-DEFERRABLE"><span class="term"><code class="varname">transaction_deferrable</code> (<code class="type">boolean</code>) <a id="id-1.6.7.14.2.2.14.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.14.1.4" class="indexterm"></a></span> <a href="#GUC-TRANSACTION-DEFERRABLE" class="id_link">#</a></dt><dd><p>Данный параметр отражает характеристику <span class="quote">«<span class="quote">откладываемости</span>»</span> для текущей транзакции. В начале каждой транзакции ему присваивается текущее значение <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TRANSACTION-DEFERRABLE">default_transaction_deferrable</a>. Последующая попытка изменить значение этого параметра равнозначна команде <a class="xref" href="sql-set-transaction.html" title="SET TRANSACTION"><span class="refentrytitle">SET TRANSACTION</span></a>.</p></dd><dt id="GUC-SESSION-REPLICATION-ROLE"><span class="term"><code class="varname">session_replication_role</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.15.1.3" class="indexterm"></a></span> <a href="#GUC-SESSION-REPLICATION-ROLE" class="id_link">#</a></dt><dd><p>Управляет срабатыванием правил и триггеров, связанных с репликацией, в текущем сеансе. Она может принимать следующие значения: <code class="literal">origin</code> (значение по умолчанию), <code class="literal">replica</code> и <code class="literal">local</code>. Изменение этой переменной приводит к сбросу всех ранее кешированных планов запросов. Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменять её значение.</p><p>Предполагается, что системы логической репликации будут устанавливать для него значение <code class="literal">replica</code>, применяя реплицированные изменения. В результате триггеры и правила (с конфигурацией по умолчанию) не будут срабатывать в репликах. Подробнее об этом говорится в описании предложений <code class="literal">ENABLE TRIGGER</code> и <code class="literal">ENABLE RULE</code> команды <a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a>.</p><p>Внутри PostgreSQL значения <code class="literal">origin</code> и <code class="literal">local</code> воспринимаются как равнозначные. Сторонние системы репликации могут различать их для своих внутренних целей, например, отмечать значением <code class="literal">local</code> сеанс, изменения в котором не должны реплицироваться.</p><p>Так как внешние ключи реализованы посредством триггеров, присваивание этому параметру значения <code class="literal">replica</code> влечёт отключение всех проверок внешних ключей, что может привести к нарушению согласованности данных при некорректном использовании.</p></dd><dt id="GUC-STATEMENT-TIMEOUT"><span class="term"><code class="varname">statement_timeout</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.16.1.3" class="indexterm"></a></span> <a href="#GUC-STATEMENT-TIMEOUT" class="id_link">#</a></dt><dd><p>Задаёт максимальную длительность выполнения оператора, при превышении которой оператор прерывается. Если <code class="varname">log_min_error_statement</code> имеет значение <code class="literal">ERROR</code> или ниже, оператор, прерванный по тайм-ауту, будет также записан в журнал. Если это значение задаётся без единиц измерения, оно считается заданным в миллисекундах. При значении, равном нулю (по умолчанию), этот контроль длительности отключается.</p><p>Длительность выполнения отсчитывается с момента получения команды сервером до завершения её выполнения. Если в одном сообщении простого запроса поступает несколько SQL-операторов, ограничение длительности действует на каждый независимо. (До 13 версии <span class="productname">PostgreSQL</span> обычно считалось, что этот тайм-аут должен относиться ко всей строке запроса.) В расширенном протоколе запросов таймер запускается с момента получения любого связанного с запросом сообщения (Parse, Bind, Execute, Describe), а останавливается на стадии обработки сообщений Execute или Sync.</p><p>Устанавливать значение <code class="varname">statement_timeout</code> в <code class="filename">postgresql.conf</code> не рекомендуется, так как это повлияет на все сеансы.</p></dd><dt id="GUC-LOCK-TIMEOUT"><span class="term"><code class="varname">lock_timeout</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.17.1.3" class="indexterm"></a></span> <a href="#GUC-LOCK-TIMEOUT" class="id_link">#</a></dt><dd><p>Задаёт максимальную длительность ожидания любым оператором получения блокировки таблицы, индекса, строки или другого объекта базы данных. Если ожидание не закончилось за указанное время, оператор прерывается. Это ограничение действует на каждую попытку получения блокировки по отдельности и применяется как к явным запросам блокировки (например, <code class="command">LOCK TABLE</code> или <code class="command">SELECT FOR UPDATE</code> без <code class="literal">NOWAIT</code>), так и к неявным. Если это значение задаётся без единиц измерения, оно считается заданным в миллисекундах. При значении, равном нулю (по умолчанию), этот контроль длительности отключается.</p><p>В отличие от <code class="varname">statement_timeout</code>, этот тайм-аут может произойти только при ожидании блокировки. Заметьте, что при ненулевом <code class="varname">statement_timeout</code> бессмысленно задавать в <code class="varname">lock_timeout</code> такое же или большее значение, так как тайм-аут оператора всегда будет происходить раньше. Если <code class="varname">log_min_error_statement</code> имеет значение <code class="literal">ERROR</code> или ниже, оператор, прерванный по тайм-ауту, будет записан в журнал.</p><p>Устанавливать значение <code class="varname">lock_timeout</code> в <code class="filename">postgresql.conf</code> не рекомендуется, так как это повлияет на все сеансы.</p></dd><dt id="GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT"><span class="term"><code class="varname">idle_in_transaction_session_timeout</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.18.1.3" class="indexterm"></a></span> <a href="#GUC-IDLE-IN-TRANSACTION-SESSION-TIMEOUT" class="id_link">#</a></dt><dd><p>Завершать любые сеансы, простаивающие (то есть ожидающие запросов от клиентов) дольше заданного времени в открытой транзакции. Если это значение задаётся без единиц измерения, оно считается заданным в миллисекундах. При значении, равном нулю (по умолчанию), этот контроль длительности отключается.</p><p>Этот параметр полезен для предотвращения ситуаций, когда простаивающие сеансы удерживают блокировки чрезмерно долго. И даже если сеанс не держит мешающие другим блокировки, открытые транзакции препятствуют очистке недавно удалённых кортежей, которые могут быть видимыми только для данной транзакции. Поэтому длительный простой транзакций может приводить и к раздуванию таблиц. За подробностями обратитесь к <a class="xref" href="routine-vacuuming.html" title="25.1. Регламентная очистка">Разделу 25.1</a>.</p></dd><dt id="GUC-IDLE-SESSION-TIMEOUT"><span class="term"><code class="varname">idle_session_timeout</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.19.1.3" class="indexterm"></a></span> <a href="#GUC-IDLE-SESSION-TIMEOUT" class="id_link">#</a></dt><dd><p>Завершать любые сеансы, простаивающие (то есть ожидающие запросов от клиентов) дольше заданного времени вне открытой транзакции. Если это значение задаётся без единиц измерения, оно считается заданным в миллисекундах. При значении, равном нулю (по умолчанию), этот контроль длительности отключается.</p><p>В отличие от ситуации с открытой транзакцией, простаивающий вне транзакции сеанс не оказывает значительного влияния на работу сервера, поэтому на практике чаще требуется включать тайм-аут <code class="varname">idle_in_transaction_session_timeout</code>.</p><p>Для подключений, устанавливаемых через промежуточный слой, например через пул соединений, включать данный тайм-аут следует с осторожностью, так как этот слой может не реагировать корректно на неожиданное закрытие соединений. Может иметь смысл установить этот тайм-аут только для интерактивных сеансов, возможно, распространяя его применение только на определённых пользователей.</p></dd><dt id="GUC-VACUUM-FREEZE-TABLE-AGE"><span class="term"><code class="varname">vacuum_freeze_table_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.20.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-FREEZE-TABLE-AGE" class="id_link">#</a></dt><dd><p>Задаёт максимальный возраст для поля <code class="structname">pg_class</code>.<code class="structfield">relfrozenxid</code> таблицы, при достижении которого <code class="command">VACUUM</code> будет производить агрессивное сканирование. Агрессивное сканирование отличается от обычного сканирования <code class="command">VACUUM</code> тем, что затрагивает все страницы, которые могут содержать незамороженные XID или MXID, а не только те, что могут содержать мёртвые кортежи. Значение по умолчанию — 150 миллионов транзакций. Хотя пользователи могут задать любое значение от нуля до двух миллиардов, в <code class="command">VACUUM</code> введён внутренний предел для действующего значения, равный 95% от <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-FREEZE-MAX-AGE">autovacuum_freeze_max_age</a>, чтобы периодически запускаемая вручную команда <code class="command">VACUUM</code> имела шансы выполниться, прежде чем для таблицы будет запущена автоочистка для предотвращения зацикливания. За дополнительными сведениями обратитесь к <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-WRAPAROUND" title="25.1.5. Предотвращение ошибок из-за зацикливания счётчика транзакций">Подразделу 25.1.5</a>.</p></dd><dt id="GUC-VACUUM-FREEZE-MIN-AGE"><span class="term"><code class="varname">vacuum_freeze_min_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.21.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-FREEZE-MIN-AGE" class="id_link">#</a></dt><dd><p>Задаёт возраст для отсечки (в транзакциях), при достижении которого команда <code class="command">VACUUM</code> должна вызывать замораживание страниц с более ранними XID. Значение по умолчанию — 50 миллионов транзакций. Хотя пользователи могут задать любое значение от нуля до одного миллиарда, в <code class="command">VACUUM</code> введён внутренний предел для действующего значения, равный половине <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-FREEZE-MAX-AGE">autovacuum_freeze_max_age</a>, чтобы принудительная автоочистка выполнялась не слишком часто. За дополнительными сведениями обратитесь к <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-WRAPAROUND" title="25.1.5. Предотвращение ошибок из-за зацикливания счётчика транзакций">Подразделу 25.1.5</a>.</p></dd><dt id="GUC-VACUUM-FAILSAFE-AGE"><span class="term"><code class="varname">vacuum_failsafe_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.22.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-FAILSAFE-AGE" class="id_link">#</a></dt><dd><p>Задаёт максимальный возраст (в транзакциях) для поля <code class="structname">pg_class</code>.<code class="structfield">relfrozenxid</code> некоторой таблицы, при достижении которого механизм <code class="command">VACUUM</code> принимает чрезвычайные меры для защиты от зацикливания счётчика транзакций, приводящего к глобальному сбою. Эта стратегия защиты <code class="command">VACUUM</code> применяется в экстренном случае. Обычно защитный режим включается, когда автоочистка для предотвращения зацикливания счётчика транзакций уже выполнялась в течение некоторого времени. Однако данная стратегия может также применяться во время любой операции <code class="command">VACUUM</code>.</p><p>При срабатывании защитного режима любая действующая задержка на основе стоимости больше не применяется, дальнейшие несущественные задачи обслуживания (такие как очистка индекса) пропускаются, а любая используемая <a class="glossterm" href="glossary.html#GLOSSARY-BUFFER-ACCESS-STRATEGY"><em class="glossterm"><a class="glossterm" href="glossary.html#GLOSSARY-BUFFER-ACCESS-STRATEGY" title="Стратегия доступа к буферу">Стратегия доступа к буферу</a></em></a> отключается, в результате чего <code class="command">VACUUM</code> сможет свободно использовать все <a class="glossterm" href="glossary.html#GLOSSARY-SHARED-MEMORY"><em class="glossterm"><a class="glossterm" href="glossary.html#GLOSSARY-SHARED-MEMORY" title="Общая память">общие буферы</a></em></a>.</p><p>По умолчанию — 1.6 миллиарда транзакций. Хотя пользователи могут установить любое значение из интервала от нуля до 2.1 миллиарда, <code class="command">VACUUM</code> автоматически увеличит действующее значение до 105% от <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-FREEZE-MAX-AGE">autovacuum_freeze_max_age</a>, если заданное значение меньше.</p></dd><dt id="GUC-VACUUM-MULTIXACT-FREEZE-TABLE-AGE"><span class="term"><code class="varname">vacuum_multixact_freeze_table_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.23.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-MULTIXACT-FREEZE-TABLE-AGE" class="id_link">#</a></dt><dd><p>Задаёт максимальный возраст для поля <code class="structname">pg_class</code>.<code class="structfield">relminmxid</code> таблицы, при достижении которого команда <code class="command">VACUUM</code> будет выполнять агрессивное сканирование. Агрессивное сканирование отличается от обычного сканирования <code class="command">VACUUM</code> тем, что затрагивает все страницы, которые могут содержать незамороженные XID или MXID, а не только те, что могут содержать мёртвые кортежи. Значение по умолчанию — 150 миллионов мультитранзакций. Хотя пользователи могут задать любое значение от нуля до двух миллиардов, в <code class="command">VACUUM</code> введён внутренний предел для действующего значения, равный 95% от <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-MULTIXACT-FREEZE-MAX-AGE">autovacuum_multixact_freeze_max_age</a>, чтобы периодически запускаемая вручную команда <code class="command">VACUUM</code> имела шансы выполниться, прежде чем для таблицы будет запущена автоочистка для предотвращения зацикливания. За дополнительными сведениями обратитесь к <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-MULTIXACT-WRAPAROUND" title="25.1.5.1. Мультитранзакции и зацикливание">Подразделу 25.1.5.1</a>.</p></dd><dt id="GUC-VACUUM-MULTIXACT-FREEZE-MIN-AGE"><span class="term"><code class="varname">vacuum_multixact_freeze_min_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.24.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-MULTIXACT-FREEZE-MIN-AGE" class="id_link">#</a></dt><dd><p>Задаёт возраст для отсечки (в мультитранзакциях), при достижении которого команда <code class="command">VACUUM</code> должна вызывать замораживание страниц с более ранними идентификаторами мультитранзакций. Значение по умолчанию — 5 миллионов мультитранзакций. Хотя пользователи могут задать любое значение от нуля до одного миллиарда, в <code class="command">VACUUM</code> введён внутренний предел для действующего значения, равный половине <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-MULTIXACT-FREEZE-MAX-AGE">autovacuum_multixact_freeze_max_age</a>, чтобы принудительная автоочистка не выполнялась слишком часто. За дополнительными сведениями обратитесь к <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-MULTIXACT-WRAPAROUND" title="25.1.5.1. Мультитранзакции и зацикливание">Подразделу 25.1.5.1</a>.</p></dd><dt id="GUC-VACUUM-MULTIXACT-FAILSAFE-AGE"><span class="term"><code class="varname">vacuum_multixact_failsafe_age</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.25.1.3" class="indexterm"></a></span> <a href="#GUC-VACUUM-MULTIXACT-FAILSAFE-AGE" class="id_link">#</a></dt><dd><p>Задаёт максимальный возраст (в мультитранзакциях) для поля <code class="structname">pg_class</code>.<code class="structfield">relminmxid</code> некоторой таблицы, при достижении которого механизм <code class="command">VACUUM</code> принимает чрезвычайные меры для защиты от зацикливания счётчика мультитранзакций, приводящего к глобальному сбою. Эта стратегия защиты <code class="command">VACUUM</code> применяется в экстренном случае. Обычно защитный режим включается, когда автоочистка для предотвращения зацикливания счётчика транзакций уже выполнялась в течение некоторого времени. Однако данная стратегия может также применяться во время любой операции <code class="command">VACUUM</code>.</p><p>При срабатывании защитного режима любая действующая задержка на основе стоимости больше не применяется, а дальнейшие несущественные задачи обслуживания (такие как очистка индекса) пропускаются.</p><p>По умолчанию — 1.6 миллиарда мультитранзакций. Хотя пользователи могут установить любое значение из интервала от нуля до 2.1 миллиарда, <code class="command">VACUUM</code> автоматически увеличит действующее значение до 105% от <a class="xref" href="runtime-config-autovacuum.html#GUC-AUTOVACUUM-MULTIXACT-FREEZE-MAX-AGE">autovacuum_multixact_freeze_max_age</a>, если заданное значение меньше.</p></dd><dt id="GUC-BYTEA-OUTPUT"><span class="term"><code class="varname">bytea_output</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.26.1.3" class="indexterm"></a></span> <a href="#GUC-BYTEA-OUTPUT" class="id_link">#</a></dt><dd><p>Задаёт выходной формат для значения типа <code class="type">bytea</code>. Это может быть формат <code class="literal">hex</code> (по умолчанию) или <code class="literal">escape</code> (традиционный формат PostgreSQL). За дополнительными сведениями обратитесь к <a class="xref" href="datatype-binary.html" title="8.4. Двоичные типы данных">Разделу 8.4</a>. Входные значения <code class="type">bytea</code> воспринимаются в обоих форматах, независимо от данного параметра.</p></dd><dt id="GUC-XMLBINARY"><span class="term"><code class="varname">xmlbinary</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.27.1.3" class="indexterm"></a></span> <a href="#GUC-XMLBINARY" class="id_link">#</a></dt><dd><p>Задаёт способ кодирования двоичных данных в XML. Это кодирование применяется, например, когда значения <code class="type">bytea</code> преобразуются в XML функциями <code class="function">xmlelement</code> или <code class="function">xmlforest</code>. Допустимые варианты, определённые в стандарте XML-схем: <code class="literal">base64</code> и <code class="literal">hex</code>. Значение по умолчанию — <code class="literal">base64</code>. Чтобы узнать больше о функциях для работы с XML, обратитесь к <a class="xref" href="functions-xml.html" title="9.15. XML-функции">Разделу 9.15</a>.</p><p>Конечный выбор в основном дело вкуса, ограничения могут накладываться только клиентскими приложениями. Оба метода поддерживают все возможные значения, хотя результат кодирования в base64 немного компактнее шестнадцатеричного вида (hex).</p></dd><dt id="GUC-XMLOPTION"><span class="term"><code class="varname">xmloption</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.2.2.28.1.3" class="indexterm"></a> <a id="id-1.6.7.14.2.2.28.1.4" class="indexterm"></a> <a id="id-1.6.7.14.2.2.28.1.5" class="indexterm"></a></span> <a href="#GUC-XMLOPTION" class="id_link">#</a></dt><dd><p>Задаёт подразумеваемый по умолчанию тип преобразования между XML и символьными строками (<code class="literal">DOCUMENT</code> или <code class="literal">CONTENT</code>). За описанием этого преобразования обратитесь к <a class="xref" href="datatype-xml.html" title="8.13. Тип XML">Разделу 8.13</a>. Значение по умолчанию — <code class="literal">CONTENT</code> (кроме него допускается значение <code class="literal">DOCUMENT</code>).</p><p>Согласно стандарту SQL этот параметр должен задаваться командой </p><pre class="synopsis">
SET XML OPTION { DOCUMENT | CONTENT };
</pre><p> Этот синтаксис тоже поддерживается в PostgreSQL.</p></dd><dt id="GUC-GIN-PENDING-LIST-LIMIT"><span class="term"><code class="varname">gin_pending_list_limit</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.2.2.29.1.3" class="indexterm"></a></span> <a href="#GUC-GIN-PENDING-LIST-LIMIT" class="id_link">#</a></dt><dd><p>Задаёт максимальный размер очереди записей GIN, которая используется, когда включён режим <code class="literal">fastupdate</code>. Если размер очереди превышает заданный предел, записи из неё массово переносятся в основную структуру данных индекса GIN, и очередь очищается. Если это значение задаётся без единиц измерения, оно считается заданным в килобайтах. Размер по умолчанию — четыре мегабайта (<code class="literal">4MB</code>). Этот предел можно переопределить для отдельных индексов GIN, изменив их параметры хранения. За дополнительными сведениями обратитесь к <a class="xref" href="gin-implementation.html#GIN-FAST-UPDATE" title="70.4.1. Методика быстрого обновления GIN">Подразделу 70.4.1</a> и <a class="xref" href="gin-tips.html" title="70.5. Приёмы и советы по применению GIN">Разделу 70.5</a>.</p></dd><dt id="GUC-CREATEROLE-SELF-GRANT"><span class="term"><code class="varname">createrole_self_grant</code> (<code class="type">string</code>) <a id="id-1.6.7.14.2.2.30.1.3" class="indexterm"></a></span> <a href="#GUC-CREATEROLE-SELF-GRANT" class="id_link">#</a></dt><dd><p>Если пользователь, у которого есть право <code class="literal">CREATEROLE</code>, но нет права <code class="literal">SUPERUSER</code>, создаёт роль, и для этого параметра задано непустое значение, созданная роль будет назначена создающему её пользователю с указанными параметрами. Значение должно быть <code class="literal">set</code>, <code class="literal">inherit</code> или оба эти значения, разделённые запятыми. Значение по умолчанию — пустая строка, которая отключает эту функциональность.</p><p>Этот параметр позволяет пользователю с правом <code class="literal">CREATEROLE</code>, который не является суперпользователем, автоматически наследовать или получать возможность назначать права командой <code class="command">SET ROLE</code> любым создаваемым пользователям. Поскольку пользователю с правом <code class="literal">CREATEROLE</code> всегда неявно предоставляется право <code class="literal">ADMIN OPTION</code> для создаваемых ролей, он всегда может выполнить <code class="literal">GRANT</code>, что приведёт к тому же результату, что и задание этого параметра. Однако автоматическое предоставление прав может быть удобнее. Суперпользователь автоматически наследует права всех ролей и всегда может выполнять <code class="literal">SET ROLE</code> для любых ролей. Этот параметр позволяет задавать аналогичное поведение пользователям с правом <code class="literal">CREATEROLE</code> в отношении создаваемых пользователей.</p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-CLIENT-FORMAT"><div class="titlepage"><div><div><h3 class="title">20.11.2. Языковая среда и форматы <a href="#RUNTIME-CONFIG-CLIENT-FORMAT" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-DATESTYLE"><span class="term"><code class="varname">DateStyle</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.1.1.3" class="indexterm"></a></span> <a href="#GUC-DATESTYLE" class="id_link">#</a></dt><dd><p>Задаёт формат вывода значений даты и времени, а также правила интерпретации неоднозначных значений даты. По историческим причинам эта переменная содержит два независимых компонента: указание выходного формата (<code class="literal">ISO</code>, <code class="literal">Postgres</code>, <code class="literal">SQL</code> и <code class="literal">German</code>) и указание порядка год(Y)/месяц(M)/день(D) для вводимых и выводимых значений (<code class="literal">DMY</code>, <code class="literal">MDY</code> или <code class="literal">YMD</code>). Эти два компонента могут задаваться по отдельности или вместе. Ключевые слова <code class="literal">Euro</code> и <code class="literal">European</code> являются синонимами <code class="literal">DMY</code>, а ключевые слова <code class="literal">US</code>, <code class="literal">NonEuro</code> и <code class="literal">NonEuropean</code> — синонимы <code class="literal">MDY</code>. За дополнительными сведениями обратитесь к <a class="xref" href="datatype-datetime.html" title="8.5. Типы даты/времени">Разделу 8.5</a>. Встроенное значение по умолчанию — <code class="literal">ISO, MDY</code>, но <span class="application">initdb</span> при инициализации записывает в файл конфигурации значение, соответствующее выбранной локали <code class="varname">lc_time</code>.</p></dd><dt id="GUC-INTERVALSTYLE"><span class="term"><code class="varname">IntervalStyle</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.3.2.2.1.3" class="indexterm"></a></span> <a href="#GUC-INTERVALSTYLE" class="id_link">#</a></dt><dd><p>Задаёт формат вывода для значений-интервалов. В формате <code class="literal">sql_standard</code> интервал выводится в виде, установленном стандартом <acronym class="acronym">SQL</acronym>. В формате <code class="literal">postgres</code> (выбранном по умолчанию) интервал выводится в виде, применявшемся в <span class="productname">PostgreSQL</span> до версии 8.4, когда параметр <a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a> имел значение <code class="literal">ISO</code>. В формате <code class="literal">postgres_verbose</code> интервал выводится в виде, применявшемся в <span class="productname">PostgreSQL</span> до версии 8.4, когда параметр <code class="varname">DateStyle</code> имел значение не <code class="literal">ISO</code>. В формате <code class="literal">iso_8601</code> выводимая строка будет соответствовать <span class="quote">«<span class="quote">формату с кодами</span>»</span>, определённому в разделе 4.4.3.2 стандарта ISO 8601.</p><p>На интерпретацию неоднозначных вводимых данных также влияет параметр <code class="varname">IntervalStyle</code>. За дополнительными сведениями обратитесь к <a class="xref" href="datatype-datetime.html#DATATYPE-INTERVAL-INPUT" title="8.5.4. Ввод интервалов">Подразделу 8.5.4</a>.</p></dd><dt id="GUC-TIMEZONE"><span class="term"><code class="varname">TimeZone</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.3.1.3" class="indexterm"></a> <a id="id-1.6.7.14.3.2.3.1.4" class="indexterm"></a></span> <a href="#GUC-TIMEZONE" class="id_link">#</a></dt><dd><p>Задаёт часовой пояс для вывода и ввода значений времени. Встроенное значение по умолчанию — <code class="literal">GMT</code>, но обычно оно переопределяется в <code class="filename">postgresql.conf</code>; <span class="application">initdb</span> устанавливает в нём значение, соответствующее системному окружению. За дополнительными сведениями обратитесь к <a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. Часовые пояса">Подразделу 8.5.3</a>.</p></dd><dt id="GUC-TIMEZONE-ABBREVIATIONS"><span class="term"><code class="varname">timezone_abbreviations</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.4.1.3" class="indexterm"></a> <a id="id-1.6.7.14.3.2.4.1.4" class="indexterm"></a></span> <a href="#GUC-TIMEZONE-ABBREVIATIONS" class="id_link">#</a></dt><dd><p>Задаёт набор сокращений часовых поясов, которые будут приниматься сервером во вводимых значениях даты и времени. Значение по умолчанию — <code class="literal">'Default'</code>, которое представляет набор основных сокращений, принятых в мире; допускаются также значения <code class="literal">'Australia'</code> и <code class="literal">'India'</code>, кроме них для конкретной инсталляции можно определить и другие наборы. За дополнительными сведениями обратитесь к <a class="xref" href="datetime-config-files.html" title="B.4. Файлы конфигурации даты/времени">Разделу B.4</a>.</p></dd><dt id="GUC-EXTRA-FLOAT-DIGITS"><span class="term"><code class="varname">extra_float_digits</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.3.2.5.1.3" class="indexterm"></a> <a id="id-1.6.7.14.3.2.5.1.4" class="indexterm"></a> <a id="id-1.6.7.14.3.2.5.1.5" class="indexterm"></a></span> <a href="#GUC-EXTRA-FLOAT-DIGITS" class="id_link">#</a></dt><dd><p>Этот параметр корректирует число цифр в текстовом представлении чисел с плавающей точкой, включая значения <code class="type">float4</code>, <code class="type">float8</code> и геометрических типов.</p><p>Если его значение равно 1 (по умолчанию) или больше, числа с плавающей точкой выводятся в кратчайшем точном виде; см. <a class="xref" href="datatype-numeric.html#DATATYPE-FLOAT" title="8.1.3. Типы с плавающей точкой">Подраздел 8.1.3</a>. Выводимое фактически количество цифр зависит от выводимого числа, а не от значения данного параметра. Для значений <code class="type">float8</code> может потребоваться максимум 17 цифр, а для значений <code class="type">float4</code> — максимум 9. Данное представление является и быстрым, и точным, так как оно позволяет при правильном прочтении в точности восстановить двоичное число с плавающей точкой. Ради исторической совместимости этот параметр принимает значения до 3 включительно.</p><p>Если его значение равно нулю или отрицательно, выводимое число округляется до заданной десятичной точности. Точность в данном случае определяется обычным количеством цифр для типа (<code class="literal">FLT_DIG</code> или <code class="literal">DBL_DIG</code>), уменьшенным на значение этого параметра. (Например, со значением -1 числа типа <code class="type">float4</code> будут выводиться округлёнными до 5 значащих цифр, а числа типа <code class="type">float8</code> — до 14). Преобразование в такой вид выполняется медленнее и не сохраняет все биты двоичного числа с плавающей точкой, но он может быть более удобным для человека.</p><div class="note"><h3 class="title">Примечание</h3><p>Поведение этого параметра, а также его значение по умолчанию, изменилось в <span class="productname">PostgreSQL</span> 12; подробнее это описывается в <a class="xref" href="datatype-numeric.html#DATATYPE-FLOAT" title="8.1.3. Типы с плавающей точкой">Подразделе 8.1.3</a>.</p></div></dd><dt id="GUC-CLIENT-ENCODING"><span class="term"><code class="varname">client_encoding</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.6.1.3" class="indexterm"></a> <a id="id-1.6.7.14.3.2.6.1.4" class="indexterm"></a></span> <a href="#GUC-CLIENT-ENCODING" class="id_link">#</a></dt><dd><p>Задаёт кодировку (набор символов) на стороне клиента. По умолчанию выбирается кодировка базы данных. Наборы символов, которые поддерживает сервер <span class="productname">PostgreSQL</span>, перечислены в <a class="xref" href="multibyte.html#MULTIBYTE-CHARSET-SUPPORTED" title="24.3.1. Поддерживаемые кодировки">Подразделе 24.3.1</a>.</p></dd><dt id="GUC-LC-MESSAGES"><span class="term"><code class="varname">lc_messages</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.7.1.3" class="indexterm"></a></span> <a href="#GUC-LC-MESSAGES" class="id_link">#</a></dt><dd><p>Устанавливает язык выводимых сообщений. Набор допустимых значений зависит от системы; за дополнительными сведениями обратитесь к <a class="xref" href="locale.html" title="24.1. Поддержка языковых стандартов">Разделу 24.1</a>. Если эта переменная определена как пустая строка (по умолчанию), то действующее значение получается из среды выполнения сервера, в зависимости от системы.</p><p>В некоторых системах такая категория локали отсутствует, так что даже если задать значение этой переменной, действовать оно не будет. Также может оказаться, что переведённые сообщения для запрошенного языка отсутствуют. В этих случаях вы по-прежнему будете получать сообщения на английском языке.</p><p>Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр.</p></dd><dt id="GUC-LC-MONETARY"><span class="term"><code class="varname">lc_monetary</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.8.1.3" class="indexterm"></a></span> <a href="#GUC-LC-MONETARY" class="id_link">#</a></dt><dd><p>Устанавливает локаль для форматирования денежных сумм, например с использованием функций семейства <code class="function">to_char</code>. Набор допустимых значений зависит от системы; за дополнительными сведениями обратитесь к <a class="xref" href="locale.html" title="24.1. Поддержка языковых стандартов">Разделу 24.1</a>. Если эта переменная определена как пустая строка (по умолчанию), то действующее значение получается из среды выполнения сервера, в зависимости от системы.</p></dd><dt id="GUC-LC-NUMERIC"><span class="term"><code class="varname">lc_numeric</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.9.1.3" class="indexterm"></a></span> <a href="#GUC-LC-NUMERIC" class="id_link">#</a></dt><dd><p>Устанавливает локаль для форматирования чисел, например с использованием функций семейства <code class="function">to_char</code>. Набор допустимых значений зависит от системы; за дополнительными сведениями обратитесь к <a class="xref" href="locale.html" title="24.1. Поддержка языковых стандартов">Разделу 24.1</a>. Если эта переменная определена как пустая строка (по умолчанию), то действующее значение получается из среды выполнения сервера, в зависимости от системы.</p></dd><dt id="GUC-LC-TIME"><span class="term"><code class="varname">lc_time</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.10.1.3" class="indexterm"></a></span> <a href="#GUC-LC-TIME" class="id_link">#</a></dt><dd><p>Устанавливает локаль для форматирования даты и времени, например с использованием функций семейства <code class="function">to_char</code>. Набор допустимых значений зависит от системы; за дополнительными сведениями обратитесь к <a class="xref" href="locale.html" title="24.1. Поддержка языковых стандартов">Разделу 24.1</a>. Если эта переменная определена как пустая строка (по умолчанию), то действующее значение получается из среды выполнения сервера, в зависимости от системы.</p></dd><dt id="GUC-ICU-VALIDATION-LEVEL"><span class="term"><code class="varname">icu_validation_level</code> (<code class="type">enum</code>) <a id="id-1.6.7.14.3.2.11.1.3" class="indexterm"></a></span> <a href="#GUC-ICU-VALIDATION-LEVEL" class="id_link">#</a></dt><dd><p>Указывает, какой <a class="link" href="runtime-config-logging.html#RUNTIME-CONFIG-SEVERITY-LEVELS" title="Таблица 20.2. Уровни важности сообщений">уровень</a> должен использоваться в сообщениях о проблемах с проверкой локали ICU. Допустимые значения: <code class="literal">DISABLED</code>, <code class="literal">DEBUG5</code>, <code class="literal">DEBUG4</code>, <code class="literal">DEBUG3</code>, <code class="literal">DEBUG2</code>, <code class="literal">DEBUG1</code>, <code class="literal">INFO</code>, <code class="literal">NOTICE</code>, <code class="literal">WARNING</code>, <code class="literal">ERROR</code> и <code class="literal">LOG</code>.</p><p>Если установлено значение <code class="literal">DISABLED</code>, сообщения о проблемах проверки не выдаются. В противном случае выдаются сообщения на выбранном уровне. По умолчанию используется <code class="literal">WARNING</code>.</p></dd><dt id="GUC-DEFAULT-TEXT-SEARCH-CONFIG"><span class="term"><code class="varname">default_text_search_config</code> (<code class="type">string</code>) <a id="id-1.6.7.14.3.2.12.1.3" class="indexterm"></a></span> <a href="#GUC-DEFAULT-TEXT-SEARCH-CONFIG" class="id_link">#</a></dt><dd><p>Выбирает конфигурацию текстового поиска для тех функций текстового поиска, которым не передаётся аргумент, явно указывающий конфигурацию. За дополнительной информацией обратитесь к <a class="xref" href="textsearch.html" title="Глава 12. Полнотекстовый поиск">Главе 12</a>. Встроенное значение по умолчанию — <code class="literal">pg_catalog.simple</code>, но <span class="application">initdb</span> при инициализации записывает в файл конфигурации сервера значение, соответствующее выбранной локали <code class="varname">lc_ctype</code>, если удастся найти такую конфигурацию текстового поиска.</p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-CLIENT-PRELOAD"><div class="titlepage"><div><div><h3 class="title">20.11.3. Предзагрузка разделяемых библиотек <a href="#RUNTIME-CONFIG-CLIENT-PRELOAD" class="id_link">#</a></h3></div></div></div><p>Для настройки предварительной загрузки разделяемых библиотек в память сервера, в целях подключения дополнительной функциональности или увеличения быстродействия, предназначены несколько параметров. Значения этих параметров задаются однотипно, например, со значением <code class="literal">'$libdir/mylib'</code> в память будет загружена <code class="literal">mylib.so</code> (или в некоторых ОС, <code class="literal">mylib.sl</code>) из стандартного каталога библиотек данной инсталляции сервера. Различаются эти параметры тем, когда они вступают в силу и какие права требуются для их изменения.</p><p>Таким же образом можно загрузить библиотеки на процедурных языках <span class="productname">PostgreSQL</span>, обычно в виде <code class="literal">'$libdir/plXXX'</code>, где <code class="literal">XXX</code> — имя языка: <code class="literal">pgsql</code>, <code class="literal">perl</code>, <code class="literal">tcl</code> или <code class="literal">python</code>.</p><p>Этим способом можно загрузить только разделяемые библиотеки, предназначенные специально для использования с PostgreSQL. PostgreSQL при загрузке библиотеки проверяет наличие <span class="quote">«<span class="quote">отличительного блока</span>»</span> для гарантии совместимости. Поэтому загрузить библиотеки не для PostgreSQL таким образом нельзя. Для этого вы можете воспользоваться средствами операционной системы, например, переменной окружения <code class="envar">LD_PRELOAD</code>.</p><p>В общем случае, чтобы узнать, какой способ рекомендуется для загрузки модуля, следует обратиться к документации этого модуля.</p><div class="variablelist"><dl class="variablelist"><dt id="GUC-LOCAL-PRELOAD-LIBRARIES"><span class="term"><code class="varname">local_preload_libraries</code> (<code class="type">string</code>) <a id="id-1.6.7.14.4.6.1.1.3" class="indexterm"></a> <a id="id-1.6.7.14.4.6.1.1.4" class="indexterm"></a></span> <a href="#GUC-LOCAL-PRELOAD-LIBRARIES" class="id_link">#</a></dt><dd><p>В этом параметре задаются одна или несколько разделяемых библиотек, которые будут загружаться при установлении соединения. Он содержит разделённый запятыми список имён библиотек, и каждое имя в нём должно восприниматься командой <a class="link" href="sql-load.html" title="LOAD"><code class="command">LOAD</code></a>. Пробельные символы между именами игнорируются; если в имя нужно включить пробелы или запятые, заключите его в двойные кавычки. Заданное значение параметра действует только в начале соединения, так что последующие изменения ни на что не влияют. Если указанная в нём библиотека не найдена, установить подключение не удастся.</p><p>Этот параметр разрешено устанавливать всем пользователям. Поэтому библиотеки, которые так можно загрузить, ограничиваются теми, что находятся в подкаталоге <code class="filename">plugins</code> стандартного каталога библиотек установленного сервера. (Ответственность за то, чтобы в этом подкаталоге находились только <span class="quote">«<span class="quote">безопасные</span>»</span> библиотеки, лежит на администраторе.) В <code class="varname">local_preload_libraries</code> этот каталог можно задать явно (например, так: <code class="literal">$libdir/plugins/mylib</code>), либо просто указать имя библиотеки — <code class="literal">mylib</code> (оно будет воспринято как <code class="literal">$libdir/plugins/mylib</code>).</p><p>Данный механизм предназначен для того, чтобы непривилегированные пользователи могли загружать отладочные или профилирующие библиотеки в избранных сеансах, обходясь без явной команды <code class="command">LOAD</code>. Для такого применения этот параметр обычно устанавливается в переменной окружения <code class="envar">PGOPTIONS</code> на клиенте или с помощью команды <code class="command">ALTER ROLE SET</code>.</p><p>Обычно этот параметр не следует использовать, если только модуль не предназначен специально для такой загрузки обычными пользователями. Предпочтительная альтернатива ему — <a class="xref" href="runtime-config-client.html#GUC-SESSION-PRELOAD-LIBRARIES">session_preload_libraries</a>.</p></dd><dt id="GUC-SESSION-PRELOAD-LIBRARIES"><span class="term"><code class="varname">session_preload_libraries</code> (<code class="type">string</code>) <a id="id-1.6.7.14.4.6.2.1.3" class="indexterm"></a></span> <a href="#GUC-SESSION-PRELOAD-LIBRARIES" class="id_link">#</a></dt><dd><p>В этом параметре задаются одна или несколько разделяемых библиотек, которые будут загружаться при установлении соединения. Он содержит разделённый запятыми список имён библиотек, и каждое имя в нём должно восприниматься командой <a class="link" href="sql-load.html" title="LOAD"><code class="command">LOAD</code></a>. Пробельные символы между именами игнорируются; если в имя нужно включить пробелы или запятые, заключите его в двойные кавычки. Заданное значение параметра действует только в начале соединения, так что последующие изменения ни на что не влияют. Если указанная в нём библиотека не найдена, установить подключение не удастся. Изменить его могут только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code>.</p><p>Данный параметр предназначен для загрузки отладочных или профилирующих библиотек в избранных сеансах, без явного выполнения команды <code class="command">LOAD</code>. Например, можно загрузить модуль <a class="xref" href="auto-explain.html" title="F.4. auto_explain — протоколирование планов выполнения медленных запросов">auto_explain</a> во всех сеансах пользователя с заданным именем, установив этот параметр командой <code class="command">ALTER ROLE SET</code>. Кроме того, этот параметр можно изменить без перезапуска сервера (хотя изменения вступают в силу только при запуске нового сеанса), так что таким образом проще подгружать новые модули, даже если это нужно сделать для всех сеансов.</p><p>В отличие от <a class="xref" href="runtime-config-client.html#GUC-SHARED-PRELOAD-LIBRARIES">shared_preload_libraries</a>, этот вариант загрузки библиотеки не даёт большого выигрыша в скорости по сравнению с вариантом загрузки при первом использовании. Однако он оказывается выигрышным, когда используется пул соединений.</p></dd><dt id="GUC-SHARED-PRELOAD-LIBRARIES"><span class="term"><code class="varname">shared_preload_libraries</code> (<code class="type">string</code>) <a id="id-1.6.7.14.4.6.3.1.3" class="indexterm"></a></span> <a href="#GUC-SHARED-PRELOAD-LIBRARIES" class="id_link">#</a></dt><dd><p>В этом параметре задаются одна или несколько разделяемых библиотек, которые будут загружаться при запуске сервера. Он содержит разделённый запятыми список имён библиотек, и каждое имя в нём должно восприниматься командой <a class="link" href="sql-load.html" title="LOAD"><code class="command">LOAD</code></a>. Пробельные символы между именами игнорируются; если в имя нужно включить пробелы или запятые, заключите его в двойные кавычки. Этот параметр можно задать только при запуске сервера. Если указанная в нём библиотека не будет найдена, сервер не запустится.</p><p>Некоторые библиотеки при загрузке должны выполнять операции, которые могут иметь место только при запуске главного процесса, например, выделять разделяемую память, резервировать легковесные блокировки или запускать фоновые рабочие процессы. Такие библиотеки должны загружаться при запуске сервера посредством этого параметра. За подробностями обратитесь к документации библиотек.</p><p>Также можно предварительно загрузить и другие библиотеки. Предварительная загрузка позволяет избавиться от задержки, возникающей при первом использовании библиотеки. Однако при этом может несколько увеличиться время запуска каждого нового процесса, даже если он не будет использовать эту библиотеку. Поэтому применять этот параметр рекомендуется только для библиотек, которые будут использоваться большинством сеансов. Кроме того, при изменении этого параметра необходимо перезапускать сервер, так что этот вариант не подходит, например, для краткосрочных задач отладки. В таких случаях используйте вместо него <a class="xref" href="runtime-config-client.html#GUC-SESSION-PRELOAD-LIBRARIES">session_preload_libraries</a>.</p><div class="note"><h3 class="title">Примечание</h3><p>В системе Windows загрузка библиотек при запуске сервера не сокращает время запуска каждого нового серверного процесса; каждый процесс будет заново загружать все библиотеки. Однако параметр <code class="varname">shared_preload_libraries</code> всё же может быть полезен в Windows для загрузки библиотек, которые должны выполнять некоторые операции при запуске главного процесса.</p></div></dd><dt id="GUC-JIT-PROVIDER"><span class="term"><code class="varname">jit_provider</code> (<code class="type">string</code>) <a id="id-1.6.7.14.4.6.4.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-PROVIDER" class="id_link">#</a></dt><dd><p>В этой переменной указывается библиотека провайдера JIT, которая будет использоваться (см. <a class="xref" href="jit-extensibility.html#JIT-PLUGGABLE" title="32.4.2. Подключаемые провайдеры JIT">Подраздел 32.4.2</a>). Значение по умолчанию — <code class="literal">llvmjit</code>. Этот параметр можно задать только при запуске сервера.</p><p>Если указывается несуществующая библиотека, <acronym class="acronym">JIT</acronym> не будет работать, но это не считается ошибкой. Такое поведение позволяет устанавливать поддержку JIT отдельно от основного пакета <span class="productname">PostgreSQL</span>.</p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-CLIENT-OTHER"><div class="titlepage"><div><div><h3 class="title">20.11.4. Другие параметры по умолчанию <a href="#RUNTIME-CONFIG-CLIENT-OTHER" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-DYNAMIC-LIBRARY-PATH"><span class="term"><code class="varname">dynamic_library_path</code> (<code class="type">string</code>) <a id="id-1.6.7.14.5.2.1.1.3" class="indexterm"></a> <a id="id-1.6.7.14.5.2.1.1.4" class="indexterm"></a></span> <a href="#GUC-DYNAMIC-LIBRARY-PATH" class="id_link">#</a></dt><dd><p>Когда требуется открыть динамически загружаемый модуль и его имя, заданное в команде <code class="command">CREATE FUNCTION</code> или <code class="command">LOAD</code> не содержит имён каталогов (т. е. в этом имени нет косой черты), система будет искать запрошенный файл в данном пути.</p><p>Значением параметра <code class="varname">dynamic_library_path</code> должен быть список абсолютных путей, разделённых двоеточием (или точкой с запятой в Windows). Если элемент в этом списке начинается со специальной строки <code class="literal">$libdir</code>, вместо неё подставляется заданный при компиляции путь каталога библиотек <span class="productname">PostgreSQL</span>; в этот каталог устанавливаются модули, поставляемые в составе стандартного дистрибутива <span class="productname">PostgreSQL</span>. (Чтобы узнать имя этого каталога, можно выполнить <code class="literal">pg_config --pkglibdir</code>.) Например: </p><pre class="programlisting">dynamic_library_path = '/usr/local/lib/postgresql:/home/my_project/lib:$libdir'</pre><p> Или в среде Windows: </p><pre class="programlisting">dynamic_library_path = 'C:\tools\postgresql;H:\my_project\lib;$libdir'</pre><p>Значение по умолчанию этого параметра — <code class="literal">'$libdir'</code>. Если его значение — пустая строка, автоматический поиск по заданному пути отключается.</p><p>Суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр в процессе работы сервера, но такое изменение будет действовать только до завершения клиентского соединения, так что этот вариант следует оставить для целей разработки. Для других целей этот параметр рекомендуется устанавливать в файле конфигурации <code class="filename">postgresql.conf</code>.</p></dd><dt id="GUC-GIN-FUZZY-SEARCH-LIMIT"><span class="term"><code class="varname">gin_fuzzy_search_limit</code> (<code class="type">integer</code>) <a id="id-1.6.7.14.5.2.2.1.3" class="indexterm"></a></span> <a href="#GUC-GIN-FUZZY-SEARCH-LIMIT" class="id_link">#</a></dt><dd><p>Задаёт мягкий верхний лимит для размера набора, возвращаемого при сканировании индексов GIN. За дополнительными сведениями обратитесь к <a class="xref" href="gin-tips.html" title="70.5. Приёмы и советы по применению GIN">Разделу 70.5</a>.</p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-autovacuum.html" title="20.10. Автоматическая очистка">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-locks.html" title="20.12. Управление блокировками">След.</a></td></tr><tr><td width="40%" align="left" valign="top">20.10. Автоматическая очистка </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 20.12. Управление блокировками</td></tr></table></div></body></html>