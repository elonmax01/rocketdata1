<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE SUBSCRIPTION</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-createstatistics.html" title="CREATE STATISTICS" /><link rel="next" href="sql-createtable.html" title="CREATE TABLE" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">CREATE SUBSCRIPTION</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-createstatistics.html" title="CREATE STATISTICS">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-createtable.html" title="CREATE TABLE">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-CREATESUBSCRIPTION"><div class="titlepage"></div><a id="id-1.9.3.84.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">CREATE SUBSCRIPTION</span></h2><p>CREATE SUBSCRIPTION — создать подписку</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">CREATE SUBSCRIPTION <em class="replaceable"><code>имя_подписки</code></em>
    CONNECTION '<em class="replaceable"><code>строка_подключения</code></em>'
    PUBLICATION <em class="replaceable"><code>имя_публикации</code></em> [, ...]
    [ WITH ( <em class="replaceable"><code>параметр_подписки</code></em> [= <em class="replaceable"><code>значение</code></em>] [, ... ] ) ]</pre></div><div class="refsect1" id="id-1.9.3.84.5"><h2>Описание</h2><p><code class="command">CREATE SUBSCRIPTION</code> создаёт подписку логической репликации. Пользователь, создающий подписку, становится её владельцем. Имя подписки должно отличаться от имён других существующих подписок в текущей базе.</p><p>Подписка представляет собой реплицирующее подключение к публикующему серверу. Поэтому данная команда не только добавляет определения подписки в локальные каталоги, но также создаёт слот репликации на удалённом сервере.</p><p>В момент фиксации транзакции, в рамках которой выполняется эта команда, будет запущен рабочий процесс логической репликации, если подписка создаётся не в отключённом состоянии.</p><p>Чтобы создать подписку, необходимо иметь права роли <code class="literal">pg_create_subscription</code>, а также право <code class="literal">CREATE</code> в текущей базе данных.</p><p>Дополнительные сведения о подписках и логической репликации в целом можно найти в <a class="xref" href="logical-replication-subscription.html" title="31.2. Подписка">Разделе 31.2</a> и <a class="xref" href="logical-replication.html" title="Глава 31. Логическая репликация">Главе 31</a>.</p></div><div class="refsect1" id="id-1.9.3.84.6"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt id="SQL-CREATESUBSCRIPTION-NAME"><span class="term"><em class="replaceable"><code>имя_подписки</code></em></span> <a href="#SQL-CREATESUBSCRIPTION-NAME" class="id_link">#</a></dt><dd><p>Имя новой подписки.</p></dd><dt id="SQL-CREATESUBSCRIPTION-CONNECTION"><span class="term"><code class="literal">CONNECTION '<em class="replaceable"><code>строка_подключения</code></em>'</code></span> <a href="#SQL-CREATESUBSCRIPTION-CONNECTION" class="id_link">#</a></dt><dd><p>Строка подключения <span class="application">libpq</span>, определяющая, как подключаться к базе данных публикации. За подробностями обратитесь к <a class="xref" href="libpq-connect.html#LIBPQ-CONNSTRING" title="34.1.1. Строки параметров подключения">Подразделу 34.1.1</a>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-PUBLICATION"><span class="term"><code class="literal">PUBLICATION <em class="replaceable"><code>имя_публикации</code></em> [, ...]</code></span> <a href="#SQL-CREATESUBSCRIPTION-PUBLICATION" class="id_link">#</a></dt><dd><p>Имена публикаций на публикующем сервере, на которые оформляется подписка.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH"><span class="term"><code class="literal">WITH ( <em class="replaceable"><code>параметр_подписки</code></em> [= <em class="replaceable"><code>значение</code></em>] [, ... ] )</code></span> <a href="#SQL-CREATESUBSCRIPTION-WITH" class="id_link">#</a></dt><dd><p>В этом предложении задаются необязательные параметры подписки.</p><p>Следующие параметры определяют, как будет создаваться подписка: </p><div class="variablelist"><dl class="variablelist"><dt id="SQL-CREATESUBSCRIPTION-WITH-CONNECT"><span class="term"><code class="literal">connect</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-CONNECT" class="id_link">#</a></dt><dd><p>Определяет, нужно ли при выполнении <code class="command">CREATE SUBSCRIPTION</code> подключаться к публикующему серверу. Значение по умолчанию — <code class="literal">true</code>. Если равняется <code class="literal">false</code>, параметры <code class="literal">create_slot</code>, <code class="literal">enabled</code> и <code class="literal">copy_data</code> тоже принимают значение <code class="literal">false</code>. (Значение <code class="literal">false</code> параметра <code class="literal">connect</code> несовместимо со значением <code class="literal">true</code> параметров <code class="literal">create_slot</code>, <code class="literal">enabled</code> и <code class="literal">copy_data</code>.)</p><p>Так как со значением <code class="literal">false</code> соединение не устанавливается, подписка на таблицы не оформляется. Чтобы начать репликацию, потребуется вручную создать слот репликации, включить подписку и обновить её. Примеры можно найти в <a class="xref" href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES-DEFERRED-SLOT" title="31.2.3. Примеры: создание слота отложенной репликации">Подразделе 31.2.3</a></p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-CREATE-SLOT"><span class="term"><code class="literal">create_slot</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-CREATE-SLOT" class="id_link">#</a></dt><dd><p>Определяет, должна ли команда создавать слот репликации на публикующем сервере. Значение по умолчанию — <code class="literal">true</code>.</p><p>При значении <code class="literal">false</code> потребуется создать слот на публикующем сервере другим способом. Примеры можно найти в <a class="xref" href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES-DEFERRED-SLOT" title="31.2.3. Примеры: создание слота отложенной репликации">Подразделе 31.2.3</a>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-ENABLED"><span class="term"><code class="literal">enabled</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-ENABLED" class="id_link">#</a></dt><dd><p>Определяет, активировать ли репликацию в подписке, или её нужно только настроить, но не запускать сразу. Значение по умолчанию — <code class="literal">true</code>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-SLOT-NAME"><span class="term"><code class="literal">slot_name</code> (<code class="type">string</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-SLOT-NAME" class="id_link">#</a></dt><dd><p>Имя слота репликации на публикующем сервере, которое должно использоваться. По умолчанию в качестве имени слота используется имя подписки.</p><p>Когда в качестве <code class="literal">slot_name</code> задаётся <code class="literal">NONE</code>, с подпиской не будет связан слот репликации. У таких подписок также должны быть равны <code class="literal">false</code> свойства <code class="literal">enabled</code> и <code class="literal">create_slot</code>. Используйте это значение, если будете создавать слот репликации позднее вручную. Примеры можно найти в <a class="xref" href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES-DEFERRED-SLOT" title="31.2.3. Примеры: создание слота отложенной репликации">Подразделе 31.2.3</a>.</p></dd></dl></div><p>Следующие параметры управляют поведением репликации подписки после её создания: </p><div class="variablelist"><dl class="variablelist"><dt id="SQL-CREATESUBSCRIPTION-WITH-BINARY"><span class="term"><code class="literal">binary</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-BINARY" class="id_link">#</a></dt><dd><p>Определяет, будет ли для данной подписки запрашиваться передача данных в двоичном (а не в текстовом) виде. Значение по умолчанию — <code class="literal">false</code>. Данные для начальной синхронизации таблиц копируются (см. <code class="literal">copy_data</code>) в том же формате. Двоичный формат может обрабатываться быстрее, чем текстовый, но он может оказаться непереносимым между разными машинными архитектурами и версиями <span class="productname">PostgreSQL</span>. Кроме того, двоичный формат сильно зависит от типов данных: например, он не позволяет копировать данные из столбца с типом <code class="type">smallint</code> в <code class="type">integer</code>, хотя с текстовым форматом это вполне возможно. Даже если этот параметр включён, в двоичном виде будут передаваться только те типы данных, для которых определены функции двоичного получения/отправки. Обратите внимание, что для начальной синхронизации требуется, чтобы для всех типов данных были определены функции двоичного получения/отправки, в противном случае синхронизация прервётся ошибкой (более подробно функции получения/отправки описаны в <a class="xref" href="sql-createtype.html" title="CREATE TYPE"><span class="refentrytitle">CREATE TYPE</span></a>).</p><p>При репликации между серверами разных версий возможна ситуация, когда для некоторого типа на стороне публикации будет определена функция двоичной отправки, а на стороне подписки не будет соответствующей функции двоичного получения. В такой ситуации передача данных будет невозможна, и параметр <code class="literal">binary</code> использовать нельзя.</p><p>Если версия публикующего сервера ниже <span class="productname">PostgreSQL</span> 16, данные для начальной синхронизации таблиц будут передаваться в текстовом формате, даже если задать <code class="literal">binary = true</code>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-COPY-DATA"><span class="term"><code class="literal">copy_data</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-COPY-DATA" class="id_link">#</a></dt><dd><p>Определяет, должны ли копироваться уже существующие данные в публикациях, на которые оформляется подписка, сразу после начала репликации. Значение по умолчанию — <code class="literal">true</code>.</p><p>Предложения <code class="literal">WHERE</code>, содержащиеся в публикациях, влияют на то, какие данные будут скопированы. За подробностями обратитесь к <a class="xref" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-NOTES" title="Замечания">Замечания</a>.</p><p>В <a class="xref" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-NOTES" title="Замечания">Замечания</a> описано поведение при копировании данных (<code class="literal">copy_data = true</code>) с параметром <a class="link" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-WITH-ORIGIN"><code class="literal">origin</code></a>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-STREAMING"><span class="term"><code class="literal">streaming</code> (<code class="type">enum</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-STREAMING" class="id_link">#</a></dt><dd><p>Определяет, включать ли для данной подписки передачу изменений ещё выполняющихся транзакций. Значение по умолчанию — <code class="literal">off</code>, то есть каждая транзакция сначала целиком декодируется на стороне публикации и только затем передаётся подписчику как единое целое.</p><p>Если этот параметр включён (<code class="literal">on</code>), поступающие изменения записываются во временные файлы и применяются после фиксирования транзакции на публикующем сервере и получения данных подписчиком.</p><p>Если задано значение <code class="literal">parallel</code>, доступный параллельный рабочий процесс применяет поступающие изменения напрямую. Если нет свободного параллельного рабочего процесса для применения изменений передаваемых в потоке транзакций, изменения записываются во временные файлы и применяются после фиксирования транзакции. Обратите внимание, что в случае сбоя параллельного рабочего процесса LSN завершения удалённой транзакции может быть не записан в журнал сервера.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-SYNCHRONOUS-COMMIT"><span class="term"><code class="literal">synchronous_commit</code> (<code class="type">enum</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-SYNCHRONOUS-COMMIT" class="id_link">#</a></dt><dd><p>Значение этого параметра переопределяет свойство <a class="xref" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT">synchronous_commit</a> для рабочих процессов, применяющих изменения данной подписки. По умолчанию — <code class="literal">off</code>.</p><p>Значение <code class="literal">off</code> безопасно для логической репликации: если подписчик потеряет транзакции из-за нарушения синхронизации, данные будут повторно переданы с публикующего сервера.</p><p>При выполнении синхронной логической репликации может быть уместно другое значение. Рабочие процессы логической репликации передают позиции записанных и сохранённых на диске данных публикующему серверу, так что при синхронной репликации он будет ждать завершения сохранения. Это значит, что значение <code class="literal">off</code> параметра <code class="literal">synchronous_commit</code> на подписчике может увеличить задержку при выполнении <code class="command">COMMIT</code> на сервере публикации. При таком сценарии может быть выгоднее задать для <code class="literal">synchronous_commit</code> значение <code class="literal">local</code> или выше.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-TWO-PHASE"><span class="term"><code class="literal">two_phase</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-TWO-PHASE" class="id_link">#</a></dt><dd><p>Определяет, включается ли двухфазная фиксация для этой подписки. Значение по умолчанию — <code class="literal">false</code>.</p><p>Когда двухфазная фиксация включена, подготовленные транзакции отправляются подписчику во время <code class="command">PREPARE TRANSACTION</code> и также обрабатываются подписчиком как двухфазные транзакции. В противном случае подготовленные транзакции отправляются подписчику только после фиксации, а затем немедленно обрабатываются подписчиком.</p><p>Реализация двухфазной фиксации требует, чтобы процедура репликации успешно завершила начальную фазу синхронизации таблиц. Таким образом, даже если для подписки включён параметр <code class="literal">two_phase</code>, внутренним состоянием двухфазной фиксации временно остаётся <span class="quote">«<span class="quote">в ожидании</span>»</span>, пока не завершится фаза инициализации. Фактическое состояние двухфазной фиксации можно увидеть в столбце <code class="structfield">subtwophasestate</code> в <a class="link" href="catalog-pg-subscription.html" title="53.54. pg_subscription"><code class="structname">pg_subscription</code></a>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-DISABLE-ON-ERROR"><span class="term"><code class="literal">disable_on_error</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-DISABLE-ON-ERROR" class="id_link">#</a></dt><dd><p>Определяет, следует ли автоматически отключать подписку, если рабочие процессы подписчика обнаружат какие-либо ошибки при репликации данных публикации. Значение по умолчанию — <code class="literal">false</code>.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-PASSWORD-REQUIRED"><span class="term"><code class="literal">password_required</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-PASSWORD-REQUIRED" class="id_link">#</a></dt><dd><p>Если задано значение <code class="literal">true</code>, подключения к публикующему серверу, создаваемые в результате подписки, должны требовать аутентификации по паролю, при этом пароль должен указываться как часть строки подключения. Этот параметр игнорируется, если владельцем подписки является суперпользователь. Значение по умолчанию — <code class="literal">true</code>. Задать значение <code class="literal">false</code> могут только суперпользователи.</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-RUN-AS-OWNER"><span class="term"><code class="literal">run_as_owner</code> (<code class="type">boolean</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-RUN-AS-OWNER" class="id_link">#</a></dt><dd><p>Если true, все действия репликации выполняются от имени владельца подписки. Если false (по умолчанию), рабочие процессы репликации выполняют операции с таблицами от имени владельца таблицы, что в целом намного более безопасно (за подробностями обратитесь к <a class="xref" href="logical-replication-security.html" title="31.9. Безопасность">Разделу 31.9</a>).</p></dd><dt id="SQL-CREATESUBSCRIPTION-WITH-ORIGIN"><span class="term"><code class="literal">origin</code> (<code class="type">string</code>)</span> <a href="#SQL-CREATESUBSCRIPTION-WITH-ORIGIN" class="id_link">#</a></dt><dd><p>Определяет, будет ли для данной подписки запрашиваться передача изменений, не отмеченных источником репликации, или всех изменений независимо от источника. Если задать для <code class="literal">origin</code> значение <code class="literal">none</code>, для подписки будет запрашиваться передача изменений, не отмеченных источником репликации. Если задать для <code class="literal">origin</code> значение <code class="literal">any</code>, публикующий сервер отправляет все изменения независимо от их источника. По умолчанию — <code class="literal">any</code>.</p><p>В <a class="xref" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-NOTES" title="Замечания">Замечания</a> описано поведение при копировании данных (<code class="literal">copy_data = true</code>) с параметром <a class="link" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-WITH-ORIGIN"><code class="literal">origin</code></a>.</p></dd></dl></div></dd></dl></div><p>Если для параметра типа <code class="type">boolean</code> опустить <code class="literal">=</code> <em class="replaceable"><code>значение</code></em>, это равнозначно указанию значения <code class="literal">TRUE</code>.</p></div><div class="refsect1" id="SQL-CREATESUBSCRIPTION-NOTES"><h2>Замечания</h2><p>Подробнее о том, как организовать управление доступом подписчиков к публикующему серверу, рассказывается в <a class="xref" href="logical-replication-security.html" title="31.9. Безопасность">Разделе 31.9</a>.</p><p>При создании слота репликации (поведение по умолчанию) <code class="command">CREATE SUBSCRIPTION</code> нельзя выполнять внутри блока транзакции.</p><p>Создание подписки с подключением к тому же кластеру баз данных (например, для организации репликации между базами данных в одном кластере или в одной базе данных) будет успешным, только если слот репликации не создаётся той же командой. В противном случае команда <code class="command">CREATE SUBSCRIPTION</code> зависнет. Чтобы оформить такую подписку, слот репликации нужно создать отдельно (воспользовавшись функцией <code class="function">pg_create_logical_replication_slot</code> и передав ей имя модуля <code class="literal">pgoutput</code>) и создать подписку с параметром <code class="literal">create_slot = false</code>. Примеры можно найти в <a class="xref" href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES-DEFERRED-SLOT" title="31.2.3. Примеры: создание слота отложенной репликации">Подразделе 31.2.3</a>. Это ограничение реализации может быть устранено в будущем выпуске.</p><p>Если для какой-либо таблицы в публикации указано предложение <code class="literal">WHERE</code>, строки, для которых <em class="replaceable"><code>выражение</code></em> выдаёт значение false или null, не будут публиковаться. Когда в подписке есть несколько публикаций, в которых одна и та же таблица опубликована с разными предложениями <code class="literal">WHERE</code>, строка будет опубликована, если выполняется любое из выражений (относящееся к этой операции публикации). В случае неодинаковых предложений <code class="literal">WHERE</code>, если в одной из публикаций нет предложения <code class="literal">WHERE</code> (относящегося к этой операции публикации) или публикация объявлена ​​как <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-ALL-TABLES"><code class="literal">FOR ALL TABLES</code></a> или <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-TABLES-IN-SCHEMA"><code class="literal">FOR TABLES IN SCHEMA</code></a>, строки всегда публикуются независимо от определения других выражений. Если на стороне подписчика используется версия <span class="productname">PostgreSQL</span> ниже 15, на этапе начальной синхронизации данных все фильтры строк игнорируются. В этом случае следует рассмотреть возможность удалить все изначально скопированные данные, которые будут несовместимы с фильтрами впоследствии. Так как при первоначальной синхронизации данных параметр публикации <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-WITH-PUBLISH"><code class="literal">publish</code></a> не учитывается, при копировании существующих данных могут быть скопированы строки, которые не были бы реплицированы при выполнении операций DML. Примеры приведены в <a class="xref" href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES" title="31.2.2. Примеры: настройка логической репликации">Подразделе 31.2.2</a>.</p><p>Создать подписки, связанные с несколькими публикациями, в которых одна и та же таблица опубликована с разными списками столбцов, нельзя.</p><p>При создании подписок допускается указание несуществующих публикаций, что позволяет создавать нужные публикации позже. Таким образом, в <a class="link" href="catalog-pg-subscription.html" title="53.54. pg_subscription"><code class="structname">pg_subscription</code></a> могут фигурировать несуществующие публикации.</p><p>Когда для подписки заданы параметры <code class="literal">copy_data = true</code> и <code class="literal">origin = NONE</code>, данные для начальной синхронизации копируются напрямую с публикующего сервера, то есть исходный источник данных определить невозможно. Если публикующий сервер сам является подписчиком, копируемые данные могли быть получены из другого источника. При выявлении такой ситуации пользователю выдаётся предупреждение, которое только указывает на возможную проблему, — пользователю необходимо самостоятельно убедиться в необходимости копировать данные из третьего источника.</p><p>Чтобы найти таблицы, данные в которых могли быть получены из третьего источника (из-за подписок на публикующем сервере), воспользуйтесь таким SQL-запросом: </p><pre class="programlisting"># замените &lt;pub-names&gt; именами подписок для запроса
SELECT DISTINCT PT.schemaname, PT.tablename
FROM pg_publication_tables PT,
     pg_subscription_rel PS
     JOIN pg_class C ON (C.oid = PS.srrelid)
     JOIN pg_namespace N ON (N.oid = C.relnamespace)
WHERE N.nspname = PT.schemaname AND
      C.relname = PT.tablename AND
      PT.pubname IN (&lt;pub-names&gt;);</pre></div><div class="refsect1" id="id-1.9.3.84.8"><h2>Примеры</h2><p>Создание подписки на репликации <code class="literal">mypublication</code> и <code class="literal">insert_only</code> на удалённом сервере с немедленным запуском репликации при фиксировании транзакции: </p><pre class="programlisting">CREATE SUBSCRIPTION mysub
         CONNECTION 'host=192.168.1.50 port=5432 user=foo dbname=foodb'
        PUBLICATION mypublication, insert_only;</pre><p>Создание подписки на публикацию <code class="literal">insert_only</code> на удалённом сервере с отключением репликации для запуска в будущем. </p><pre class="programlisting">CREATE SUBSCRIPTION mysub
         CONNECTION 'host=192.168.1.50 port=5432 user=foo dbname=foodb'
        PUBLICATION insert_only
               WITH (enabled = false);</pre></div><div class="refsect1" id="id-1.9.3.84.9"><h2>Совместимость</h2><p><code class="command">CREATE SUBSCRIPTION</code> является расширением <span class="productname">PostgreSQL</span>.</p></div><div class="refsect1" id="id-1.9.3.84.10"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-altersubscription.html" title="ALTER SUBSCRIPTION"><span class="refentrytitle">ALTER SUBSCRIPTION</span></a>, <a class="xref" href="sql-dropsubscription.html" title="DROP SUBSCRIPTION"><span class="refentrytitle">DROP SUBSCRIPTION</span></a>, <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>, <a class="xref" href="sql-alterpublication.html" title="ALTER PUBLICATION"><span class="refentrytitle">ALTER PUBLICATION</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-createstatistics.html" title="CREATE STATISTICS">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-createtable.html" title="CREATE TABLE">След.</a></td></tr><tr><td width="40%" align="left" valign="top">CREATE STATISTICS </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> CREATE TABLE</td></tr></table></div></body></html>