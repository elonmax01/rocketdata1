<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Глава 31. Логическая репликация</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="wal-internals.html" title="30.6. Внутреннее устройство WAL" /><link rel="next" href="logical-replication-publication.html" title="31.1. Публикация" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">Глава 31. Логическая репликация</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="wal-internals.html" title="30.6. Внутреннее устройство WAL">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="admin.html" title="Часть III. Администрирование сервера">Наверх</a></td><th width="60%" align="center">Часть III. Администрирование сервера</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="logical-replication-publication.html" title="31.1. Публикация">След.</a></td></tr></table><hr /></div><div class="chapter" id="LOGICAL-REPLICATION"><div class="titlepage"><div><div><h2 class="title">Глава 31. Логическая репликация</h2></div></div></div><div class="toc"><p><strong>Содержание</strong></p><dl class="toc"><dt><span class="sect1"><a href="logical-replication-publication.html">31.1. Публикация</a></span></dt><dt><span class="sect1"><a href="logical-replication-subscription.html">31.2. Подписка</a></span></dt><dd><dl><dt><span class="sect2"><a href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-SLOT">31.2.1. Управление слотами репликации</a></span></dt><dt><span class="sect2"><a href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES">31.2.2. Примеры: настройка логической репликации</a></span></dt><dt><span class="sect2"><a href="logical-replication-subscription.html#LOGICAL-REPLICATION-SUBSCRIPTION-EXAMPLES-DEFERRED-SLOT">31.2.3. Примеры: создание слота отложенной репликации</a></span></dt></dl></dd><dt><span class="sect1"><a href="logical-replication-row-filter.html">31.3. Фильтры строк</a></span></dt><dd><dl><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-RULES">31.3.1. Правила фильтров строк</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-RESTRICTIONS">31.3.2. Ограничения выражений</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-TRANSFORMATIONS">31.3.3. Преобразования UPDATE</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-PARTITIONED-TABLE">31.3.4. Секционированные таблицы</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-INITIAL-DATA-SYNC">31.3.5. Начальная синхронизация данных</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-COMBINING">31.3.6. Объединение нескольких фильтров строк</a></span></dt><dt><span class="sect2"><a href="logical-replication-row-filter.html#LOGICAL-REPLICATION-ROW-FILTER-EXAMPLES">31.3.7. Примеры</a></span></dt></dl></dd><dt><span class="sect1"><a href="logical-replication-col-lists.html">31.4. Списки столбцов</a></span></dt><dt><span class="sect1"><a href="logical-replication-conflicts.html">31.5. Конфликты</a></span></dt><dt><span class="sect1"><a href="logical-replication-restrictions.html">31.6. Ограничения</a></span></dt><dt><span class="sect1"><a href="logical-replication-architecture.html">31.7. Архитектура</a></span></dt><dt><span class="sect1"><a href="logical-replication-monitoring.html">31.8. Мониторинг</a></span></dt><dt><span class="sect1"><a href="logical-replication-security.html">31.9. Безопасность</a></span></dt><dt><span class="sect1"><a href="logical-replication-config.html">31.10. Параметры конфигурации</a></span></dt><dd><dl><dt><span class="sect2"><a href="logical-replication-config.html#LOGICAL-REPLICATION-CONFIG-PUBLISHER">31.10.1. Публикующие серверы</a></span></dt><dt><span class="sect2"><a href="logical-replication-config.html#LOGICAL-REPLICATION-CONFIG-SUBSCRIBER">31.10.2. Подписчики</a></span></dt></dl></dd><dt><span class="sect1"><a href="logical-replication-quick-setup.html">31.11. Быстрая настройка</a></span></dt></dl></div><p>Логическая репликация — это метод репликации объектов данных и изменений в них, использующий репликационные идентификаторы (обычно это первичный ключ). Мы называем такую репликацию «логической», в отличие от физической, которая построена на точных адресах блоков и побайтовом копировании. PostgreSQL поддерживает оба механизма одновременно; см. <a class="xref" href="high-availability.html" title="Глава 27. Отказоустойчивость, балансировка нагрузки и репликация">Главу 27</a>. Логическая репликация позволяет более детально управлять репликацией данных и аспектами безопасности.</p><p>В логической репликации используется модель <em class="firstterm">публикаций</em>/<em class="firstterm">подписок</em> с одним или несколькими <em class="firstterm">подписчиками</em>, которые подписываются на одну или несколько <em class="firstterm">публикаций</em> на <em class="firstterm">публикующем</em> узле. Подписчики получают данные из публикаций, на которые они подписаны, и могут затем повторно опубликовать данные для организации каскадной репликации или более сложных конфигураций.</p><p>Логическая репликация таблицы обычно начинается с создания снимка данных в публикуемой базе данных и копирования её подписчику. После этого изменения на стороне публикации передаются подписчику в реальном времени, когда они происходят. Подписчик применяет изменения в том же порядке, что и узел публикации, так что для публикаций в рамках одной подписки гарантируется транзакционная целостность. Этот метод репликации данных иногда называется транзакционной репликацией.</p><p>Типичные сценарии использования логической репликации: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Передача подписчикам инкрементальных изменений в одной базе данных или подмножестве базы данных, когда они происходят.</p></li><li class="listitem"><p>Срабатывание триггеров для отдельных изменений, когда их получает подписчик.</p></li><li class="listitem"><p>Объединение нескольких баз данных в одну (например, для целей анализа).</p></li><li class="listitem"><p>Репликация между разными основными версиями PostgreSQL.</p></li><li class="listitem"><p>Репликация между экземплярами PostgreSQL на разных платформах (например, с Linux на Windows)</p></li><li class="listitem"><p>Предоставление доступа к реплицированным данным другим группам пользователей.</p></li><li class="listitem"><p>Разделение подмножества базы данных между несколькими базами данных.</p></li></ul></div><p>База данных подписчика функционирует так же, как и любой другой экземпляр базы PostgreSQL, и может стать публикующей, если создать публикации в ней. Когда подписчик действует как исключительно читающее приложение, никаких конфликтов с одной подпиской не будет. Но они могут возникнуть, если в тот же набор таблиц производят запись какие-либо приложения или другие подписчики.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="wal-internals.html" title="30.6. Внутреннее устройство WAL">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="admin.html" title="Часть III. Администрирование сервера">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="logical-replication-publication.html" title="31.1. Публикация">След.</a></td></tr><tr><td width="40%" align="left" valign="top">30.6. Внутреннее устройство WAL </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 31.1. Публикация</td></tr></table></div></body></html>