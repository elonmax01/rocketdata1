<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>pg_ctl</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="app-pgcontroldata.html" title="pg_controldata" /><link rel="next" href="app-pgresetwal.html" title="pg_resetwal" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span class="application">pg_ctl</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-pgcontroldata.html" title="pg_controldata">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-server.html" title="Серверные приложения PostgreSQL">Наверх</a></td><th width="60%" align="center">Серверные приложения PostgreSQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="app-pgresetwal.html" title="pg_resetwal">След.</a></td></tr></table><hr /></div><div class="refentry" id="APP-PG-CTL"><div class="titlepage"></div><a id="id-1.9.5.7.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">pg_ctl</span></span></h2><p>pg_ctl — инициализировать, запустить, остановить или управлять сервером <span class="productname">PostgreSQL</span></p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><div class="cmdsynopsis"><p id="id-1.9.5.7.4.1"><code class="command">pg_ctl</code>  <code class="option">init[db]</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-s</code>] [<code class="option">-o</code> <em class="replaceable"><code>параметры-initdb</code></em>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.2"><code class="command">pg_ctl</code>  <code class="option">start</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-l</code> <em class="replaceable"><code>имя_файла</code></em>] [<code class="option">-W</code>] [<code class="option">-t</code> <em class="replaceable"><code>секунды</code></em>] [<code class="option">-s</code>] [<code class="option">-o</code> <em class="replaceable"><code>параметры</code></em>] [<code class="option">-p</code> <em class="replaceable"><code>путь</code></em>] [<code class="option">-c</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.3"><code class="command">pg_ctl</code>  <code class="option">stop</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-m</code>
        <code class="option">s[mart]</code>  |   <code class="option">f[ast]</code>  |   <code class="option">i[mmediate]</code>  
   ] [<code class="option">-W</code>] [<code class="option">-t</code> <em class="replaceable"><code>секунды</code></em>] [<code class="option">-s</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.4"><code class="command">pg_ctl</code>  <code class="option">restart</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-m</code>
        <code class="option">s[mart]</code>  |   <code class="option">f[ast]</code>  |   <code class="option">i[mmediate]</code>  
   ] [<code class="option">-W</code>] [<code class="option">-t</code> <em class="replaceable"><code>секунды</code></em>] [<code class="option">-s</code>] [<code class="option">-o</code> <em class="replaceable"><code>параметры</code></em>] [<code class="option">-c</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.5"><code class="command">pg_ctl</code>  <code class="option">reload</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-s</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.6"><code class="command">pg_ctl</code>  <code class="option">status</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.7"><code class="command">pg_ctl</code>  <code class="option">promote</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-W</code>] [<code class="option">-t</code> <em class="replaceable"><code>секунды</code></em>] [<code class="option">-s</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.8"><code class="command">pg_ctl</code>  <code class="option">logrotate</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-s</code>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.9"><code class="command">pg_ctl</code>  <code class="option">kill</code>   <em class="replaceable"><code>имя_сигнала</code></em>   <em class="replaceable"><code>ид_процесса</code></em> </p></div><p>В системах Microsoft Windows также:</p><div class="cmdsynopsis"><p id="id-1.9.5.7.4.11"><code class="command">pg_ctl</code>  <code class="option">register</code>  [<code class="option">-D</code> <em class="replaceable"><code>каталог_данных</code></em>] [<code class="option">-N</code> <em class="replaceable"><code>имя_службы</code></em>] [<code class="option">-U</code> <em class="replaceable"><code>имя_пользователя</code></em>] [<code class="option">-P</code> <em class="replaceable"><code>пароль</code></em>] [<code class="option">-S</code>
        <code class="option">a[uto]</code>  |   <code class="option">d[emand]</code>  
   ] [<code class="option">-e</code> <em class="replaceable"><code>source</code></em>] [<code class="option">-W</code>] [<code class="option">-t</code> <em class="replaceable"><code>секунды</code></em>] [<code class="option">-s</code>] [<code class="option">-o</code> <em class="replaceable"><code>параметры</code></em>]</p></div><div class="cmdsynopsis"><p id="id-1.9.5.7.4.12"><code class="command">pg_ctl</code>  <code class="option">unregister</code>  [<code class="option">-N</code> <em class="replaceable"><code>имя_службы</code></em>]</p></div></div><div class="refsect1" id="APP-PG-CTL-DESCRIPTION"><h2>Описание</h2><p><span class="application">pg_ctl</span> — это утилита для начальной инициализации, запуска, остановки, повторного запуска и управления кластером баз данных <span class="productname">PostgreSQL</span> (<a class="xref" href="app-postgres.html" title="postgres"><span class="refentrytitle"><span class="application">postgres</span></span></a>). Сервер можно стартовать в ручном режиме, но <span class="application">pg_ctl</span> реализует задачи направления вывода в журнал и отсоединения от терминала и группы процессов, а также предоставляет удобный интерфейс остановки кластера.</p><p>Команда <code class="option">init</code> (<code class="option">initdb</code>) создаёт кластер баз данных <span class="productname">PostgreSQL</span>, то есть коллекцию баз данных, которой будет управлять один экземпляр сервера. Эта команда вызывает программу <code class="command">initdb</code>. За подробностями обратитесь к <a class="xref" href="app-initdb.html" title="initdb"><span class="refentrytitle"><span class="application">initdb</span></span></a>.</p><p>Команда <code class="option">start</code> запускает сервер. Процесс запускается в фоне, а стандартный ввод связывается с <code class="filename">/dev/null</code> (или <code class="literal">nul</code> в Windows). По умолчанию в Unix-подобных системах вывод и ошибки сервера пишутся в устройство стандартного вывода (не ошибок) <span class="application">pg_ctl</span>. Вывод <span class="application">pg_ctl</span> следует перенаправить в файл или процесс, например, приложение ротации журналов <span class="application">rotatelogs</span>; иначе <code class="command">postgres</code> будет писать вывод в управляющий терминал (в фоновом режиме) и останется в группе процессов оболочки. В Windows сообщения и ошибки сервера по умолчанию перенаправляются в терминал. Это поведение по умолчанию можно изменить и направить вывод сервера в файл, добавив ключ <code class="option">-l</code>. Предпочтительными вариантами является использование <code class="option">-l</code> или перенаправление вывода.</p><p>Команда <code class="option">stop</code> останавливает сервер, работающий с указанным каталогом данных. Параметр <code class="option">-m</code> позволяет выбрать один из трёх режимов остановки. Режим <span class="quote">«<span class="quote">Smart</span>»</span> запрещает новые подключения, а затем ожидает отключения всех существующих клиентов. Если сервер работает в режиме горячего резерва, восстановление и потоковая репликация будут прерваны, как только отключатся все клиенты. Режим <span class="quote">«<span class="quote">Fast</span>»</span> (выбираемый по умолчанию) не ожидает отключения клиентов. Все активные транзакции откатываются, а клиенты принудительно отключаются, после чего сервер останавливается. Режим <span class="quote">«<span class="quote">Immediate</span>»</span> незамедлительно прерывает все серверные процессы, не выполняя процедуру штатной остановки. Этот вариант влечёт необходимость выполнить восстановление после сбоя при следующем запуске сервера.</p><p>Команда <code class="option">restart</code> по сути производит остановку и последующий запуск сервера. Это позволяет изменить параметры командной строки <code class="command">postgres</code> либо применить изменения в файле конфигурации, не вступающие в силу без перезапуска сервера. Если в командной строке при запуске сервера указывались относительные пути, команда <code class="option">restart</code> может не выполниться, если вызвать <span class="application">pg_ctl</span> не в том каталоге, где производился предыдущий запуск.</p><p>Команда <code class="option">reload</code> просто посылает процессу сервера <code class="command">postgres</code> сигнал <span class="systemitem">SIGHUP</span>, получив который он перечитывает свои файлы конфигурации (<code class="filename">postgresql.conf</code>, <code class="filename">pg_hba.conf</code> и т. д.). Это позволяет применить изменения параметров в файле конфигурации, не требующие полного перезапуска сервера.</p><p>Команда <code class="option">status</code> проверяет, работает ли сервер в указанном каталоге данных. Если да, она выдаёт <acronym class="acronym">PID</acronym> сервера и параметры командной строки, с которыми он был запущен. Если сервер не работает, <span class="application">pg_ctl</span> возвращает код завершения 3. Если в параметрах не указан доступный каталог данных, <span class="application">pg_ctl</span> возвращает код завершения 4.</p><p>Команда <code class="option">promote</code> указывает серверу, работающему в режиме резерва с указанным каталогом данных, выйти из этого режима и начать операции чтения/записи.</p><p>Команда <code class="option">logrotate</code> прокручивает файл журнала сервера. Подробнее о том, как использовать это с внешними средствами прокрутки журнала, рассказывается в <a class="xref" href="logfile-maintenance.html" title="25.3. Обслуживание журнала">Разделе 25.3</a>.</p><p>Команда <code class="option">kill</code> передаёт сигнал заданному процессу. Прежде все это полезно в <span class="productname">Microsoft Windows</span>, где отсутствует встроенная команда <span class="application">kill</span>. Для получения списка имён поддерживаемых сигналов воспользуйтесь ключом <code class="literal">--help</code>.</p><p>Команда <code class="option">register</code> регистрирует сервер <span class="productname">PostgreSQL</span> в качестве системной службы в <span class="productname">Microsoft Windows</span>. Параметр <code class="option">-S</code> позволяет выбрать тип запуска службы: <span class="quote">«<span class="quote">auto</span>»</span> (запускать службу автоматически при загрузке системы) или <span class="quote">«<span class="quote">demand</span>»</span> (запускать службу по требованию).</p><p>Режим <code class="option">unregister</code> разрегистрирует системную службу в <span class="productname">Microsoft Windows</span>. Эта операция отменяет действие команды <code class="option">register</code>.</p></div><div class="refsect1" id="APP-PG-CTL-OPTIONS"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code><br /></span><span class="term"><code class="option">--core-files</code></span></dt><dd><p>Способствует сбросу дампа памяти процесса при крахе сервера на платформах, где это возможно, поднимая мягкие ограничения, задаваемые для файлов дампа. Это полезно при отладке и диагностике проблем, так как позволяет получить трассировку стека отказавшего процесса сервера.</p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>каталог_данных</code></em></code><br /></span><span class="term"><code class="option">--pgdata=<em class="replaceable"><code>каталог_данных</code></em></code></span></dt><dd><p>Указывает размещение конфигурационных файлов кластера. Если этот ключ опущен, используется значение переменной окружения <code class="envar">PGDATA</code>.</p></dd><dt><span class="term"><code class="option">-l <em class="replaceable"><code>имя_файла</code></em></code><br /></span><span class="term"><code class="option">--log=<em class="replaceable"><code>имя_файла</code></em></code></span></dt><dd><p>Направляет вывод сообщений сервера в файл <em class="replaceable"><code>имя_файла</code></em>. Файл создаётся, если он ещё не существует. При этом устанавливается <span class="systemitem">umask</span> 077, что предотвращает доступ других пользователей к этому файлу.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>режим</code></em></code><br /></span><span class="term"><code class="option">--mode=<em class="replaceable"><code>режим</code></em></code></span></dt><dd><p>Задаёт режим остановки кластера. Значением <em class="replaceable"><code>режим</code></em> может быть <code class="literal">smart</code>, <code class="literal">fast</code> или <code class="literal">immediate</code>, либо первая буква этих вариантов. Если этот ключ опущен, по умолчанию выбирается режим <code class="literal">fast</code>.</p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>параметры</code></em></code><br /></span><span class="term"><code class="option">--options=<em class="replaceable"><code>параметры</code></em></code></span></dt><dd><p>Указывает параметры, которые будут передаваться непосредственно программе <code class="command">postgres</code>. Ключ <code class="option">-o</code> можно указывать несколько раз, при этом ей будут переданы параметры из всех ключей.</p><p>Задаваемые <em class="replaceable"><code>параметры</code></em> обычно следует обрамлять одинарными или двойными кавычками, чтобы они передавались одной группой.</p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>параметры-initdb</code></em></code><br /></span><span class="term"><code class="option">--options=<em class="replaceable"><code>параметры-initdb</code></em></code></span></dt><dd><p>Указывает параметры, которые будут передаваться непосредственно программе <code class="command">initdb</code>. Ключ <code class="option">-o</code> можно указывать несколько раз, при этом ей будут переданы параметры из всех ключей.</p><p>Задаваемые <em class="replaceable"><code>параметры-initdb</code></em> обычно следует обрамлять одинарными или двойными кавычками, чтобы они передавались вместе одной группой.</p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>путь</code></em></code></span></dt><dd><p>Указывает размещение исполняемого файла <code class="filename">postgres</code>. По умолчанию задействуется исполняемый файл <code class="filename">postgres</code> из того же каталога, из которого запускался <code class="command">pg_ctl</code>, а если это невозможно, из жёстко заданного каталога инсталляции. Применять этот параметр может понадобиться, только если вы делаете что-то необычное или получаете сообщения, что найти исполняемый файл <code class="filename">postgres</code> не удаётся.</p><p>В режиме <code class="literal">init</code> этот параметр аналогичным образом задаёт размещение исполняемого файла <code class="filename">initdb</code>.</p></dd><dt><span class="term"><code class="option">-s</code><br /></span><span class="term"><code class="option">--silent</code></span></dt><dd><p>Выводить лишь ошибки, без сообщений информационного характера.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>секунды</code></em></code><br /></span><span class="term"><code class="option">--timeout=<em class="replaceable"><code>секунды</code></em></code></span></dt><dd><p>Задаёт максимальное время (в секундах) ожидания завершения операции (см. параметр <code class="option">-w</code>). По умолчанию действует значение переменной среды <code class="envar">PGCTLTIMEOUT</code> или, если оно не задано, 60 секунд.</p></dd><dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span></dt><dd><p>Выводит версию <span class="application">pg_ctl</span> и прерывает выполнение.</p></dd><dt><span class="term"><code class="option">-w</code><br /></span><span class="term"><code class="option">--wait</code></span></dt><dd><p>Ждать завершения операции. Этот режим поддерживается (и действует по умолчанию) для команд <code class="literal">start</code>, <code class="literal">stop</code>, <code class="literal">restart</code>, <code class="literal">promote</code> и <code class="literal">register</code>.</p><p>В процессе ожидания <code class="command">pg_ctl</code> постоянно проверяет <acronym class="acronym">PID</acronym>-файл сервера, приостанавливаясь на короткое время между проверками. Запуск считается завершённым, когда <acronym class="acronym">PID</acronym>-файл указывает на то, что сервер готов принимать подключения. Остановка считается завершённой, когда сервер удаляет свой <acronym class="acronym">PID</acronym>-файл. Программа <code class="command">pg_ctl</code> возвращает код завершения в зависимости от успеха запуска или остановки.</p><p>Если операция не заканчивается за отведённое время (см. параметр <code class="option">-t</code>), программа <code class="command">pg_ctl</code> завершается с ненулевым кодом выхода. Но заметьте, что при этом выполнение операции может продолжиться и в конце концов увенчаться успехом.</p></dd><dt><span class="term"><code class="option">-W</code><br /></span><span class="term"><code class="option">--no-wait</code></span></dt><dd><p>Не ждать завершения операции. Этот режим противоположен режиму <code class="option">-w</code>.</p><p>Если ожидание отключено, запрошенное действие вызывается, но о его результате ничего не известно. В этом случае для проверки текущего состояния и результата операции потребуется обратиться к файлу журнала сервера или воспользоваться внешней системой мониторинга.</p><p>В предыдущих выпусках PostgreSQL этот режим действовал по умолчанию (кроме команды <code class="literal">stop</code>).</p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p>Вывести справку по команде <span class="application">pg_ctl</span> и прервать выполнение.</p></dd></dl></div><p>Если некоторый параметр является допустимым, но не применим к выбранному режиму работы, <span class="application">pg_ctl</span> игнорирует его.</p><div class="refsect2" id="APP-PG-CTL-WINDOWS-OPTIONS"><h3>Параметры, специфичные для Windows</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-e <em class="replaceable"><code>source</code></em></code></span></dt><dd><p>Имя источника событий, с которым <span class="application">pg_ctl</span> будет записывать в системный журнал события при запуске в виде службы Windows. Имя по умолчанию — <code class="literal">PostgreSQL</code>. Заметьте, что это влияет только на сообщения, которые выдаёт сам <span class="application">pg_ctl</span>; как только сервер запустится, он будет использовать источник событий, заданный в <a class="xref" href="runtime-config-logging.html#GUC-EVENT-SOURCE">event_source</a>. Если произойдёт ошибка при запуске сервера на ранней стадии, прежде чем будет считан этот параметр, он может также выдавать сообщения с источником по умолчанию <code class="literal">PostgreSQL</code>.</p></dd><dt><span class="term"><code class="option">-N <em class="replaceable"><code>имя_службы</code></em></code></span></dt><dd><p>Имя регистрируемой системной службы. Оно станет и собственно именем службы, и отображаемым именем. По умолчанию — <code class="literal">PostgreSQL</code>.</p></dd><dt><span class="term"><code class="option">-P <em class="replaceable"><code>пароль</code></em></code></span></dt><dd><p>Пароль для пользователя, запускающего службу.</p></dd><dt><span class="term"><code class="option">-S <em class="replaceable"><code>тип-запуска</code></em></code></span></dt><dd><p>Тип запуска системной службы. В качестве значения <em class="replaceable"><code>тип-запуска</code></em> можно задать <code class="literal">auto</code>, <code class="literal">demand</code> или первую букву этих слов. По умолчанию выбирается тип <code class="literal">auto</code>.</p></dd><dt><span class="term"><code class="option">-U <em class="replaceable"><code>имя_пользователя</code></em></code></span></dt><dd><p>Имя пользователя, от имени которого будут запущена служба. Для доменных пользователей используйте формат <code class="literal">DOMAIN\username</code>.</p></dd></dl></div></div></div><div class="refsect1" id="id-1.9.5.7.7"><h2>Переменные окружения</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">PGCTLTIMEOUT</code></span></dt><dd><p>Значение по умолчанию для максимального времени ожидания запуска или остановки сервера (в секундах). По умолчанию это время составляет 60 секунд.</p></dd><dt><span class="term"><code class="envar">PGDATA</code></span></dt><dd><p>Размещение каталога хранения данных по умолчанию.</p></dd></dl></div><p>Для большинства режимов <code class="command">pg_ctl</code> требуется знать расположение каталога данных; поэтому если не задана переменная <code class="envar">PGDATA</code>, параметр <code class="option">-D</code> является обязательным.</p><p><code class="command">pg_ctl</code>, как и большинство других утилит <span class="productname">PostgreSQL</span>, также использует переменные окружения, поддерживаемые <span class="application">libpq</span> (см. <a class="xref" href="libpq-envars.html" title="34.15. Переменные окружения">Раздел 34.15</a>).</p><p>Список дополнительных переменных, влияющих на работу сервера, можно найти в <a class="xref" href="app-postgres.html" title="postgres"><span class="refentrytitle"><span class="application">postgres</span></span></a>.</p></div><div class="refsect1" id="id-1.9.5.7.8"><h2>Файлы</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">postmaster.pid</code></span></dt><dd><p>Проверяя этот файл в каталоге данных, <span class="application">pg_ctl</span> определяет, работает ли сервер в настоящий момент.</p></dd><dt><span class="term"><code class="filename">postmaster.opts</code></span></dt><dd><p>Если файл существует в каталоге хранения данных, то <span class="application">pg_ctl</span> (при <code class="option">restart</code>) передаст его содержимое в качестве аргументов <span class="application">postgres</span>, если не указаны иные значения в <code class="option">-o</code>. Содержимое файла также отображается при вызове в режиме <code class="option">status</code>.</p></dd></dl></div></div><div class="refsect1" id="R1-APP-PGCTL-2"><h2>Примеры</h2><div class="refsect2" id="R2-APP-PGCTL-3"><h3>Запуск сервера</h3><p>Запуск сервера и ожидание момента, когда он начнёт принимать подключения: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl start</code></strong>
</pre><p>Чтобы запустить сервер с использованием порта 5433 и без <code class="function">fsync</code>, выполните: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl -o "-F -p 5433" start</code></strong>
</pre></div><div class="refsect2" id="R2-APP-PGCTL-4"><h3>Остановка сервера</h3><p>Чтобы остановить сервер, выполните: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl stop</code></strong>
</pre><p> Ключ <code class="option">-m</code> позволяет управлять тем, <span class="emphasis"><em>как</em></span> сервер будет остановлен: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl stop -m smart</code></strong>
</pre></div><div class="refsect2" id="R2-APP-PGCTL-5"><h3>Повторный запуск сервера</h3><p>Перезапуск сервера почти равнозначен остановке и запуску сервера за исключением того, что по умолчанию <code class="command">pg_ctl</code> сохраняет параметры командной строки, которые были переданы ранее запущенному экземпляру. Таким образом, чтобы перезапустить сервер с теми же параметрами, с какими он был запущен, выполните: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl restart</code></strong>
</pre><p>Но если добавляется ключ <code class="option">-o</code>, он заменяет все предыдущие параметры. Эта команда осуществит перезапуск с использованием порта 5433 и без <code class="function">fsync</code>: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl -o "-F -p 5433" restart</code></strong>
</pre></div><div class="refsect2" id="R2-APP-PGCTL-6"><h3>Вывод состояния сервера</h3><p>Ниже представлен примерный вывод <span class="application">pg_ctl</span>: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>pg_ctl status</code></strong>
<code class="computeroutput">
pg_ctl: server is running (PID: 13718)
/usr/local/pgsql/bin/postgres "-D" "/usr/local/pgsql/data" "-p" "5433" "-B" "128"
</code></pre><p> Во второй строке показывается команда, которая будет выполнена в режиме перезапуска.</p></div></div><div class="refsect1" id="id-1.9.5.7.10"><h2>См. также</h2><span class="simplelist"><a class="xref" href="app-initdb.html" title="initdb"><span class="refentrytitle"><span class="application">initdb</span></span></a>, <a class="xref" href="app-postgres.html" title="postgres"><span class="refentrytitle"><span class="application">postgres</span></span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-pgcontroldata.html" title="pg_controldata">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-server.html" title="Серверные приложения PostgreSQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pgresetwal.html" title="pg_resetwal">След.</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">pg_controldata</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> <span class="application">pg_resetwal</span></td></tr></table></div></body></html>