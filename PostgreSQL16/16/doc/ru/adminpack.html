<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>F.1. adminpack — набор инструментов поддержки pgAdmin</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения" /><link rel="next" href="amcheck.html" title="F.2. amcheck — модуль с инструментами, проверяющими целостность таблиц и индексов" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">F.1. adminpack — набор инструментов поддержки pgAdmin</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><th width="60%" align="center">Приложение F. Дополнительно поставляемые модули и расширения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="amcheck.html" title="F.2. amcheck — модуль с инструментами, проверяющими целостность таблиц и индексов">След.</a></td></tr></table><hr /></div><div class="sect1" id="ADMINPACK"><div class="titlepage"><div><div><h2 class="title" style="clear: both">F.1. adminpack — набор инструментов поддержки pgAdmin <a href="#ADMINPACK" class="id_link">#</a></h2></div></div></div><a id="id-1.11.7.11.2" class="indexterm"></a><p>Модуль <code class="filename">adminpack</code> предоставляет несколько вспомогательных функций, которыми могут пользоваться <span class="application">pgAdmin</span> и другие средства администрирования и управления базами данных, например для удалённого управления файлами журналов сервера. По умолчанию использовать все эти функции разрешено только суперпользователям баз данных, но такое право можно дать и другим пользователям с помощью команды <code class="command">GRANT</code>.</p><p>Функции, приведённые в <a class="xref" href="adminpack.html#FUNCTIONS-ADMINPACK-TABLE" title="Таблица F.1. Функции модуля adminpack">Таблице F.1</a>, предоставляют возможность записи в файлы на компьютере, где работает сервер. (См. также функции в <a class="xref" href="functions-admin.html#FUNCTIONS-ADMIN-GENFILE-TABLE" title="Таблица 9.101. Функции для работы с обычными файлами">Таблице 9.101</a>, которые открывают доступ только на чтение.) Они позволяют обычным пользователям обращаться только к файлам в каталоге кластера баз данных, но не ограничивают суперпользователей и пользователей с правами ролей <code class="literal">pg_read_server_files</code> или <code class="literal">pg_write_server_files</code> (в зависимости от рода функции). При этом путь может задаваться и как абсолютный, и как относительный.</p><div class="table" id="FUNCTIONS-ADMINPACK-TABLE"><p class="title"><strong>Таблица F.1. Функции модуля <code class="filename">adminpack</code></strong></p><div class="table-contents"><table class="table" summary="Функции модуля adminpack" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_catalog.pg_file_write</code> ( <em class="parameter"><code>filename</code></em> <code class="type">text</code>, <em class="parameter"><code>data</code></em> <code class="type">text</code>, <em class="parameter"><code>append</code></em> <code class="type">boolean</code> ) → <code class="returnvalue">bigint</code></p>
       <p>Записывает или дописывает данные в текстовый файл.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_catalog.pg_file_sync</code> ( <em class="parameter"><code>filename</code></em> <code class="type">text</code> ) → <code class="returnvalue">void</code></p>
       <p>Сбрасывает файл или каталог на диск.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_catalog.pg_file_rename</code> ( <em class="parameter"><code>oldname</code></em> <code class="type">text</code>, <em class="parameter"><code>newname</code></em> <code class="type">text</code> [<span class="optional">, <em class="parameter"><code>archivename</code></em> <code class="type">text</code></span>] ) → <code class="returnvalue">boolean</code></p>
       <p>Переименовывает файл.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_catalog.pg_file_unlink</code> ( <em class="parameter"><code>filename</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Удаляет файл.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_catalog.pg_logdir_ls</code> () → <code class="returnvalue">setof record</code></p>
       <p>Выдаёт список файлов журналов в каталоге <code class="varname">log_directory</code>.</p></td></tr></tbody></table></div></div><br class="table-break" /><a id="id-1.11.7.11.6" class="indexterm"></a><p>Функция <code class="function">pg_file_write</code> записывает данные (<em class="parameter"><code>data</code></em>) в файл с именем <em class="parameter"><code>filename</code></em>. Если флаг <em class="parameter"><code>append</code></em> сброшен, этот файл не должен существовать. Если же флаг <em class="parameter"><code>append</code></em> установлен, существование файла допускается и в этом случае данные будут дописаны в него. Возвращает число записанных байт.</p><a id="id-1.11.7.11.8" class="indexterm"></a><p>Функция <code class="function">pg_file_sync</code> синхронизирует с файловой системой файл или каталог с именем <em class="parameter"><code>filename</code></em>. В случае неудачи (например, если указанный файл не существует) выдаётся ошибка. Заметьте, что значение <a class="xref" href="runtime-config-error-handling.html#GUC-DATA-SYNC-RETRY">data_sync_retry</a> на эту функцию не влияет, и поэтому даже в случае отказа при сбросе файлов базы не будет выдана ошибка уровня PANIC.</p><a id="id-1.11.7.11.10" class="indexterm"></a><p>Функция <code class="function">pg_file_rename</code> переименовывает файл. Если параметр <em class="parameter"><code>archivename</code></em> опущен или равен NULL, она просто переименовывает файл <em class="parameter"><code>oldname</code></em> в <em class="parameter"><code>newname</code></em> (файл с новым именем не должен существовать). Если параметр <em class="parameter"><code>archivename</code></em> задан, она сначала переименовывает <em class="parameter"><code>newname</code></em> в <em class="parameter"><code>archivename</code></em> (такой файл не должен существовать), а затем переименовывает <em class="parameter"><code>oldname</code></em> в <em class="parameter"><code>newname</code></em>. В случае ошибки на втором этапе переименования она попытается переименовать <em class="parameter"><code>archivename</code></em> назад в <em class="parameter"><code>newname</code></em>, прежде чем выдать ошибку. Возвращает true в случае успеха и false, если исходные файлы отсутствуют или их невозможно изменить; в других случаях выдаются ошибки.</p><a id="id-1.11.7.11.12" class="indexterm"></a><p>Функция <code class="function">pg_file_unlink</code> удаляет заданный файл. Возвращает true в случае успеха, false в случае отсутствия указанного файла либо при сбое в вызове <code class="function">unlink()</code>; в других случаях выдаются ошибки.</p><a id="id-1.11.7.11.14" class="indexterm"></a><p>Функция <code class="function">pg_logdir_ls</code> возвращает время создания и пути всех файлов журналов в каталоге <a class="xref" href="runtime-config-logging.html#GUC-LOG-DIRECTORY">log_directory</a>. Чтобы эта функция работала, параметр <a class="xref" href="runtime-config-logging.html#GUC-LOG-FILENAME">log_filename</a> должен иметь значение по умолчанию (<code class="literal">postgresql-%Y-%m-%d_%H%M%S.log</code>).</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="amcheck.html" title="F.2. amcheck — модуль с инструментами, проверяющими целостность таблиц и индексов">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Приложение F. Дополнительно поставляемые модули и расширения </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> F.2. amcheck — модуль с инструментами, проверяющими целостность таблиц и индексов</td></tr></table></div></body></html>