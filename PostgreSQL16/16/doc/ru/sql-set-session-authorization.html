<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SET SESSION AUTHORIZATION</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-set-role.html" title="SET ROLE" /><link rel="next" href="sql-set-transaction.html" title="SET TRANSACTION" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">SET SESSION AUTHORIZATION</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-set-role.html" title="SET ROLE">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-set-transaction.html" title="SET TRANSACTION">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-SET-SESSION-AUTHORIZATION"><div class="titlepage"></div><a id="id-1.9.3.177.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">SET SESSION AUTHORIZATION</span></h2><p>SET SESSION AUTHORIZATION — установить идентификатор пользователя сеанса и идентификатор текущего пользователя в рамках сеанса</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">SET [ SESSION | LOCAL ] SESSION AUTHORIZATION <em class="replaceable"><code>имя_пользователя</code></em>
SET [ SESSION | LOCAL ] SESSION AUTHORIZATION DEFAULT
RESET SESSION AUTHORIZATION</pre></div><div class="refsect1" id="id-1.9.3.177.5"><h2>Описание</h2><p>Эта команда меняет идентификатор пользователя сеанса и идентификатор текущего пользователя в рамках активного сеанса SQL на <em class="replaceable"><code>имя_пользователя</code></em>. Имя пользователя может быть записано в виде идентификатора или строковой константы. С помощью этой команды, можно, например, временно переключиться на непривилегированного пользователя, сохранив возможность затем стать суперпользователем.</p><p>Идентификатором пользователя сеанса изначально принимается имя пользователя, введённое клиентом (возможно, прошедшее проверку подлинности). Идентификатор текущего пользователя обычно совпадает с идентификатором пользователя сеанса, но может временно меняться в функциях с характеристикой <code class="literal">SECURITY DEFINER</code> и подобными механизмами; также его можно изменить командой <a class="link" href="sql-set-role.html" title="SET ROLE"><code class="command">SET ROLE</code></a>. Идентификатор текущего пользователя принимается во внимание при проверке разрешений.</p><p>Идентификатор пользователя сеанса можно изменить, только если начальный пользователь сеанса (<em class="firstterm">аутентифицированный пользователь</em>) имеет права суперпользователя. В противном случае эта команда разрешается, только если в ней указывается имя аутентифицированного пользователя.</p><p>Указания <code class="literal">SESSION</code> и <code class="literal">LOCAL</code> действуют на эту команду так же, как и на обычную команду <a class="link" href="sql-set.html" title="SET"><code class="command">SET</code></a>.</p><p>Формы <code class="literal">DEFAULT</code> и <code class="literal">RESET</code> сбрасывают идентификаторы текущего пользователя и пользователя сеанса, так что текущим становится пользователь, изначально проходивший проверку подлинности. Эти формы могут выполняться любым пользователем.</p></div><div class="refsect1" id="id-1.9.3.177.6"><h2>Замечания</h2><p><code class="command">SET SESSION AUTHORIZATION</code> нельзя использовать в функции с характеристикой <code class="literal">SECURITY DEFINER</code>.</p></div><div class="refsect1" id="id-1.9.3.177.7"><h2>Примеры</h2><pre class="programlisting">SELECT SESSION_USER, CURRENT_USER;

 session_user | current_user
--------------+--------------
 peter        | peter

SET SESSION AUTHORIZATION 'paul';

SELECT SESSION_USER, CURRENT_USER;

 session_user | current_user
--------------+--------------
 paul         | paul</pre></div><div class="refsect1" id="id-1.9.3.177.8"><h2>Совместимость</h2><p>Стандарт SQL позволяет вместо строковой константы <em class="replaceable"><code>имя_пользователя</code></em> указывать некоторые другие выражения, но на практике это не очень полезно. <span class="productname">PostgreSQL</span> допускает синтаксис идентификаторов (<code class="literal">"<em class="replaceable"><code>имя_пользователя</code></em>"</code>), а стандарт SQL — нет. Стандарт не позволяет выполнять эту команду в транзакции; в <span class="productname">PostgreSQL</span> такого ограничения нет, так как для него нет причины. Указания <code class="literal">SESSION</code> и <code class="literal">LOCAL</code> относятся к расширениям <span class="productname">PostgreSQL</span>, так же, как и синтаксис <code class="literal">RESET</code>.</p><p>Набор прав, требуемых для выполнения этой команды, согласно стандарту, определяется реализацией.</p></div><div class="refsect1" id="id-1.9.3.177.9"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-set-role.html" title="SET ROLE"><span class="refentrytitle">SET ROLE</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-set-role.html" title="SET ROLE">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-set-transaction.html" title="SET TRANSACTION">След.</a></td></tr><tr><td width="40%" align="left" valign="top">SET ROLE </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> SET TRANSACTION</td></tr></table></div></body></html>