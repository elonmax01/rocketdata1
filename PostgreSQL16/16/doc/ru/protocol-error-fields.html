<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>55.8. Поля сообщений с ошибками и замечаниями</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="protocol-message-formats.html" title="55.7. Форматы сообщений" /><link rel="next" href="protocol-logicalrep-message-formats.html" title="55.9. Форматы сообщений логической репликации" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">55.8. Поля сообщений с ошибками и замечаниями</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="protocol-message-formats.html" title="55.7. Форматы сообщений">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="protocol.html" title="Глава 55. Клиент-серверный протокол">Наверх</a></td><th width="60%" align="center">Глава 55. Клиент-серверный протокол</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="protocol-logicalrep-message-formats.html" title="55.9. Форматы сообщений логической репликации">След.</a></td></tr></table><hr /></div><div class="sect1" id="PROTOCOL-ERROR-FIELDS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">55.8. Поля сообщений с ошибками и замечаниями <a href="#PROTOCOL-ERROR-FIELDS" class="id_link">#</a></h2></div></div></div><p>В этом разделе описываются поля, которые могут содержаться в сообщениях ErrorResponse и NoticeResponse. Для каждого типа поля определён свой идентификационный маркер. Заметьте, что в сообщении может содержаться поле любого из этих типов, но не больше одного раза.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">S</code></span></dt><dd><p>Важность: поле содержит <code class="literal">ERROR</code>, <code class="literal">FATAL</code> или <code class="literal">PANIC</code> (в сообщении об ошибке), либо <code class="literal">WARNING</code>, <code class="literal">NOTICE</code>, <code class="literal">DEBUG</code>, <code class="literal">INFO</code> или <code class="literal">LOG</code> (в сообщении с замечанием), либо переведённые значения (ОШИБКА, ВАЖНО, ПАНИКА, ПРЕДУПРЕЖДЕНИЕ, ЗАМЕЧАНИЕ, ОТЛАДКА, ИНФОРМАЦИЯ, СООБЩЕНИЕ, соответственно). Это поле присутствует всегда.</p></dd><dt><span class="term"><code class="literal">V</code></span></dt><dd><p>Важность: поле содержит <code class="literal">ERROR</code>, <code class="literal">FATAL</code> или <code class="literal">PANIC</code> (в сообщении об ошибке) либо <code class="literal">WARNING</code>, <code class="literal">NOTICE</code>, <code class="literal">DEBUG</code>, <code class="literal">INFO</code> или <code class="literal">LOG</code> (в сообщении с замечанием). Это поле подобно <code class="literal">S</code>, но его содержимое никогда не переводится. Присутствует только в сообщениях, выдаваемых <span class="productname">PostgreSQL</span> версии 9.6 и новее.</p></dd><dt><span class="term"><code class="literal">C</code></span></dt><dd><p>Код: код SQLSTATE выданной ошибки (см. <a class="xref" href="errcodes-appendix.html" title="Приложение A. Коды ошибок PostgreSQL">Приложение A</a>). Не переводится на другие языки, присутствует всегда.</p></dd><dt><span class="term"><code class="literal">M</code></span></dt><dd><p>Сообщение: основное сообщение об ошибке, предназначенное для человека. Должно быть точным, но кратким (обычно в одну строку). Присутствует всегда.</p></dd><dt><span class="term"><code class="literal">D</code></span></dt><dd><p>Необязательное дополнительное сообщение об ошибке, передающее более детальную информацию о проблеме. Может занимать несколько строк.</p></dd><dt><span class="term"><code class="literal">H</code></span></dt><dd><p>Подсказка: необязательное предложение решения проблемы. Оно должно отличаться от подробного описания тем, что предлагает совет (не обязательно подходящий во всех случаях), а не сухие факты. Может располагаться в нескольких строках.</p></dd><dt><span class="term"><code class="literal">P</code></span></dt><dd><p>Позиция: значение поля представляет целочисленное число в ASCII, указывающее на положение ошибки в исходной строке запроса. Первый символ находится в позиции 1, при этом позиции отсчитываются по символам, а не по байтам.</p></dd><dt><span class="term"><code class="literal">p</code></span></dt><dd><p>Внутренняя позиция: она определяется так же, как поле <code class="literal">P</code>, но отражает положение ошибки во внутренне сгенерированной команде, а не в строке, переданной клиентом. Вместе с этим полем всегда присутствует поле <code class="literal">q</code>.</p></dd><dt><span class="term"><code class="literal">q</code></span></dt><dd><p>Внутренний запрос: текст внутренне сгенерированной команды, в которой произошла ошибка. Это может быть, например, SQL-запрос, выполняемый функцией на PL/pgSQL.</p></dd><dt><span class="term"><code class="literal">W</code></span></dt><dd><p>Где: указывает на контекст, в котором произошла ошибка. В настоящее время включает трассировку стека вызовов текущей функции на процедурном языке и внутренне сгенерированных запросов. Записи трассировки разделяются по строкам, вначале последняя.</p></dd><dt><span class="term"><code class="literal">s</code></span></dt><dd><p>Имя схемы: если ошибка связана с некоторым объектом базы данных, это поле содержит имя схемы, к которой относится объект (если такая есть).</p></dd><dt><span class="term"><code class="literal">t</code></span></dt><dd><p>Имя таблицы: если ошибка связана с некоторой таблицей, это поле содержит имя таблицы. (Узнать имя схемы таблицы можно из соответствующего отдельного поля.)</p></dd><dt><span class="term"><code class="literal">c</code></span></dt><dd><p>Имя столбца: если ошибка связана с некоторым столбцом таблицы, это поле содержит имя столбца. (Идентифицировать таблицу можно, обратившись к полям, содержащим имя таблицы и схемы.)</p></dd><dt><span class="term"><code class="literal">d</code></span></dt><dd><p>Имя типа данных: если ошибка связана с некоторым типом данных, это поле содержит имя типа. (Узнать имя схемы типа можно из соответствующего поля.)</p></dd><dt><span class="term"><code class="literal">n</code></span></dt><dd><p>Имя ограничения: если ошибка связана с некоторым ограничением, это поле содержит имя ограничения. Чтобы узнать, к какой таблице или домену она относится, обратитесь к полям, описанным выше. (В данном контексте индексы считаются ограничениями, даже если они были созданы не с синтаксисом ограничений.)</p></dd><dt><span class="term"><code class="literal">F</code></span></dt><dd><p>Файл: имя файла с исходным кодом, в котором была обнаружена ошибка.</p></dd><dt><span class="term"><code class="literal">L</code></span></dt><dd><p>Строка: номер строки в исходном коде, в которой была обнаружена ошибка.</p></dd><dt><span class="term"><code class="literal">R</code></span></dt><dd><p>Программа: имя программы в исходном коде, в которой была обнаружена ошибка.</p></dd></dl></div><div class="note"><h3 class="title">Примечание</h3><p>Поля, содержащие имена схемы, таблицы, столбца, типа данных и ограничения, выдаются только для ограниченного числа типов ошибок; см. <a class="xref" href="errcodes-appendix.html" title="Приложение A. Коды ошибок PostgreSQL">Приложение A</a>. Клиенты не должны рассчитывать на то, что присутствие одного из полей обязательно влечёт присутствие другого поля. Системные источники ошибок устанавливают связь между ними, но пользовательские функции могут использовать эти поля по-другому. Подобным образом, клиенты не должны полагаться на то, что эти поля ссылаются на актуальные объекты в текущей базе данных.</p></div><p>Клиент отвечает за форматирование отображаемой информации в соответствии с его нуждами; в частности, он должен разбивать длинные строки, как требуется. Символы новой строки, встречающиеся в полях сообщения об ошибке, должны обрабатываться, как разрывы абзацев, а не строк.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="protocol-message-formats.html" title="55.7. Форматы сообщений">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="protocol.html" title="Глава 55. Клиент-серверный протокол">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="protocol-logicalrep-message-formats.html" title="55.9. Форматы сообщений логической репликации">След.</a></td></tr><tr><td width="40%" align="left" valign="top">55.7. Форматы сообщений </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 55.9. Форматы сообщений логической репликации</td></tr></table></div></body></html>