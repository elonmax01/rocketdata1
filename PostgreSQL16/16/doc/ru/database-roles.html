<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>22.1. Роли базы данных</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="user-manag.html" title="Глава 22. Роли базы данных" /><link rel="next" href="role-attributes.html" title="22.2. Атрибуты ролей" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">22.1. Роли базы данных</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="user-manag.html" title="Глава 22. Роли базы данных">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="user-manag.html" title="Глава 22. Роли базы данных">Наверх</a></td><th width="60%" align="center">Глава 22. Роли базы данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="role-attributes.html" title="22.2. Атрибуты ролей">След.</a></td></tr></table><hr /></div><div class="sect1" id="DATABASE-ROLES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">22.1. Роли базы данных <a href="#DATABASE-ROLES" class="id_link">#</a></h2></div></div></div><a id="id-1.6.9.5.2" class="indexterm"></a><a id="id-1.6.9.5.3" class="indexterm"></a><a id="id-1.6.9.5.4" class="indexterm"></a><a id="id-1.6.9.5.5" class="indexterm"></a><p>Роли базы данных концептуально полностью отличаются от пользователей операционной системы. На практике поддержание соответствия между ними может быть удобным, но не является обязательным. Роли базы данных являются глобальными для всей установки кластера базы данных (не для отдельной базы данных). Для создания роли используется команда SQL <a class="link" href="sql-createrole.html" title="CREATE ROLE"><code class="command">CREATE ROLE</code></a>: </p><pre class="synopsis">
CREATE ROLE <em class="replaceable"><code>имя</code></em>;
</pre><p> Здесь <em class="replaceable"><code>имя</code></em> соответствует правилам именования идентификаторов SQL: либо обычное, без специальных символов, либо в двойных кавычках. (На практике, к команде обычно добавляются другие указания, такие как <code class="literal">LOGIN</code>. Подробнее об этом ниже.) Для удаления роли используется команда <a class="link" href="sql-droprole.html" title="DROP ROLE"><code class="command">DROP ROLE</code></a>: </p><pre class="synopsis">
DROP ROLE <em class="replaceable"><code>имя</code></em>;
</pre><a id="id-1.6.9.5.7" class="indexterm"></a><a id="id-1.6.9.5.8" class="indexterm"></a><p>Для удобства поставляются программы <a class="xref" href="app-createuser.html" title="createuser"><span class="refentrytitle"><span class="application">createuser</span></span></a> и <a class="xref" href="app-dropuser.html" title="dropuser"><span class="refentrytitle"><span class="application">dropuser</span></span></a>, которые являются обёртками для этих команд SQL и вызываются из командной строки оболочки ОС: </p><pre class="synopsis">
createuser <em class="replaceable"><code>имя</code></em>
dropuser <em class="replaceable"><code>имя</code></em>
</pre><p>Для получения списка существующих ролей, обратитесь к <code class="structname">pg_roles</code> системного каталога, например: </p><pre class="synopsis">
SELECT rolname FROM pg_roles;
</pre><p> Для проверки только ролей, которые могут подключаться к базе данных, выполните: </p><pre class="synopsis">
SELECT rolname FROM pg_roles WHERE rolcanlogin;
</pre><p> Метакоманда <code class="literal">\du</code> программы <a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a> также полезна для получения списка существующих ролей.</p><p>Для начальной настройки кластера базы данных система сразу после инициализации всегда содержит одну предопределённую роль с возможностью подключения. Эта роль всегда является суперпользователем (<span class="quote">«<span class="quote">superuser</span>»</span>) и по умолчанию имеет такое же имя, как и пользователь операционной системы, инициализирующий кластер баз данных командой <code class="command">initdb</code>, если при её запуске не указано другое имя. Обычно, но необязательно, эта роль называется <code class="literal">postgres</code>. Для создания других ролей вначале нужно подключиться с этой ролью.</p><p>Каждое подключение к серверу базы данных выполняется под именем конкретной роли, и эта роль определяет начальные права доступа для команд, выполняемых в этом соединении. Имя роли для конкретного подключения к базе данных указывается клиентской программой характерным для неё способом, таким образом инициируя запрос на подключение. Например, программа <code class="command">psql</code> для указания роли использует аргумент командной строки <code class="option">-U</code>. Многие приложения предполагают, что по умолчанию нужно использовать имя пользователя операционной системы (включая <code class="command">createuser</code> и <code class="command">psql</code>). Поэтому часто бывает удобным поддерживать соответствие между именами ролей и именами пользователей операционной системы.</p><p>Список доступных для подключения ролей, который могут использовать клиенты, определяется конфигурацией аутентификации, как описывалось в <a class="xref" href="client-authentication.html" title="Глава 21. Аутентификация клиентского приложения">Главе 21</a>. (Поэтому клиент не ограничен только ролью, соответствующей имени пользователя операционной системы, так же как и имя для входа может не соответствовать реальному имени.) Так как с ролью связан набор прав, доступных для клиента, в многопользовательской среде распределять права следует с осторожностью.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="user-manag.html" title="Глава 22. Роли базы данных">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="user-manag.html" title="Глава 22. Роли базы данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="role-attributes.html" title="22.2. Атрибуты ролей">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 22. Роли базы данных </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 22.2. Атрибуты ролей</td></tr></table></div></body></html>