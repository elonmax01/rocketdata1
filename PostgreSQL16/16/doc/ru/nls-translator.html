<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>57.1. Переводчику</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="nls.html" title="Глава 57. Языковая поддержка" /><link rel="next" href="nls-programmer.html" title="57.2. Программисту" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">57.1. Переводчику</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="nls.html" title="Глава 57. Языковая поддержка">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="nls.html" title="Глава 57. Языковая поддержка">Наверх</a></td><th width="60%" align="center">Глава 57. Языковая поддержка</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="nls-programmer.html" title="57.2. Программисту">След.</a></td></tr></table><hr /></div><div class="sect1" id="NLS-TRANSLATOR"><div class="titlepage"><div><div><h2 class="title" style="clear: both">57.1. Переводчику <a href="#NLS-TRANSLATOR" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="nls-translator.html#NLS-TRANSLATOR-REQUIREMENTS">57.1.1. Требования</a></span></dt><dt><span class="sect2"><a href="nls-translator.html#NLS-TRANSLATOR-CONCEPTS">57.1.2. Основные понятия</a></span></dt><dt><span class="sect2"><a href="nls-translator.html#NLS-TRANSLATOR-MESSAGE-CATALOGS">57.1.3. Создание и управление каталогами сообщений</a></span></dt><dt><span class="sect2"><a href="nls-translator.html#NLS-TRANSLATOR-EDITING-PO">57.1.4. Редактирование файлов PO</a></span></dt></dl></div><p>Программы <span class="productname">PostgreSQL</span> (серверные и клиентские) могут выдавать сообщения на предпочитаемом вами языке — если эти сообщения были переведены. Создание и поддержка переведённых наборов сообщений предполагает помощь со стороны людей, которые хорошо говорят на своём языке и хотят сотрудничать с <span class="productname">PostgreSQL</span>. Для этого совершенно не обязательно быть программистом. В данном разделе объясняется, как можно помочь.</p><div class="sect2" id="NLS-TRANSLATOR-REQUIREMENTS"><div class="titlepage"><div><div><h3 class="title">57.1.1. Требования <a href="#NLS-TRANSLATOR-REQUIREMENTS" class="id_link">#</a></h3></div></div></div><p>Мы не будем оценивать ваши языковые навыки — данный раздел посвящён средствам программного обеспечения. Теоретически, требуется лишь текстовый редактор. Но, скорее всего, вы захотите проверить свои переведённые сообщения. Когда вы выполняете <code class="command">configure</code>, обязательно используйте параметр <code class="option">--enable-nls</code>. Это также проверит библиотеку <span class="application">libintl</span> и программу <code class="filename">msgfmt</code>, которые понадобятся всем пользователям в любом случае. Чтобы проверить свою работу, следуйте соответствующим разделам инструкций по установке.</p><p>Если вы захотите выполнить перевод или слияние каталога сообщений (описано ниже), вам понадобятся, соответственно, программы <code class="filename">xgettext</code> и <code class="filename">msgmerge</code> в GNU-совместимой реализации. Позднее, мы постараемся сделать так, что если вы будете использовать дистрибутив исходников, вам не понадобится <code class="filename">xgettext</code>. (При работе с Git, вам всё же это будет необходимо). В настоящее время рекомендуется <span class="application">GNU Gettext 0.10.36</span> или более поздняя версия.</p><p>К вашей реализации gettext должна прилагаться документация. Некоторая её часть, возможно, будет продублирована ниже, но более подробную информацию следует искать там.</p></div><div class="sect2" id="NLS-TRANSLATOR-CONCEPTS"><div class="titlepage"><div><div><h3 class="title">57.1.2. Основные понятия <a href="#NLS-TRANSLATOR-CONCEPTS" class="id_link">#</a></h3></div></div></div><p>Пары оригинальных (английских) сообщений и их (предположительно) переведённых эквивалентов хранятся в <em class="firstterm">каталогах сообщений</em>, по одному для каждой программы (хотя связанные программы могут иметь общий каталог) и для каждого языка перевода. Существует два формата, поддерживающих каталоги сообщений: Первый — <span class="quote">«<span class="quote">PO</span>»</span> (Portable Object, переносимый объект), который является простым текстовым файлом с особым синтаксисом, редактируемый переводчиками. Второй — <span class="quote">«<span class="quote">MO</span>»</span> (Machine Object, машинный объект), который является двоичным файлом, генерируемым из соответствующего файла PO, и используется при выполнении интернационализированной программы. Переводчики не работают с файлами MO; фактически с ними едва ли кто-то работает напрямую.</p><p>Файл каталога сообщений, как можно было предположить, имеет расширение <code class="filename">.po</code> или <code class="filename">.mo</code>. Базовым именем является либо имя сопровождаемой им программы, либо язык, для которого создан файл, в зависимости от ситуации. Это создаёт некоторую путаницу. Например, <code class="filename">psql.po</code> (файл PO для psql) или <code class="filename">fr.mo</code> (файл MO на французском).</p><p>Здесь проиллюстрирован формат файлов PO: </p><pre class="programlisting"># comment

msgid "original string"
msgstr "translated string"

msgid "more original"
msgstr "another translated"
"string can be broken up like this"

...</pre><p> Строки msgid извлекаются из исходного кода программы (что необязательно, но это наиболее распространённый способ). Строки msgstr изначально пусты, и переводчик заполняет их переводами. Строки могут содержать экранирующие спецсимволы в стиле С и занимать несколько строк, как в приведённом примере. (Следующая строка должна начинаться с начала строки.)</p><p>Символ # обозначает начало комментария. Если сразу за символом # следует пробел, то этим комментарием управляет переводчик. Комментарии также могут быть автоматическими, у которых сразу за # следует символ, отличный от пробела. Они управляются различными инструментами, которые работают с файлами PO и предназначены для переводчиков. </p><pre class="programlisting">#. automatic comment
#: filename.c:1023
#, flags, flags</pre><p> Комментарии в стиле #. извлекаются из исходного файла, где используется сообщение. Возможно, программист вставил информацию для переводчика, например, о предполагаемом выравнивании. Комментарий #: указывает точные места, где сообщение используется в исходном коде. Переводчику не нужно смотреть на исходный код программы, но он может это сделать, если сомневается в точности перевода. Комментарии #, содержат флаги, которые некоторым образом описывают сообщение. В настоящее время существует два флага: <code class="literal">fuzzy</code> устанавливается, если сообщение, возможно, стало неактуально по причине изменений в исходном коде программы. Переводчик может проверить это и, возможно, удалить флаг fuzzy. Заметьте, что fuzzy сообщения недоступны конечному пользователю. Другой флаг это <code class="literal">c-format</code>, который указывает, что сообщение является шаблоном формата в стиле <code class="function">printf</code>. Это означает, что перевод также должен быть строкой формата с таким же количеством и типом «заполнителей». Существуют средства, которые распознают и проверяют флаги c-format.</p></div><div class="sect2" id="NLS-TRANSLATOR-MESSAGE-CATALOGS"><div class="titlepage"><div><div><h3 class="title">57.1.3. Создание и управление каталогами сообщений <a href="#NLS-TRANSLATOR-MESSAGE-CATALOGS" class="id_link">#</a></h3></div></div></div><p>Итак, как же создать <span class="quote">«<span class="quote">blank</span>»</span> каталог сообщений? Во-первых, зайдите в каталог, содержащий программу, сообщения которой необходимо перевести. Если имеется файл <code class="filename">nls.mk</code>, данная программа подготовлена к переводу.</p><p>Если уже есть некоторые <code class="filename">.po</code> файлы, то кто-то уже занимался переводом. Файлы получают имя <code class="filename"><em class="replaceable"><code>язык</code></em>.po</code>, где <em class="replaceable"><code>язык</code></em> — <a class="ulink" href="https://www.loc.gov/standards/iso639-2/php/English_list.php" target="_top">двухбуквенный языковой код ISO 639-1 (в нижнем регистре)</a>, например, <code class="filename">fr.po</code> для французского. Если требуется больше одного перевода на какой-либо язык, файлы могут также быть названы <code class="filename"><em class="replaceable"><code>язык</code></em>_<em class="replaceable"><code>регион</code></em>.po</code>, где <em class="replaceable"><code>регион</code></em> — <a class="ulink" href="https://www.iso.org/iso-3166-country-codes.html" target="_top">двухбуквенный код страны ISO 3166-1 (в верхнем регистре)</a>, например, <code class="filename">pt_BR.po</code> для португальского в Бразилии. Если найден необходимый язык, можно просто начать работать над этим файлом.</p><p>Если необходимо начать новый перевод, сначала выполните команду: </p><pre class="programlisting">make init-po</pre><p> В результате будет создан файл <code class="filename"><em class="replaceable"><code>progname</code></em>.pot</code>. (<code class="filename">.pot</code>, чтобы отличать его от файлов PO, находящихся <span class="quote">«<span class="quote">в эксплуатации</span>»</span>. <code class="literal">T</code> означает <span class="quote">«<span class="quote">шаблон</span>»</span>.) Скопируйте данный файл в <code class="filename"><em class="replaceable"><code>language</code></em>.po</code> и редактируйте его. Чтобы сообщить о том, что новый язык доступен, также редактируйте файл <code class="filename">po/LINGUAS</code> и добавляйте языковой код (или код языка и страны) рядом с уже перечисленными языками, как показано ниже: </p><pre class="programlisting">de fr</pre><p> (Конечно, и другие языки могут появиться.)</p><p>По мере развития базовой программы или библиотеки, сообщения могут быть изменены или добавлены программистами. В этом случае нет необходимости начинать с нуля. Вместо этого выполните команду: </p><pre class="programlisting">make update-po</pre><p> что создаст новый пустой файл каталога сообщений (файл с расширением pot, с которого вы начали) и объединит его с существующими файлами PO. Если алгоритм слияния не распознаёт конкретное сообщение, он ставит пометку <span class="quote">«<span class="quote">fuzzy</span>»</span>, как говорилось выше. Новый файл PO сохраняется с расширением <code class="filename">.po.new</code>.</p></div><div class="sect2" id="NLS-TRANSLATOR-EDITING-PO"><div class="titlepage"><div><div><h3 class="title">57.1.4. Редактирование файлов PO <a href="#NLS-TRANSLATOR-EDITING-PO" class="id_link">#</a></h3></div></div></div><p>Файлы PO можно редактировать при помощи обычного текстового редактора. Есть и некоторые специализированные редакторы, которые могут упростить процесс перевода. Существует также режим PO для Emacs, который представляется довольно полезным.</p><p>Переводчику нужно лишь вставить перевод между кавычками после директивы msgstr, добавить комментарии и изменить флаг fuzzy.</p><p>Файлы PO не обязательно должны быть полностью заполнены. Программа автоматически вернётся к использованию исходной строки, если перевод недоступен (или отсутствует). Вы вполне можете предлагать для включения в исходный код неполный перевод; это даст возможность другим продолжить работу над ним. Однако после слияния рекомендуется в первую очередь удалить ненужные неточные соответствия. Помните, что неточные соответствия в итоге не будут использоваться, они могут лишь подсказывать, каким мог бы быть перевод похожей строки.</p><p>Ниже описаны моменты, которые следует учитывать при редактировании переводов: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Если оригинал заканчивается переводом строки, важно, чтобы это было отражено и в переводе. То же относится к табуляции, и т. п.</p></li><li class="listitem"><p>Если оригиналом является строка форматирования <code class="function">printf</code>, то перевод должен иметь такой же вид. Перевод также должен иметь те же спецификаторы формата в том же порядке. Иногда правила языка таковы, что это невозможно или как минимум нелепо. В таком случае можно модифицировать спецификаторы формата подобным образом: </p><pre class="programlisting">msgstr "Die Datei %2$s hat %1$u Zeichen."</pre><p> Тогда первый заполнитель просто использует второй аргумент из списка.<code class="literal"><em class="replaceable"><code>digits</code></em>$</code> должен стоять сразу за % до любых других модификаторов формата. (Эта возможность действительно существует в семействе функций <code class="function">printf</code>. Вы, возможно, не слышали о ней раньше, потому что она мало используется где-либо кроме интернационализации сообщений.)</p></li><li class="listitem"><p>Если исходная строка содержит лингвистическую ошибку, сообщите об этом (или исправьте самостоятельно в исходном коде программы) и переведите правильно. Верная строка может быть добавлена, когда исходный программный код будет обновлен. Если исходная строка содержит фактическую ошибку, сообщите об этом (или исправьте самостоятельно) и не переводите её. Вместо этого, можно отметить строку, оставив комментарий в файле PO.</p></li><li class="listitem"><p>Сохраняйте стиль и тон исходной строки. В частности, сообщения, не являющиеся предложениями (<code class="literal">cannot open file %s</code>), вероятно, не следует начинать с заглавной буквы (если в вашем языке есть разделение на регистры) или заканчивать точкой (если в вашем языке используются знаки препинания). Дополнительно см. <a class="xref" href="error-style-guide.html" title="56.3. Руководство по стилю сообщений об ошибках">Раздел 56.3</a>.</p></li><li class="listitem"><p>Если вы не знаете, что означает какое-либо сообщение, или если оно допускает двоякое толкование, обратитесь за помощью через список рассылки разработчиков. По всей вероятности, англоговорящие пользователи могут также его не понять или найти двусмысленным, поэтому лучше исправить это сообщение.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="nls.html" title="Глава 57. Языковая поддержка">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="nls.html" title="Глава 57. Языковая поддержка">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="nls-programmer.html" title="57.2. Программисту">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 57. Языковая поддержка </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 57.2. Программисту</td></tr></table></div></body></html>