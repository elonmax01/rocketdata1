<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>37.57. triggers</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="infoschema-triggered-update-columns.html" title="37.56. triggered_update_columns" /><link rel="next" href="infoschema-udt-privileges.html" title="37.58. udt_privileges" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">37.57. <code class="literal">triggers</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="infoschema-triggered-update-columns.html" title="37.56. triggered_update_columns">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="information-schema.html" title="Глава 37. Информационная схема">Наверх</a></td><th width="60%" align="center">Глава 37. Информационная схема</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="infoschema-udt-privileges.html" title="37.58. udt_privileges">След.</a></td></tr></table><hr /></div><div class="sect1" id="INFOSCHEMA-TRIGGERS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">37.57. <code class="literal">triggers</code> <a href="#INFOSCHEMA-TRIGGERS" class="id_link">#</a></h2></div></div></div><p>Представление <code class="literal">triggers</code> показывает все триггеры, определённые в текущей базе данных для таблиц и представлений, к которым имеет доступ текущий пользователь (являясь владельцем или имея некоторые права, кроме <code class="literal">SELECT</code>).</p><div class="table" id="id-1.7.6.61.3"><p class="title"><strong>Таблица 37.55. Столбцы <code class="structname">triggers</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы triggers" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">trigger_catalog</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя базы данных, содержащей триггер (всегда текущая база)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">trigger_schema</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя схемы, содержащей триггер</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">trigger_name</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя триггера</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">event_manipulation</code> <code class="type">character_data</code>
      </p>
      <p>Событие, вызывающие срабатывание триггера (<code class="literal">INSERT</code>, <code class="literal">UPDATE</code> или <code class="literal">DELETE</code>)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">event_object_catalog</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя базы данных, содержащей таблицу, для которой определён триггер (всегда текущая база)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">event_object_schema</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя схемы, содержащей таблицу, для которой определён триггер</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">event_object_table</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя таблицы, для которой определён триггер</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_order</code> <code class="type">cardinal_number</code>
      </p>
      <p>Порядок срабатывания триггеров, имеющих одинаковые свойства <code class="literal">event_manipulation</code>, <code class="literal">action_timing</code> и <code class="literal">action_orientation</code>. В <span class="productname">PostgreSQL</span> триггеры срабатывают по порядку их имён, что и отражается в этом столбце.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_condition</code> <code class="type">character_data</code>
      </p>
      <p>Условие <code class="literal">WHEN</code> триггера, либо NULL, если его нет (так же NULL, если таблица не принадлежит текущей активной роли)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_statement</code> <code class="type">character_data</code>
      </p>
      <p>Оператор, выполняемый триггером (в настоящее время всегда <code class="literal">EXECUTE FUNCTION <em class="replaceable"><code>функция</code></em>(...)</code>)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_orientation</code> <code class="type">character_data</code>
      </p>
      <p>Определяет, срабатывает ли триггер для каждой обрабатываемой строки или только для каждого оператора (<code class="literal">ROW</code> или <code class="literal">STATEMENT</code>)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_timing</code> <code class="type">character_data</code>
      </p>
      <p>Момент срабатывания триггера (<code class="literal">BEFORE</code> (до), <code class="literal">AFTER</code> (после) или <code class="literal">INSTEAD OF</code> (вместо))</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_reference_old_table</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя <span class="quote">«<span class="quote">старой</span>»</span> переходной таблицы либо NULL, если её нет</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_reference_new_table</code> <code class="type">sql_identifier</code>
      </p>
      <p>Имя <span class="quote">«<span class="quote">новой</span>»</span> переходной таблицы либо NULL, если её нет</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_reference_old_row</code> <code class="type">sql_identifier</code>
      </p>
      <p>Относится к функциональности, отсутствующей в <span class="productname">PostgreSQL</span></p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">action_reference_new_row</code> <code class="type">sql_identifier</code>
      </p>
      <p>Относится к функциональности, отсутствующей в <span class="productname">PostgreSQL</span></p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">created</code> <code class="type">time_stamp</code>
      </p>
      <p>Относится к функциональности, отсутствующей в <span class="productname">PostgreSQL</span></p></td></tr></tbody></table></div></div><br class="table-break" /><p>Триггеры в <span class="productname">PostgreSQL</span> несовместимы со стандартом в двух аспектах, которые влияют на их представление в информационной схеме. Во-первых, имена триггеров являются локальными для каждой таблицы в <span class="productname">PostgreSQL</span>, а не независимыми объектами схемы. Таким образом, в одной схеме могут быть дублирующиеся имена триггеров, если они принадлежат разным таблицам. (Значения <code class="literal">trigger_catalog</code> и <code class="literal">trigger_schema</code> на самом деле относятся к таблице, для которой определён триггер.) Во-вторых, триггеры в <span class="productname">PostgreSQL</span> могут срабатывать при нескольких событиях (например, <code class="literal">ON INSERT OR UPDATE</code>), тогда как стандарт SQL допускает только одно событие. Если триггер настроен на несколько событий, он представляется в информационной схеме в виде нескольких строк, по одной для каждого типа события. Вследствие этих двух особенностей, первичный ключ в представлении <code class="literal">triggers</code> на самом деле <code class="literal">(trigger_catalog, trigger_schema, event_object_table, trigger_name, event_manipulation)</code>, а не <code class="literal">(trigger_catalog, trigger_schema, trigger_name)</code>, как должно быть согласно стандарту SQL. Однако если определять триггеры в строгом соответствии со стандартом SQL (чтобы имена триггеров были уникальны в схеме и каждый триггер связывался только с одним событием), это расхождение никак не проявится.</p><div class="note"><h3 class="title">Примечание</h3><p>До <span class="productname">PostgreSQL</span> 9.1 в этом представлении столбцы <code class="structfield">action_timing</code>, <code class="structfield">action_reference_old_table</code>, <code class="structfield">action_reference_new_table</code>, <code class="structfield">action_reference_old_row</code> и <code class="structfield">action_reference_new_row</code> назывались <code class="structfield">condition_timing</code>, <code class="structfield">condition_reference_old_table</code>, <code class="structfield">condition_reference_new_table</code>, <code class="structfield">condition_reference_old_row</code> и <code class="structfield">condition_reference_new_row</code>, соответственно. Старые имена были продиктованы стандартом SQL:1999. Новые имена соответствуют стандарту SQL:2003 и более поздним.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="infoschema-triggered-update-columns.html" title="37.56. triggered_update_columns">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="information-schema.html" title="Глава 37. Информационная схема">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="infoschema-udt-privileges.html" title="37.58. udt_privileges">След.</a></td></tr><tr><td width="40%" align="left" valign="top">37.56. <code class="literal">triggered_update_columns</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 37.58. <code class="literal">udt_privileges</code></td></tr></table></div></body></html>