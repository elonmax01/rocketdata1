<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>25.2. Регулярная переиндексация</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="routine-vacuuming.html" title="25.1. Регламентная очистка" /><link rel="next" href="logfile-maintenance.html" title="25.3. Обслуживание журнала" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">25.2. Регулярная переиндексация</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="routine-vacuuming.html" title="25.1. Регламентная очистка">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="maintenance.html" title="Глава 25. Регламентные задачи обслуживания базы данных">Наверх</a></td><th width="60%" align="center">Глава 25. Регламентные задачи обслуживания базы данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="logfile-maintenance.html" title="25.3. Обслуживание журнала">След.</a></td></tr></table><hr /></div><div class="sect1" id="ROUTINE-REINDEX"><div class="titlepage"><div><div><h2 class="title" style="clear: both">25.2. Регулярная переиндексация <a href="#ROUTINE-REINDEX" class="id_link">#</a></h2></div></div></div><a id="id-1.6.12.11.2" class="indexterm"></a><p>В некоторых ситуациях стоит периодически перестраивать индексы, выполняя команду <a class="xref" href="sql-reindex.html" title="REINDEX"><span class="refentrytitle">REINDEX</span></a> или последовательность отдельных шагов по восстановлению индексов.</p><p>Страницы индексов на основе B-деревьев, которые стали абсолютно пустыми, могут быть использованы повторно. Однако возможность неэффективного использования пространства всё же остаётся: если со страницы были удалены почти все, но не все ключи индекса, страница всё равно остаётся занятой. Следовательно, шаблон использования, при котором со временем удаляются многие, но не все ключи в каждом диапазоне, приведёт к неэффективному расходованию пространства. В таких случаях рекомендуется периодически проводить переиндексацию.</p><p>Возможность раздувания в индексах на основе не B-деревьев глубоко не исследовалась. Поэтому имеет смысл периодически отслеживать физический размер индекса, когда применяется индекс такого типа.</p><p>Кроме того, с B-деревьями доступ по недавно построенному индексу осуществляется немного быстрее, нежели доступ по индексу, который неоднократно изменялся, поскольку в недавно построенном индексе страницы, близкие логически, обычно расположены так же близко и физически. (Это соображение неприменимо к индексам, которые основаны не на B-деревьях.) Поэтому периодически проводить переиндексацию стоит хотя бы для того, чтобы увеличить скорость доступа.</p><p>Команда <a class="xref" href="sql-reindex.html" title="REINDEX"><span class="refentrytitle">REINDEX</span></a> проста и безопасна для использования в любых случаях. Эта команда по умолчанию затребует блокировку <code class="literal">ACCESS EXCLUSIVE</code>, поэтому её обычно лучше выполнять с указанием <code class="literal">CONCURRENTLY</code>, с которым затребуется только <code class="literal">SHARE UPDATE EXCLUSIVE</code>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="routine-vacuuming.html" title="25.1. Регламентная очистка">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="maintenance.html" title="Глава 25. Регламентные задачи обслуживания базы данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="logfile-maintenance.html" title="25.3. Обслуживание журнала">След.</a></td></tr><tr><td width="40%" align="left" valign="top">25.1. Регламентная очистка </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 25.3. Обслуживание журнала</td></tr></table></div></body></html>