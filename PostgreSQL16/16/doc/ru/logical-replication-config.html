<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>31.10. Параметры конфигурации</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="logical-replication-security.html" title="31.9. Безопасность" /><link rel="next" href="logical-replication-quick-setup.html" title="31.11. Быстрая настройка" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">31.10. Параметры конфигурации</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="logical-replication-security.html" title="31.9. Безопасность">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="logical-replication.html" title="Глава 31. Логическая репликация">Наверх</a></td><th width="60%" align="center">Глава 31. Логическая репликация</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="logical-replication-quick-setup.html" title="31.11. Быстрая настройка">След.</a></td></tr></table><hr /></div><div class="sect1" id="LOGICAL-REPLICATION-CONFIG"><div class="titlepage"><div><div><h2 class="title" style="clear: both">31.10. Параметры конфигурации <a href="#LOGICAL-REPLICATION-CONFIG" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="logical-replication-config.html#LOGICAL-REPLICATION-CONFIG-PUBLISHER">31.10.1. Публикующие серверы</a></span></dt><dt><span class="sect2"><a href="logical-replication-config.html#LOGICAL-REPLICATION-CONFIG-SUBSCRIBER">31.10.2. Подписчики</a></span></dt></dl></div><p>Логическая репликация требует установки нескольких параметров конфигурации. Большинство параметров актуальны только на одной стороне репликации. Однако параметр <code class="varname">max_replication_slots</code> используется как на публикующем сервере, так и на подписчике, но имеет разное значение.</p><div class="sect2" id="LOGICAL-REPLICATION-CONFIG-PUBLISHER"><div class="titlepage"><div><div><h3 class="title">31.10.1. Публикующие серверы <a href="#LOGICAL-REPLICATION-CONFIG-PUBLISHER" class="id_link">#</a></h3></div></div></div><p>Для <a class="link" href="runtime-config-wal.html#GUC-WAL-LEVEL"><code class="varname">wal_level</code></a> должно быть установлено значение <code class="literal">logical</code>.</p><p>Для параметра <a class="link" href="runtime-config-replication.html#GUC-MAX-REPLICATION-SLOTS"><code class="varname">max_replication_slots</code></a> должно быть задано число не меньше ожидаемого числа подписчиков плюс некоторый резерв для синхронизации таблиц.</p><p>В <a class="link" href="runtime-config-replication.html#GUC-MAX-WAL-SENDERS"><code class="varname">max_wal_senders</code></a> должно быть значение как минимум равное <code class="varname">max_replication_slots</code> плюс число возможных физических реплик, работающих одновременно.</p><p>В работе передатчика данных логической репликации также учитывается параметр <a class="link" href="runtime-config-replication.html#GUC-WAL-SENDER-TIMEOUT"><code class="varname">wal_sender_timeout</code></a>.</p></div><div class="sect2" id="LOGICAL-REPLICATION-CONFIG-SUBSCRIBER"><div class="titlepage"><div><div><h3 class="title">31.10.2. Подписчики <a href="#LOGICAL-REPLICATION-CONFIG-SUBSCRIBER" class="id_link">#</a></h3></div></div></div><p>Для параметра <a class="link" href="runtime-config-replication.html#GUC-MAX-REPLICATION-SLOTS-SUBSCRIBER"><code class="varname">max_replication_slots</code></a> должно быть задано значение не меньше числа подписок, на которые будет подписываться данный подписчик, плюс некоторый резерв для синхронизации таблиц.</p><p>Для <a class="link" href="runtime-config-replication.html#GUC-MAX-LOGICAL-REPLICATION-WORKERS"><code class="varname">max_logical_replication_workers</code></a> должно быть установлено значение, равное как минимум количеству подписок (для ведущих процессов применения), плюс некоторый резерв для рабочих процессов синхронизации таблиц и рабочих процессов параллельного применения.</p><p>Кроме того, может потребоваться изменить <code class="varname">max_worker_processes</code>, чтобы это число включало дополнительные рабочие процессы для репликации (как минимум <a class="link" href="runtime-config-replication.html#GUC-MAX-LOGICAL-REPLICATION-WORKERS"><code class="varname">max_logical_replication_workers</code></a> + <code class="literal">1</code>). Обратите внимание, что некоторые расширения и параллельные запросы также занимают слоты из числа <code class="varname">max_worker_processes</code>.</p><p>Параметр <a class="link" href="runtime-config-replication.html#GUC-MAX-SYNC-WORKERS-PER-SUBSCRIPTION"><code class="varname">max_sync_workers_per_subscription</code></a> управляет степенью распараллеливания копирования начальных данных в процессе инициализации подписки или при добавлении новых таблиц.</p><p><a class="link" href="runtime-config-replication.html#GUC-MAX-PARALLEL-APPLY-WORKERS-PER-SUBSCRIPTION"><code class="varname">max_parallel_apply_workers_per_subscription</code></a> управляет степенью распараллеливания для потоковой передачи незавершённых транзакций с параметром подписки <code class="literal">streaming = parallel</code>.</p><p>На рабочие процессы логической репликации также влияют параметры <a class="link" href="runtime-config-replication.html#GUC-WAL-RECEIVER-TIMEOUT"><code class="varname">wal_receiver_timeout</code></a>, <a class="link" href="runtime-config-replication.html#GUC-WAL-RECEIVER-STATUS-INTERVAL"> <code class="varname">wal_receiver_status_interval</code></a> и <a class="link" href="runtime-config-replication.html#GUC-WAL-RETRIEVE-RETRY-INTERVAL"><code class="varname">wal_retrieve_retry_interval</code></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="logical-replication-security.html" title="31.9. Безопасность">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="logical-replication.html" title="Глава 31. Логическая репликация">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="logical-replication-quick-setup.html" title="31.11. Быстрая настройка">След.</a></td></tr><tr><td width="40%" align="left" valign="top">31.9. Безопасность </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 31.11. Быстрая настройка</td></tr></table></div></body></html>