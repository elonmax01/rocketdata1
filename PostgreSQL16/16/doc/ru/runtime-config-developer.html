<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.17. Параметры для разработчиков</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="runtime-config-custom.html" title="20.16. Внесистемные параметры" /><link rel="next" href="runtime-config-short.html" title="20.18. Краткие аргументы" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">20.17. Параметры для разработчиков</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-custom.html" title="20.16. Внесистемные параметры">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><th width="60%" align="center">Глава 20. Настройка сервера</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="runtime-config-short.html" title="20.18. Краткие аргументы">След.</a></td></tr></table><hr /></div><div class="sect1" id="RUNTIME-CONFIG-DEVELOPER"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.17. Параметры для разработчиков <a href="#RUNTIME-CONFIG-DEVELOPER" class="id_link">#</a></h2></div></div></div><p>Следующие параметры предназначены для тестирования в процессе разработки, и их никогда не следует применять в производственной среде. (Однако в некоторых случаях они могут помочь восстановить сильно повреждённые базы данных.) По этим причинам они отсутствуют в примере файла <code class="filename">postgresql.conf</code>. Заметьте, что для использования многих из этих параметров требуются специальные флаги компиляции.</p><div class="variablelist"><dl class="variablelist"><dt id="GUC-ALLOW-IN-PLACE-TABLESPACES"><span class="term"><code class="varname">allow_in_place_tablespaces</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.1.1.3" class="indexterm"></a></span> <a href="#GUC-ALLOW-IN-PLACE-TABLESPACES" class="id_link">#</a></dt><dd><p>Позволяет создавать табличные пространства как каталоги в <code class="filename">pg_tblspc</code>, когда в качестве пути расположения в команде <code class="command">CREATE TABLESPACE</code> задана пустая строка. Эта возможность предназначена для тестирования сценариев репликации, когда ведущий и ведомый серверы работают на одном компьютере. Существование каталогов в этом месте может оказаться неожиданным для средств резервного копирования, которые рассчитывают найти там только символические ссылки. Изменять этот параметр могут только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code>.</p></dd><dt id="GUC-ALLOW-SYSTEM-TABLE-MODS"><span class="term"><code class="varname">allow_system_table_mods</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.2.1.3" class="indexterm"></a></span> <a href="#GUC-ALLOW-SYSTEM-TABLE-MODS" class="id_link">#</a></dt><dd><p>Разрешает модификации структуры системных таблиц, а также некоторые другие потенциально опасные операции с системными таблицами. Если данный параметр отключён, эти действия не разрешены даже суперпользователям. Непродуманное использование этого параметра чревато неисправимыми повреждениями данных и разрушением всей СУБД. Изменить этот параметр могут только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code>.</p></dd><dt id="GUC-BACKTRACE-FUNCTIONS"><span class="term"><code class="varname">backtrace_functions</code> (<code class="type">string</code>) <a id="id-1.6.7.20.3.3.1.3" class="indexterm"></a></span> <a href="#GUC-BACKTRACE-FUNCTIONS" class="id_link">#</a></dt><dd><p>В этом параметре задаётся разделённый запятыми список имён функций C. В случае возникновения ошибки в функции, имя которой присутствует в этом списке, в журнал сервера помимо сообщения об ошибке будет выводиться трассировка стека. Это может быть полезно для отладки в определённых местах исходного кода.</p><p>Поддержка трассировки стека имеется не на всех платформах, а информационная ценность трассировки зависит от параметров компиляции.</p><p>Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр.</p></dd><dt id="GUC-DEBUG-DISCARD-CACHES"><span class="term"><code class="varname">debug_discard_caches</code> (<code class="type">integer</code>) <a id="id-1.6.7.20.3.4.1.3" class="indexterm"></a></span> <a href="#GUC-DEBUG-DISCARD-CACHES" class="id_link">#</a></dt><dd><p>Если установлено значение <code class="literal">1</code>, каждая запись кеша системного каталога становится недействительной при первой же возможности, независимо от того, произошло ли на самом деле что-то, что могло бы сделать её недействительной. В результате кеширование системных каталогов фактически отключается, поэтому сервер будет работать очень медленно. При увеличении значения этого параметра аннулирование кеша производится рекурсивно, что приводит к ещё большему замедлению и полезно только для тестирование собственно логики кеширования. Значение по умолчанию — <code class="literal">0</code> — включает обычное поведение кеширования каталога.</p><p>Этот параметр может быть очень полезен при выявлении трудновоспроизводимых ошибок, связанных с одновременными изменениями в каталоге, но редко бывает нужен в других случаях. Подробнее он описан в файлах исходного кода <code class="filename">visible.c</code> и <code class="filename">pg_config_manual.h</code>.</p><p>Этот параметр поддерживается, если при компиляции был определён макрос <code class="symbol">DISCARD_CACHES_ENABLED</code> (он определяется автоматически при выполнении <span class="application">configure</span> с ключом <code class="option">--enable-cassert</code>). В обычных сборках его значение всегда будет <code class="literal">0</code>; при попытке изменить это значение возникнет ошибка.</p></dd><dt id="GUC-DEBUG-IO-DIRECT"><span class="term"><code class="varname">debug_io_direct</code> (<code class="type">string</code>) <a id="id-1.6.7.20.3.5.1.3" class="indexterm"></a></span> <a href="#GUC-DEBUG-IO-DIRECT" class="id_link">#</a></dt><dd><p>Обращается к ядру для минимизации кеширования данных отношений и файлов WAL, используя <code class="literal">O_DIRECT</code> (большинство Unix-подобных систем), <code class="literal">F_NOCACHE</code> (macOS) или <code class="literal">FILE_FLAG_NO_BUFFERING</code> (Windows).</p><p>Значение может представлять собой пустую строку (по умолчанию), чтобы отключить использование прямого ввода/вывода, или список операций, разделённых запятыми, в которых может использоваться прямой ввод/вывод. Варианты операций: <code class="literal">data</code> для основных файлов данных, <code class="literal">wal</code> для файлов WAL и <code class="literal">wal_init</code> для файлов WAL при первоначальном размещении.</p><p>Некоторые операционные и файловые системы не поддерживают прямой ввод/вывод, так что нестандартные значения параметра могут не приниматься при запуске или вызывать ошибки.</p><p>В настоящее время эта функциональность снижает производительность и предназначена только для тестирования.</p></dd><dt id="GUC-DEBUG-PARALLEL-QUERY"><span class="term"><code class="varname">debug_parallel_query</code> (<code class="type">enum</code>) <a id="id-1.6.7.20.3.6.1.3" class="indexterm"></a></span> <a href="#GUC-DEBUG-PARALLEL-QUERY" class="id_link">#</a></dt><dd><p>Позволяет распараллеливать запрос в целях тестирования, даже когда от этого не ожидается никакого выигрыша в скорости. Допустимые значения параметра <code class="varname">debug_parallel_query</code> — <code class="literal">off</code> (использовать параллельный режим только когда ожидается увеличение производительности), <code class="literal">on</code> (принудительно распараллеливать все запросы, для которых это безопасно) и <code class="literal">regress</code> (как <code class="literal">on</code>, но с дополнительными изменениями поведения, описанными ниже).</p><p>Говоря точнее, со значением <code class="literal">on</code> узел <code class="literal">Gather</code> добавляется в вершину любого плана запроса, для которого допускается распараллеливание, так что запрос выполняется внутри параллельного исполнителя. Даже когда параллельный исполнитель недоступен или не может быть использован, такие операции, как запуск подтранзакции, которые не должны выполняться в контексте параллельного запроса, не будут выполняться в этом режиме, если только планировщик не решит, что это приведёт к ошибке запроса. Если при включении этого параметра возникают ошибки или выдаются неожиданные результаты, вероятно, некоторые функции, задействованные в этом запросе, нужно пометить как <code class="literal">PARALLEL UNSAFE</code> (или, возможно, <code class="literal">PARALLEL RESTRICTED</code>).</p><p>Значение <code class="literal">regress</code> действует так же, как и значение <code class="literal">on</code>, с некоторыми дополнительными особенностями, предназначенными для облегчения автоматического регрессионного тестирования. Обычно сообщения от параллельных исполнителей включают строку контекста, отмечающую это, но значение <code class="literal">regress</code> подавляет эту строку, так что вывод не отличается от выполнения в не параллельном режиме. Кроме того, узлы <code class="literal">Gather</code>, добавляемые в планы с этим значением параметра, скрываются в выводе <code class="literal">EXPLAIN</code>, чтобы вывод соответствовал тому, что будет получен при отключении этого параметра (со значением <code class="literal">off</code>).</p></dd><dt id="GUC-IGNORE-SYSTEM-INDEXES"><span class="term"><code class="varname">ignore_system_indexes</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.7.1.3" class="indexterm"></a></span> <a href="#GUC-IGNORE-SYSTEM-INDEXES" class="id_link">#</a></dt><dd><p>Отключает использование индексов при чтении системных таблиц (при этом индексы всё же будут изменяться при записи в эти таблицы). Это полезно для восстановления работоспособности при повреждённых системных индексах. Этот параметр нельзя изменить после запуска сеанса.</p></dd><dt id="GUC-POST-AUTH-DELAY"><span class="term"><code class="varname">post_auth_delay</code> (<code class="type">integer</code>) <a id="id-1.6.7.20.3.8.1.3" class="indexterm"></a></span> <a href="#GUC-POST-AUTH-DELAY" class="id_link">#</a></dt><dd><p>Этот параметр задаёт задержку при запуске нового серверного процесса после выполнения процедуры аутентификации. Он предназначен для того, чтобы разработчики имели возможность подключить отладчик к серверному процессу. Если это значение задаётся без единиц измерения, оно считается заданным в секундах. При нулевом значении (по умолчанию) задержка отсутствует. Этот параметр нельзя изменить после начала сеанса.</p></dd><dt id="GUC-PRE-AUTH-DELAY"><span class="term"><code class="varname">pre_auth_delay</code> (<code class="type">integer</code>) <a id="id-1.6.7.20.3.9.1.3" class="indexterm"></a></span> <a href="#GUC-PRE-AUTH-DELAY" class="id_link">#</a></dt><dd><p>Этот параметр задаёт задержку, добавляемую сразу после порождения нового серверного процесса, до выполнения процедуры аутентификации. Он предназначен для того, чтобы разработчики имели возможность подключить отладчик к серверному процессу при решении проблем с аутентификацией. Если это значение задаётся без единиц измерения, оно считается заданным в секундах. При нулевом значении (по умолчанию) задержка отсутствует. Задать этот параметр можно только в <code class="filename">postgresql.conf</code> или в командной строке при запуске сервера.</p></dd><dt id="GUC-TRACE-NOTIFY"><span class="term"><code class="varname">trace_notify</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.10.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-NOTIFY" class="id_link">#</a></dt><dd><p>Включает вывод очень подробной отладочной информации при выполнении команд <code class="command">LISTEN</code> и <code class="command">NOTIFY</code>. Чтобы эти сообщения передавались клиенту или в журнал сервера, параметр <a class="xref" href="runtime-config-client.html#GUC-CLIENT-MIN-MESSAGES">client_min_messages</a> или <a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a>, соответственно, должен иметь значение <code class="literal">DEBUG1</code> или ниже.</p></dd><dt id="GUC-TRACE-RECOVERY-MESSAGES"><span class="term"><code class="varname">trace_recovery_messages</code> (<code class="type">enum</code>) <a id="id-1.6.7.20.3.11.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-RECOVERY-MESSAGES" class="id_link">#</a></dt><dd><p>Включает вывод в журнал отладочных сообщений, связанных с восстановлением, которые иначе не выводятся. Этот параметр позволяет пользователю переопределить обычное значение <a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a>, но только для специфических сообщений. Он предназначен для отладки режима горячего резерва. Допустимые значения: <code class="literal">DEBUG5</code>, <code class="literal">DEBUG4</code>, <code class="literal">DEBUG3</code>, <code class="literal">DEBUG2</code>, <code class="literal">DEBUG1</code> и <code class="literal">LOG</code>. Значение по умолчанию, <code class="literal">LOG</code>, никак не влияет на запись этих сообщений в журнал. С другими значениями отладочные сообщения, связанные с восстановлением, имеющие заданный приоритет или выше, выводятся, как если бы они имели приоритет <code class="literal">LOG</code>; при стандартных значениях <code class="varname">log_min_messages</code> это означает, что они будут фиксироваться в журнале сервера. Задать этот параметр можно только в <code class="filename">postgresql.conf</code> или в командной строке при запуске сервера.</p></dd><dt id="GUC-TRACE-SORT"><span class="term"><code class="varname">trace_sort</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.12.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-SORT" class="id_link">#</a></dt><dd><p>Включает вывод информации об использовании ресурсов во время операций сортировки. Этот параметр доступен, только если при сборке <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">TRACE_SORT</code>. (По умолчанию макрос <code class="symbol">TRACE_SORT</code> определён.)</p></dd><dt id="GUC-TRACE-LOCKS"><span class="term"><code class="varname">trace_locks</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.13.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-LOCKS" class="id_link">#</a></dt><dd><p>Включает вывод подробных сведений о блокировках. В эти сведения входит вид операции блокировки, тип блокировки и уникальный идентификатор объекта, который блокируется или разблокируется. Кроме того, в их составе выводятся битовые маски для типов блокировок, уже полученных для данного объекта, и для типов блокировок, ожидающих его освобождения. В дополнение к этому выводится количество полученных и ожидающих блокировок для каждого типа блокировок, а также их общее количество. Ниже показан пример вывода в журнал: </p><pre class="screen">
LOG:  LockAcquire: new: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(AccessShareLock)
LOG:  GrantLock: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(2) req(1,0,0,0,0,0,0)=1 grant(1,0,0,0,0,0,0)=1
      wait(0) type(AccessShareLock)
LOG:  UnGrantLock: updated: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(AccessShareLock)
LOG:  CleanUpLock: deleting: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(INVALID)
</pre><p> Подробнее о структуре выводимой информации можно узнать в <code class="filename">src/include/storage/lock.h</code>.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-TRACE-LWLOCKS"><span class="term"><code class="varname">trace_lwlocks</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.14.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-LWLOCKS" class="id_link">#</a></dt><dd><p>Включает вывод информации об использовании легковесных блокировок. Такие блокировки предназначены в основном для взаимоисключающего доступа к общим структурам данных в памяти.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-TRACE-USERLOCKS"><span class="term"><code class="varname">trace_userlocks</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.15.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-USERLOCKS" class="id_link">#</a></dt><dd><p>Включает вывод информации об использовании пользовательских блокировок. Она выводится в том же формате, что и с <code class="symbol">trace_locks</code>, но по рекомендательным блокировкам.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-TRACE-LOCK-OIDMIN"><span class="term"><code class="varname">trace_lock_oidmin</code> (<code class="type">integer</code>) <a id="id-1.6.7.20.3.16.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-LOCK-OIDMIN" class="id_link">#</a></dt><dd><p>Если этот параметр установлен, при трассировке блокировок не будут отслеживаться таблицы с OID меньше заданного (это используется для исключения из трассировки системных таблиц).</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-TRACE-LOCK-TABLE"><span class="term"><code class="varname">trace_lock_table</code> (<code class="type">integer</code>) <a id="id-1.6.7.20.3.17.1.3" class="indexterm"></a></span> <a href="#GUC-TRACE-LOCK-TABLE" class="id_link">#</a></dt><dd><p>Безусловно трассировать блокировки для таблицы с заданным OID.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-DEBUG-DEADLOCKS"><span class="term"><code class="varname">debug_deadlocks</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.18.1.3" class="indexterm"></a></span> <a href="#GUC-DEBUG-DEADLOCKS" class="id_link">#</a></dt><dd><p>Включает вывод информации обо всех текущих блокировках при тайм-ауте взаимоблокировки.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">LOCK_DEBUG</code>.</p></dd><dt id="GUC-LOG-BTREE-BUILD-STATS"><span class="term"><code class="varname">log_btree_build_stats</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.19.1.3" class="indexterm"></a></span> <a href="#GUC-LOG-BTREE-BUILD-STATS" class="id_link">#</a></dt><dd><p>Включает вывод статистики использования системных ресурсов (памяти и процессора) при различных операциях с B-деревом.</p><p>Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">BTREE_BUILD_STATS</code>.</p></dd><dt id="GUC-WAL-CONSISTENCY-CHECKING"><span class="term"><code class="varname">wal_consistency_checking</code> (<code class="type">string</code>) <a id="id-1.6.7.20.3.20.1.3" class="indexterm"></a></span> <a href="#GUC-WAL-CONSISTENCY-CHECKING" class="id_link">#</a></dt><dd><p>Этот параметр предназначен для проверки ошибок в процедурах воспроизведения WAL. Когда он включён, в записи WAL добавляются полные образы страниц всех изменяемых буферов, Когда запись впоследствии воспроизводится, система сначала применяет эту запись, а затем проверяет, соответствуют ли буферы, изменённые записью, сохранённым образам. В определённых случаях (например, во вспомогательных битах) небольшие изменения допускаются и будут игнорироваться. Если выявляются неожиданные различия, это считается критической ошибкой и восстановление прерывается.</p><p>По умолчанию значение этого параметра — пустая строка, так что эта функциональность отключена. Его значением может быть <code class="literal">all</code> (будут проверяться все записи) или список имён менеджеров ресурсов через запятую (будут проверяться записи, выдаваемые этими менеджерами). В настоящее время поддерживаются менеджеры <code class="literal">heap</code>, <code class="literal">heap2</code>, <code class="literal">btree</code>, <code class="literal">hash</code>, <code class="literal">gin</code>, <code class="literal">gist</code>, <code class="literal">sequence</code>, <code class="literal">spgist</code>, <code class="literal">brin</code> и <code class="literal">generic</code>. В расширениях могут определяться и другие менеджеры ресурсов. Изменять этот параметр могут только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code>.</p></dd><dt id="GUC-WAL-DEBUG"><span class="term"><code class="varname">wal_debug</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.21.1.3" class="indexterm"></a></span> <a href="#GUC-WAL-DEBUG" class="id_link">#</a></dt><dd><p>Включает вывод отладочной информации, связанной с WAL. Этот параметр доступен, только если при компиляции <span class="productname">PostgreSQL</span> был определён макрос <code class="symbol">WAL_DEBUG</code>.</p></dd><dt id="GUC-IGNORE-CHECKSUM-FAILURE"><span class="term"><code class="varname">ignore_checksum_failure</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.22.1.3" class="indexterm"></a></span> <a href="#GUC-IGNORE-CHECKSUM-FAILURE" class="id_link">#</a></dt><dd><p>Этот параметр действует, только если включён <a class="xref" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">Контрольные суммы данных</a>.</p><p>При обнаружении ошибок контрольных сумм при чтении <span class="productname">PostgreSQL</span> обычно сообщает об ошибке и прерывает текущую транзакцию. Если параметр <code class="varname">ignore_checksum_failure</code> включён, система игнорирует проблему (но всё же предупреждает о ней) и продолжает обработку. Это поведение может <span class="emphasis"><em>привести к краху, распространению или сокрытию повреждения данных и другим серьёзными проблемам</em></span>. Однако включив его, вы можете обойти ошибку и получить неповреждённые данные, которые могут находиться в таблице, если цел заголовок блока. Если же повреждён заголовок, будет выдана ошибка, даже когда этот параметр включён. По умолчанию этот параметр отключён (имеет значение <code class="literal">off</code>). Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр.</p></dd><dt id="GUC-ZERO-DAMAGED-PAGES"><span class="term"><code class="varname">zero_damaged_pages</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.23.1.3" class="indexterm"></a></span> <a href="#GUC-ZERO-DAMAGED-PAGES" class="id_link">#</a></dt><dd><p>При выявлении повреждённого заголовка страницы <span class="productname">PostgreSQL</span> обычно сообщает об ошибке и прерывает текущую транзакцию. Если параметр <code class="varname">zero_damaged_pages</code> включён, вместо этого система выдаёт предупреждение, обнуляет повреждённую страницу в памяти и продолжает обработку. Это поведение <span class="emphasis"><em>разрушает данные</em></span>, а именно все строки в повреждённой странице. Однако включив его, вы можете обойти ошибку и получить строки из неповреждённых страниц, которые могут находиться в таблице. Это бывает полезно для восстановления данных, испорченных в результате аппаратной или программной ошибки. Обычно включать его следует только тогда, когда не осталось никакой другой надежды на восстановление данных в повреждённых страницах таблицы. Обнулённые страницы не сохраняются на диск, поэтому прежде чем выключать этот параметр, рекомендуется пересоздать проблемные таблицы или индексы. По умолчанию этот параметр отключён (имеет значение <code class="literal">off</code>). Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр.</p></dd><dt id="GUC-IGNORE-INVALID-PAGES"><span class="term"><code class="varname">ignore_invalid_pages</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.24.1.3" class="indexterm"></a></span> <a href="#GUC-IGNORE-INVALID-PAGES" class="id_link">#</a></dt><dd><p>Когда этот параметр имеет значение <code class="literal">off</code> (по умолчанию), обнаружение в WAL записей, ссылающихся на некорректные страницы, в процессе восстановления приводит к остановке <span class="productname">PostgreSQL</span> с ошибкой критического уровня и, как следствие, к прерыванию восстановления. Когда параметр <code class="varname">ignore_invalid_pages</code> включён (<code class="literal">on</code>), система игнорирует подобные недействительные ссылки в записях WAL (но всё же выдаёт предупреждения) и продолжает восстановление. Это поведение может <span class="emphasis"><em>привести к краху, потере данных, распространению или сокрытию повреждения данных и другим серьёзными проблемам</em></span>. Однако включив этот параметр, вы можете обойти критическую ошибку и закончить восстановление, чтобы сервер всё же запустился. Задать этот параметр можно только при запуске сервера. Действует он только при восстановлении или в режиме ведомого.</p></dd><dt id="GUC-JIT-DEBUGGING-SUPPORT"><span class="term"><code class="varname">jit_debugging_support</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.25.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-DEBUGGING-SUPPORT" class="id_link">#</a></dt><dd><p>При наличии требуемой функциональности LLVM регистрировать генерируемые функции в <span class="productname">GDB</span>. Это позволяет упростить отладку. Значение по умолчанию — <code class="literal">off</code> (выкл.). Изменить этот параметр можно только при запуске сервера.</p></dd><dt id="GUC-JIT-DUMP-BITCODE"><span class="term"><code class="varname">jit_dump_bitcode</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.26.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-DUMP-BITCODE" class="id_link">#</a></dt><dd><p>Записывать сгенерированный <span class="productname">LLVM</span> IR-код в файловую систему, в каталог <a class="xref" href="runtime-config-file-locations.html#GUC-DATA-DIRECTORY">data_directory</a>. Это полезно только для работы с внутренним механизмом JIT. Значение по умолчанию — <code class="literal">off</code> (выкл.). Только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code> могут изменить этот параметр.</p></dd><dt id="GUC-JIT-EXPRESSIONS"><span class="term"><code class="varname">jit_expressions</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.27.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-EXPRESSIONS" class="id_link">#</a></dt><dd><p>Определяет, будут ли JIT-компилироваться выражения, когда JIT-компиляция включена (см. <a class="xref" href="jit-decision.html" title="32.2. Когда применять JIT?">Раздел 32.2</a>). Значение по умолчанию — <code class="literal">on</code> (вкл.).</p></dd><dt id="GUC-JIT-PROFILING-SUPPORT"><span class="term"><code class="varname">jit_profiling_support</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.28.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-PROFILING-SUPPORT" class="id_link">#</a></dt><dd><p>При наличии требуемой функциональности LLVM выдавать данные, необходимые для профилирования с помощью <span class="productname">perf</span> функций, которые генерирует JIT. Выходные файлы записываются в каталог <code class="filename">~/.debug/jit/</code>; удалять их при желании должен сам пользователь. Значение по умолчанию — <code class="literal">off</code> (выкл.). Задать этот параметр можно только при запуске сервера.</p></dd><dt id="GUC-JIT-TUPLE-DEFORMING"><span class="term"><code class="varname">jit_tuple_deforming</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.29.1.3" class="indexterm"></a></span> <a href="#GUC-JIT-TUPLE-DEFORMING" class="id_link">#</a></dt><dd><p>Определяет, будет ли JIT-компилироваться преобразование кортежей, когда JIT-компиляция включена (см. <a class="xref" href="jit-decision.html" title="32.2. Когда применять JIT?">Раздел 32.2</a>). Значение по умолчанию — <code class="literal">on</code> (вкл.).</p></dd><dt id="GUC-REMOVE-TEMP-FILES-AFTER-CRASH"><span class="term"><code class="varname">remove_temp_files_after_crash</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.30.1.3" class="indexterm"></a></span> <a href="#GUC-REMOVE-TEMP-FILES-AFTER-CRASH" class="id_link">#</a></dt><dd><p>Если этот параметр включён (состояние по умолчанию), <span class="productname">PostgreSQL</span> автоматически удаляет временные файлы после сбоя сервера. Если он выключен, файлы будут сохранены и могут использоваться, например, для отладки. Однако повторяющиеся сбои могут привести к накоплению бесполезных файлов. Этот параметр можно задать только в <code class="filename">postgresql.conf</code> или в командной строке при запуске сервера.</p></dd><dt id="GUC-SEND-ABORT-FOR-CRASH"><span class="term"><code class="varname">send_abort_for_crash</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.31.1.3" class="indexterm"></a></span> <a href="#GUC-SEND-ABORT-FOR-CRASH" class="id_link">#</a></dt><dd><p>По умолчанию после сбоя сервера управляющий процесс postmaster останавливает оставшиеся дочерние процессы, отправляя им сигналы <span class="systemitem">SIGQUIT</span>, что позволяет им завершить работу более или менее корректно. Если для этого параметра установлено значение <code class="literal">on</code>, вместо <span class="systemitem">SIGQUIT</span> отправляется <span class="systemitem">SIGABRT</span>. Обычно это приводит к созданию файла дампа памяти для каждого такого дочернего процесса. Это может быть удобно для исследования состояний других процессов после сбоя. Но такие файлы также могут занимать много места на диске в случае повторяющихся сбоев, поэтому не включайте параметр в системах без тщательного мониторинга. Имейте в виду, что автоматическое удаление дампов памяти не поддерживается. Этот параметр можно задать только в файле <code class="filename">postgresql.conf</code> или в командной строке при запуске сервера.</p></dd><dt id="GUC-SEND-ABORT-FOR-KILL"><span class="term"><code class="varname">send_abort_for_kill</code> (<code class="type">boolean</code>) <a id="id-1.6.7.20.3.32.1.3" class="indexterm"></a></span> <a href="#GUC-SEND-ABORT-FOR-KILL" class="id_link">#</a></dt><dd><p>По умолчанию после попытки остановить дочерний процесс, используя сигнал <span class="systemitem">SIGQUIT</span>, управляющий процесс postmaster ждёт пять секунд, а затем отправляет <span class="systemitem">SIGKILL</span> для немедленного завершения. Если для этого параметра установлено значение <code class="literal">on</code>, вместо <span class="systemitem">SIGKILL</span> отправляется <span class="systemitem">SIGABRT</span>. Обычно это приводит к созданию файла дампа памяти для каждого такого дочернего процесса. Это может быть удобно для исследования состояний <span class="quote">«<span class="quote">зависших</span>»</span> дочерних процессов. Но такие файлы также могут занимать много места на диске в случае повторяющихся сбоев, поэтому не включайте параметр в системах без тщательного мониторинга. Имейте в виду, что автоматическая очистка файлов дампа не поддерживается. Этот параметр можно задать только в файле <code class="filename">postgresql.conf</code> или в командной строке при запуске сервера.</p></dd><dt id="GUC-DEBUG-LOGICAL-REPLICATION-STREAMING"><span class="term"><code class="varname">debug_logical_replication_streaming</code> (<code class="type">enum</code>) <a id="id-1.6.7.20.3.33.1.3" class="indexterm"></a></span> <a href="#GUC-DEBUG-LOGICAL-REPLICATION-STREAMING" class="id_link">#</a></dt><dd><p>Допустимые значения: <code class="literal">buffered</code> и <code class="literal">immediate</code>. По умолчанию используется <code class="literal">buffered</code>. Этот параметр предназначен для тестирования логического декодирования и репликации больших транзакций. Параметр <code class="varname">debug_logical_replication_streaming</code> на публикующем сервере и на подписчике работает по-разному:</p><p>На стороне публикующего сервера <code class="varname">debug_logical_replication_streaming</code> позволяет выполнять потоковую передачу или сериализацию изменений сразу же при логическом декодировании. Если установлено значение <code class="literal">immediate</code>, каждое изменение передаётся в потоковом режиме, если подписка была создана с параметром <a class="link" href="sql-createsubscription.html#SQL-CREATESUBSCRIPTION-WITH-STREAMING"><code class="literal">streaming</code></a>, в противном случае изменения сериализуются. Если установлено значение <code class="literal">buffered</code>, при декодировании изменения передаются в потоке или сериализуются при достижении значения <code class="varname">logical_decoding_work_mem</code>.</p><p>На стороне подписчика, если для параметра <code class="literal">streaming</code> задано значение <code class="literal">parallel</code>, можно использовать <code class="varname">debug_logical_replication_streaming</code>, чтобы указать ведущему процессу применения изменений отправлять изменения в очередь общей памяти или для сериализации всех изменений в файле. Если задано значение <code class="literal">buffered</code>, ведущий процесс отправляет изменения параллельным рабочим процессам применения изменений через очередь общей памяти. Если установлено значение <code class="literal">immediate</code>, ведущий процесс сериализует все изменения в файлы и уведомляет параллельные рабочие процессы применения изменений о необходимости их чтения и применения в конце транзакции.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-custom.html" title="20.16. Внесистемные параметры">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-short.html" title="20.18. Краткие аргументы">След.</a></td></tr><tr><td width="40%" align="left" valign="top">20.16. Внесистемные параметры </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 20.18. Краткие аргументы</td></tr></table></div></body></html>