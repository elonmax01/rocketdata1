<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ALTER DATABASE</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-alterconversion.html" title="ALTER CONVERSION" /><link rel="next" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">ALTER DATABASE</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-alterconversion.html" title="ALTER CONVERSION">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-ALTERDATABASE"><div class="titlepage"></div><a id="id-1.9.3.7.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">ALTER DATABASE</span></h2><p>ALTER DATABASE — изменить атрибуты базы данных</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">ALTER DATABASE <em class="replaceable"><code>имя</code></em> [ [ WITH ] <em class="replaceable"><code>параметр</code></em> [ ... ] ]

<span class="phrase">Здесь <em class="replaceable"><code>параметр</code></em>:</span>

    ALLOW_CONNECTIONS <em class="replaceable"><code>разр_подключения</code></em>
    CONNECTION LIMIT <em class="replaceable"><code>предел_подключений</code></em>
    IS_TEMPLATE <em class="replaceable"><code>это_шаблон</code></em>

ALTER DATABASE <em class="replaceable"><code>имя</code></em> RENAME TO <em class="replaceable"><code>новое_имя</code></em>

ALTER DATABASE <em class="replaceable"><code>имя</code></em> OWNER TO { <em class="replaceable"><code>новый_владелец</code></em> | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER DATABASE <em class="replaceable"><code>имя</code></em> SET TABLESPACE <em class="replaceable"><code>новое_табл_пространство</code></em>

ALTER DATABASE <em class="replaceable"><code>имя</code></em> REFRESH COLLATION VERSION

ALTER DATABASE <em class="replaceable"><code>имя</code></em> SET <em class="replaceable"><code>параметр_конфигурации</code></em> { TO | = } { <em class="replaceable"><code>значение</code></em> | DEFAULT }
ALTER DATABASE <em class="replaceable"><code>имя</code></em> SET <em class="replaceable"><code>параметр_конфигурации</code></em> FROM CURRENT
ALTER DATABASE <em class="replaceable"><code>имя</code></em> RESET <em class="replaceable"><code>параметр_конфигурации</code></em>
ALTER DATABASE <em class="replaceable"><code>имя</code></em> RESET ALL</pre></div><div class="refsect1" id="id-1.9.3.7.5"><h2>Описание</h2><p><code class="command">ALTER DATABASE</code> изменяет атрибуты базы данных.</p><p>Первая форма оператора меняет параметры на уровне базы данных. (Подробнее описано ниже.) Изменять эти параметры может только владелец базы данных или суперпользователь.</p><p>Вторая форма меняет имя базы данных. Переименовать базу данных может только владелец БД или суперпользователь (не суперпользователю требуется также право <code class="literal">CREATEDB</code>). Переименовать текущую базу данных нельзя. (Если вам нужно сделать это, сначала подключитесь к другой базе.)</p><p>Третья форма меняет владельца базы данных. Чтобы сменить владельца базы, необходимо иметь право <code class="literal">SET ROLE</code> для новой роли-владельца, и кроме того, иметь право <code class="literal">CREATEDB</code>. (Заметьте, что суперпользователи наделяются всеми этими правами автоматически.)</p><p>Четвёртая форма меняет табличное пространство по умолчанию для базы данных. Произвести это изменение может только её владелец или суперпользователь; кроме того, необходимо иметь право для создания нового табличного пространства. Эта команда физически переносит все таблицы или индексы из прежнего основного табличного пространства БД в новое. Новое табличное пространство должно быть пустым для этой базы данных и к ней никто не должен быть подключён. Таблицы и индексы, находящиеся не в основном табличном пространстве, при этом не затрагиваются.</p><p>Остальные формы меняют значение по умолчанию конфигурационных переменных времени выполнения для базы данных <span class="productname">PostgreSQL</span>. Когда устанавливается следующий сеанс работы с указанной базой данных, заданное этой командой значение становится значением по умолчанию. Значения переменных, заданные для базы данных, переопределяют значения, определённые в <code class="filename">postgresql.conf</code> или полученные через командную строку <code class="command">postgres</code>. Менять сеансовые значения переменных для базы данных может только её владелец или суперпользователь. Некоторые параметры изменить таким образом нельзя, а некоторые может изменить только суперпользователь.</p></div><div class="refsect1" id="id-1.9.3.7.6"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>имя</code></em></span></dt><dd><p>Имя базы данных, атрибуты которой изменяются.</p></dd><dt><span class="term"><em class="replaceable"><code>разр_подключения</code></em></span></dt><dd><p>Если false, никто не сможет подключаться к этой базе данных.</p></dd><dt><span class="term"><em class="replaceable"><code>предел_подключений</code></em></span></dt><dd><p>Число разрешённых одновременно подключений к этой базе данных (-1 снимает ограничение).</p></dd><dt><span class="term"><em class="replaceable"><code>это_шаблон</code></em></span></dt><dd><p>Если true, базу данных сможет клонировать любой пользователь с правами <code class="literal">CREATEDB</code>; в противном случае клонировать эту базу смогут только суперпользователи и её владелец.</p></dd><dt><span class="term"><em class="replaceable"><code>новое_имя</code></em></span></dt><dd><p>Новое имя базы данных.</p></dd><dt><span class="term"><em class="replaceable"><code>новый_владелец</code></em></span></dt><dd><p>Новый владелец базы данных.</p></dd><dt><span class="term"><em class="replaceable"><code>новое_табл_пространство</code></em></span></dt><dd><p>Новое основное табличное пространство базы данных.</p><p>Эту форму команды нельзя выполнять внутри блока транзакции.</p></dd><dt><span class="term"><code class="literal">REFRESH COLLATION VERSION</code></span></dt><dd><p>Обновить версию правила сортировки для базы данных. Подробнее в <a class="xref" href="sql-altercollation.html#SQL-ALTERCOLLATION-NOTES" title="Замечания">Замечания</a>.</p></dd><dt><span class="term"><em class="replaceable"><code>параметр_конфигурации</code></em><br /></span><span class="term"><em class="replaceable"><code>значение</code></em></span></dt><dd><p>Устанавливает сеансовое значение по умолчанию для указанного параметра конфигурации. Если указывается <em class="replaceable"><code>значение</code></em> <code class="literal">DEFAULT</code> или равнозначный вариант, <code class="literal">RESET</code>, определение параметра на уровне базы данных удаляется, так что в новых сеансах будет действовать значение по умолчанию, определённое на уровне системы. Для очистки всех значений параметров на уровне базы данных выполните <code class="literal">RESET ALL</code>. <code class="literal">SET FROM CURRENT</code> устанавливает значение параметра на уровне базы данных из текущего значения в активном сеансе.</p><p>За подробными сведениями об именах и значениях параметров обратитесь к <a class="xref" href="sql-set.html" title="SET"><span class="refentrytitle">SET</span></a> и <a class="xref" href="runtime-config.html" title="Глава 20. Настройка сервера">Главе 20</a>.</p></dd></dl></div></div><div class="refsect1" id="id-1.9.3.7.7"><h2>Замечания</h2><p>Также возможно связать параметры сеанса не с базой данных, а с определённой ролью; см. <a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>. В случае конфликта параметры на уровне роли переопределяют параметры на уровне базы данных.</p></div><div class="refsect1" id="id-1.9.3.7.8"><h2>Примеры</h2><p>Отключение сканирования индекса по умолчанию в базе данных <code class="literal">test</code>: </p><pre class="programlisting">ALTER DATABASE test SET enable_indexscan TO off;</pre></div><div class="refsect1" id="id-1.9.3.7.9"><h2>Совместимость</h2><p>Оператор <code class="command">ALTER DATABASE</code> является расширением <span class="productname">PostgreSQL</span>.</p></div><div class="refsect1" id="id-1.9.3.7.10"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-createdatabase.html" title="CREATE DATABASE"><span class="refentrytitle">CREATE DATABASE</span></a>, <a class="xref" href="sql-dropdatabase.html" title="DROP DATABASE"><span class="refentrytitle">DROP DATABASE</span></a>, <a class="xref" href="sql-set.html" title="SET"><span class="refentrytitle">SET</span></a>, <a class="xref" href="sql-createtablespace.html" title="CREATE TABLESPACE"><span class="refentrytitle">CREATE TABLESPACE</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-alterconversion.html" title="ALTER CONVERSION">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES">След.</a></td></tr><tr><td width="40%" align="left" valign="top">ALTER CONVERSION </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> ALTER DEFAULT PRIVILEGES</td></tr></table></div></body></html>