<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.3. Создание базы данных</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="tutorial-arch.html" title="1.2. Основы архитектуры" /><link rel="next" href="tutorial-accessdb.html" title="1.4. Подключение к базе данных" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">1.3. Создание базы данных</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="tutorial-arch.html" title="1.2. Основы архитектуры">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="tutorial-start.html" title="Глава 1. Начало">Наверх</a></td><th width="60%" align="center">Глава 1. Начало</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="tutorial-accessdb.html" title="1.4. Подключение к базе данных">След.</a></td></tr></table><hr /></div><div class="sect1" id="TUTORIAL-CREATEDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3. Создание базы данных <a href="#TUTORIAL-CREATEDB" class="id_link">#</a></h2></div></div></div><a id="id-1.4.3.4.2" class="indexterm"></a><a id="id-1.4.3.4.3" class="indexterm"></a><p>Первое, как можно проверить, есть ли у вас доступ к серверу баз данных, — это попытаться создать базу данных. Работающий сервер <span class="productname">PostgreSQL</span> может управлять множеством баз данных, что позволяет создавать отдельные базы данных для разных проектов и пользователей.</p><p>Возможно, ваш администратор уже создал базу данных для вас. В этом случае вы можете пропустить этот этап и перейти к следующему разделу.</p><p>Для создания базы данных, в этом примере названной <code class="literal">mydb</code>, выполните следующую команду: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>createdb mydb</code></strong>
</pre><p> Если вы не увидите никаких сообщений, значит операция была выполнена успешно и продолжение этого раздела можно пропустить.</p><p>Если вы видите сообщение типа: </p><pre class="screen">
createdb: command not found
</pre><p>значит <span class="productname">PostgreSQL</span> не был установлен правильно. Либо он не установлен вообще, либо в путь поиска команд оболочки не включён его каталог. Попробуйте вызвать ту же команду, указав абсолютный путь: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>/usr/local/pgsql/bin/createdb mydb</code></strong>
</pre><p> У вас этот путь может быть другим. Свяжитесь с вашим администратором или проверьте, как были выполнены инструкции по установке, чтобы исправить ситуацию.</p><p>Ещё один возможный ответ: </p><pre class="screen">
createdb: ошибка: не удалось подключиться к серверу через сокет "/tmp/.s.PGSQL.5432":
No such file or directory
        Он действительно работает локально и принимает
        соединения через этот сокет?
</pre><p> Это означает, что сервер не работает или <code class="command">createdb</code> не может к нему подключиться. И в этом случае пересмотрите инструкции по установке или обратитесь к администратору.</p><p>Также вы можете получить сообщение: </p><pre class="screen">
createdb: ошибка: не удалось подключиться к серверу через сокет"/tmp/.s.PGSQL.5432":ВАЖНО:  роль "joe" не существует
</pre><p>где фигурирует ваше имя пользователя. Это говорит о том, что администратор не создал учётную запись <span class="productname">PostgreSQL</span> для вас. (Учётные записи <span class="productname">PostgreSQL</span> отличаются от учётных записей пользователей операционной системы.) Если вы сами являетесь администратором, прочитайте <a class="xref" href="user-manag.html" title="Глава 22. Роли базы данных">Главу 22</a>, где написано, как создавать учётные записи. Для создания нового пользователя вы должны стать пользователем операционной системы, под именем которого был установлен <span class="productname">PostgreSQL</span> (обычно это <code class="literal">postgres</code>). Также возможно, что вам назначено имя пользователя <span class="productname">PostgreSQL</span>, не совпадающее с вашим именем в ОС; в этом случае вам нужно явно указать ваше имя пользователя <span class="productname">PostgreSQL</span>, используя ключ <code class="option">-U</code> или установив переменную окружения <code class="envar">PGUSER</code>.</p><p>Если у вас есть учётная запись пользователя, но нет прав на создание базы данных, вы увидите сообщение: </p><pre class="screen">
createdb: ошибка: создать базу данных не удалось:
  ОШИБКА:  нет прав на создание базы данных
</pre><p> Создавать базы данных разрешено не всем пользователям. Если <span class="productname">PostgreSQL</span> отказывается создавать базы данных для вас, значит вам необходимо соответствующее разрешение. В этом случае обратитесь к вашему администратору. Если вы устанавливали <span class="productname">PostgreSQL</span> сами, то для целей этого введения вы должны войти в систему с именем пользователя, запускающего сервер БД. <a href="#ftn.id-1.4.3.4.10.4" class="footnote"><sup class="footnote" id="id-1.4.3.4.10.4">[1]</sup></a></p><p>Вы также можете создавать базы данных с другими именами. <span class="productname">PostgreSQL</span> позволяет создавать сколько угодно баз данных. Имена баз данных должны начинаться с буквы и быть не длиннее 63 символов. В качестве имени базы данных удобно использовать ваше текущее имя пользователя. Многие утилиты предполагают такое имя по умолчанию, так что вы сможете упростить ввод команд. Чтобы создать базу данных с таким именем, просто введите: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>createdb</code></strong>
</pre><p>Если вы больше не хотите использовать вашу базу данных, вы можете удалить её. Например, если вы владелец (создатель) базы данных <code class="literal">mydb</code>, вы можете уничтожить её, выполнив следующую команду: </p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>dropdb mydb</code></strong>
</pre><p> (Эта команда не считает именем БД по умолчанию имя текущего пользователя, вы должны явно указать его.) В результате будут физически удалены все файлы, связанные с базой данных, и так как отменить это действие нельзя, не выполняйте его, не подумав о последствиях.</p><p>Узнать о командах <code class="command">createdb</code> и <code class="command">dropdb</code> больше можно в справке <a class="xref" href="app-createdb.html" title="createdb"><span class="refentrytitle"><span class="application">createdb</span></span></a> и <a class="xref" href="app-dropdb.html" title="dropdb"><span class="refentrytitle"><span class="application">dropdb</span></span></a>.</p><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div id="ftn.id-1.4.3.4.10.4" class="footnote"><p><a href="#id-1.4.3.4.10.4" class="para"><sup class="para">[1] </sup></a>Объяснить это поведение можно так: Учётные записи пользователей <span class="productname">PostgreSQL</span> отличаются от учётных записей операционной системы. При подключении к базе данных вы можете указать, с каким именем пользователя <span class="productname">PostgreSQL</span> нужно подключаться. По умолчанию же используется имя, с которым вы зарегистрированы в операционной системе. При этом получается, что в <span class="productname">PostgreSQL</span> всегда есть учётная запись с именем, совпадающим с именем системного пользователя, запускающего сервер, и к тому же этот пользователь всегда имеет права на создание баз данных. И чтобы подключиться с именем этого пользователя <span class="productname">PostgreSQL</span>, необязательно входить с этим именем в систему, достаточно везде передавать его с параметром <code class="option">-U</code>.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-arch.html" title="1.2. Основы архитектуры">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial-start.html" title="Глава 1. Начало">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial-accessdb.html" title="1.4. Подключение к базе данных">След.</a></td></tr><tr><td width="40%" align="left" valign="top">1.2. Основы архитектуры </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 1.4. Подключение к базе данных</td></tr></table></div></body></html>