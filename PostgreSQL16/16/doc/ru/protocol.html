<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Глава 55. Клиент-серверный протокол</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="view-pg-views.html" title="54.35. pg_views" /><link rel="next" href="protocol-overview.html" title="55.1. Обзор" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">Глава 55. Клиент-серверный протокол</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="view-pg-views.html" title="54.35. pg_views">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="internals.html" title="Часть VII. Внутреннее устройство">Наверх</a></td><th width="60%" align="center">Часть VII. Внутреннее устройство</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="protocol-overview.html" title="55.1. Обзор">След.</a></td></tr></table><hr /></div><div class="chapter" id="PROTOCOL"><div class="titlepage"><div><div><h2 class="title">Глава 55. Клиент-серверный протокол</h2></div></div></div><div class="toc"><p><strong>Содержание</strong></p><dl class="toc"><dt><span class="sect1"><a href="protocol-overview.html">55.1. Обзор</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-MESSAGE-CONCEPTS">55.1.1. Обзор обмена сообщениями</a></span></dt><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-QUERY-CONCEPTS">55.1.2. Обзор расширенного выполнения запросов</a></span></dt><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-FORMAT-CODES">55.1.3. Форматы и коды форматов</a></span></dt></dl></dd><dt><span class="sect1"><a href="protocol-flow.html">55.2. Поток сообщений</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-START-UP">55.2.1. Запуск</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-SIMPLE-QUERY">55.2.2. Простое выполнение запросов</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY">55.2.3. Расширенное выполнение запросов</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-PIPELINING">55.2.4. Конвейеризация</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-FUNCTION-CALL">55.2.5. Вызов функций</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-COPY">55.2.6. Операции COPY</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-ASYNC">55.2.7. Асинхронные операции</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-CANCELING-REQUESTS">55.2.8. Отмена выполняющихся запросов</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-TERMINATION">55.2.9. Завершение</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-SSL">55.2.10. Защита сеанса с <acronym class="acronym">SSL</acronym></a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-GSSAPI">55.2.11. Защита сеанса с <acronym class="acronym">GSSAPI</acronym></a></span></dt></dl></dd><dt><span class="sect1"><a href="sasl-authentication.html">55.3. Аутентификация SASL</a></span></dt><dt><span class="sect1"><a href="protocol-replication.html">55.4. Протокол потоковой репликации</a></span></dt><dt><span class="sect1"><a href="protocol-logical-replication.html">55.5. Протокол логической потоковой репликации</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-REPLICATION-PARAMS">55.5.1. Параметры протокола логической потоковой репликации</a></span></dt><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-MESSAGES">55.5.2. Сообщения протокола логической репликации</a></span></dt><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-MESSAGES-FLOW">55.5.3. Поток сообщений протокола логической репликации</a></span></dt></dl></dd><dt><span class="sect1"><a href="protocol-message-types.html">55.6. Типы данных в сообщениях</a></span></dt><dt><span class="sect1"><a href="protocol-message-formats.html">55.7. Форматы сообщений</a></span></dt><dt><span class="sect1"><a href="protocol-error-fields.html">55.8. Поля сообщений с ошибками и замечаниями</a></span></dt><dt><span class="sect1"><a href="protocol-logicalrep-message-formats.html">55.9. Форматы сообщений логической репликации</a></span></dt><dt><span class="sect1"><a href="protocol-changes.html">55.10. Сводка изменений по сравнению с протоколом версии 2.0</a></span></dt></dl></div><a id="id-1.10.6.2" class="indexterm"></a><p>Клиенты и серверы <span class="productname">PostgreSQL</span> взаимодействуют друг с другом, используя специальный протокол, основанный на сообщениях. Этот протокол поддерживается для соединений по <acronym class="acronym">TCP/IP</acronym> и через Unix-сокеты. Для серверов, поддерживающих этот протокол, в IANA зарезервирован номер TCP-порта 5432, но на практике можно задействовать любой порт, не требующий особых привилегий.</p><p>В этой документации описана версия 3.0 этого протокола, реализованная в <span class="productname">PostgreSQL</span> версии 7.4 и новее. За описанием предыдущих версий протокола обратитесь к документации более ранних выпусков <span class="productname">PostgreSQL</span>. Один сервер способен поддерживать несколько версий протокола. Какую версию протокола пытается использовать клиент, сервер узнаёт из стартового сообщения при установлении соединения. Если старшая версия, запрашиваемая клиентом, не поддерживается сервером, соединение будет разорвано (например, это будет иметь место, если клиент запросит протокол версии 4.0, несуществующий на момент написания этого текста). Если младшая версия, запрашиваемая клиентом, не поддерживается сервером (например, клиент запросил версию 3.1, а сервер поддерживает только 3.0), сервер может либо разорвать соединение, либо ответить сообщением NegotiateProtocolVersion с указанием наибольшей младшей версии, которую он поддерживает. Затем клиент может решить либо продолжить установление соединения с указанной версией протокола, либо разорвать соединение.</p><p>Чтобы эффективно обслуживать множество клиентов, сервер запускает отдельный <span class="quote">«<span class="quote">обслуживающий</span>»</span> процесс для каждого клиента. В текущей реализации новый дочерний процесс запускается немедленно после обнаружения входящего подключения. Однако это происходит прозрачно для протокола. С точки зрения протокола, термины <span class="quote">«<span class="quote">обслуживающий процесс</span>»</span>, <span class="quote">«<span class="quote">процесс заднего плана</span>»</span> и <span class="quote">«<span class="quote">сервер</span>»</span> взаимозаменяемы, как и <span class="quote">«<span class="quote">приложение переднего плана</span>»</span> и <span class="quote">«<span class="quote">клиент</span>»</span>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="view-pg-views.html" title="54.35. pg_views">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="internals.html" title="Часть VII. Внутреннее устройство">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="protocol-overview.html" title="55.1. Обзор">След.</a></td></tr><tr><td width="40%" align="left" valign="top">54.35. <code class="structname">pg_views</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 55.1. Обзор</td></tr></table></div></body></html>