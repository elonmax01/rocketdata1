<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>17.4. Сборка и установка с использованием Meson</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="install-make.html" title="17.3. Сборка и установка с использованием Autoconf и Make" /><link rel="next" href="install-post.html" title="17.5. Действия после установки" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">17.4. Сборка и установка с использованием Meson</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="install-make.html" title="17.3. Сборка и установка с использованием Autoconf и Make">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="installation.html" title="Глава 17. Установка из исходного кода">Наверх</a></td><th width="60%" align="center">Глава 17. Установка из исходного кода</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="install-post.html" title="17.5. Действия после установки">След.</a></td></tr></table><hr /></div><div class="sect1" id="INSTALL-MESON"><div class="titlepage"><div><div><h2 class="title" style="clear: both">17.4. Сборка и установка с использованием Meson <a href="#INSTALL-MESON" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="install-meson.html#INSTALL-SHORT-MESON">17.4.1. Краткий вариант</a></span></dt><dt><span class="sect2"><a href="install-meson.html#INSTALL-PROCEDURE-MESON">17.4.2. Процедура установки</a></span></dt><dt><span class="sect2"><a href="install-meson.html#MESON-OPTIONS">17.4.3. Параметры <code class="literal">meson setup</code></a></span></dt></dl></div><div class="sect2" id="INSTALL-SHORT-MESON"><div class="titlepage"><div><div><h3 class="title">17.4.1. Краткий вариант <a href="#INSTALL-SHORT-MESON" class="id_link">#</a></h3></div></div></div><pre class="synopsis">
meson setup build --prefix=/usr/local/pgsql
cd build
ninja
su
ninja install
adduser postgres
mkdir -p /usr/local/pgsql/data
chown postgres /usr/local/pgsql/data
su - postgres
/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
/usr/local/pgsql/bin/pg_ctl -D /usr/local/pgsql/data -l logfile start
/usr/local/pgsql/bin/createdb test
/usr/local/pgsql/bin/psql test
</pre><p> Развёрнутый вариант представлен в продолжении этого <span class="phrase">раздела</span>.</p></div><div class="sect2" id="INSTALL-PROCEDURE-MESON"><div class="titlepage"><div><div><h3 class="title">17.4.2. Процедура установки <a href="#INSTALL-PROCEDURE-MESON" class="id_link">#</a></h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" id="MESON-CONFIGURE"><p class="title"><strong>Конфигурирование</strong></p><p>При установке сначала производится настройка дерева сборки для имеющейся системы и выбор нужных параметров. Чтобы создать и настроить каталог сборки, можно начать с команды <code class="literal">meson setup</code>. </p><pre class="screen">
<strong class="userinput"><code>meson setup build</code></strong>
</pre><p> Команда установки принимает аргументы <code class="literal">builddir</code> и <code class="literal">srcdir</code>. Если <code class="literal">srcdir</code> не указан, Meson определит <code class="literal">srcdir</code> на основе текущего каталога и местоположения <code class="literal">meson.build</code>. Аргумент <code class="literal">builddir</code> является обязательным.</p><p>При запуске <code class="literal">meson setup</code> загружается файл конфигурации сборки и устанавливается каталог сборки. Кроме того, можно передать Meson несколько параметров сборки. Некоторые часто используемые параметры упомянуты в следующих разделах. Например: </p><pre class="screen">
# сборка с другим префиксом установки
meson setup build --prefix=/home/user/pg-install

# создание отладочной сборки
meson setup build --buildtype=debug

# сборка с поддержкой OpenSSL
meson setup build -Dssl=openssl
</pre><p>Каталог сборки настраивается один раз. Чтобы изменить настройку перед новой сборкой, воспользуйтесь командой <code class="literal">meson configure</code> </p><pre class="screen">
meson configure -Dcassert=true
</pre><p> Часто используемые параметры командной строки <code class="command">meson configure</code> описаны в <a class="xref" href="install-meson.html#MESON-OPTIONS" title="17.4.3. Параметры meson setup">Подразделе 17.4.3</a>.</p></li><li class="step" id="MESON-BUILD"><p class="title"><strong>Сборка</strong></p><p>По умолчанию <span class="productname">Meson</span> использует инструмент сборки <a class="ulink" href="https://ninja-build.org/" target="_top">Ninja</a>. Чтобы собрать <span class="productname">PostgreSQL</span> из исходного кода с помощью Meson, воспользуйтесь командой <code class="literal">ninja</code> в каталоге сборки. </p><pre class="screen">
ninja
</pre><p> Ninja автоматически определит количество процессорных ядер на данном компьютере и в соответствии с этим создаст свои параллельные процессы. Можно переопределить количество используемых параллельных процессов в аргументе командной строки <code class="literal">-j</code>.</p><p>Следует отметить, что после начального этапа настройки <code class="command">ninja</code> — единственная команда, которую нужно ввести для компиляции. Независимо от того, как изменяется дерево исходного кода (за исключением перемещения его в совершенно новое место), Meson обнаружит изменения и соответствующим образом перегенерирует файлы для <code class="command">ninja</code>. Это особенно удобно, если имеется несколько каталогов сборки. Часто один из них используется для разработки («отладочная» сборка), а другие — только время от времени (например, сборка «статического анализа»). Любую конфигурацию можно собрать, просто перейдя в соответствующий каталог и запустив Ninja.</p><p>Если нужно собрать сервер, отличный от ninja, можно использовать указание configure с параметром <code class="option">--backend</code>, чтобы выбрать нужный сервер, а затем собрать его, используя <code class="literal">meson compile</code>. Чтобы узнать больше об этих серверах и других аргументах, которые можно передавать ninja, обратитесь к <a class="ulink" href="https://mesonbuild.com/Running-Meson.html#building-from-the-source" target="_top">документации Meson</a>.</p></li><li class="step"><p class="title"><strong>Регрессионные тесты</strong></p><a id="id-1.6.4.8.3.2.3.2" class="indexterm"></a><p>Если вы хотите протестировать только что собранный сервер, прежде чем устанавливать его, на этом этапе вы можете запустить регрессионные тесты. Регрессионные тесты — это комплект тестов, проверяющих, что <span class="productname">PostgreSQL</span> работает на вашем компьютере так, как задумано разработчиками. Введите: </p><pre class="screen">
<strong class="userinput"><code>meson test</code></strong>
</pre><p> (Это должен выполнять обычный пользователь, не root.) Как интерпретировать результаты проверки, подробно описывается в <a class="xref" href="regress.html" title="Глава 33. Регрессионные тесты">Главе 33</a>. Вы можете повторить эту проверку позже в любой момент, выполнив ту же команду.</p><p>Чтобы запустить тесты <span class="application">pg_regress</span> и <span class="application">pg_isolation_regress</span> для работающего экземпляра postgres, укажите <strong class="userinput"><code>--setup running</code></strong> в качестве аргумента <strong class="userinput"><code>meson test</code></strong>.</p></li><li class="step" id="MESON-INSTALL"><p class="title"><strong>Установка файлов</strong></p><div class="note"><h3 class="title">Примечание</h3><p>Если вы обновляете существующую систему, обязательно прочитайте инструкции по обновлению кластера, приведённые в <a class="xref" href="upgrading.html" title="19.6. Обновление кластера PostgreSQL">Раздел 19.6</a>.</p></div><p>После сборки PostgreSQL установить её можно, просто выполнив команду <code class="literal">ninja install</code>. </p><pre class="screen">
ninja install
</pre><p>При этом файлы будут установлены в каталоги, указанные в <a class="xref" href="install-meson.html#MESON-CONFIGURE" title="Конфигурирование">Шаг 1</a>. Для записи в них нужны соответствующие права пользователя. Возможно, вам придётся выполнить этот шаг от имени пользователя root. Также можно заранее создать целевые каталоги и дать требуемый доступ к ним. Стандартная установка содержит все заголовочные файлы, необходимые для разработки клиентских приложений и серверных программ, таких как пользовательские функции или типы данных, написанные на C.</p><p>Команда <code class="literal">ninja install</code> должна работать в большинстве случаев, но если необходимо использовать больше параметров (например, <code class="option">--quiet</code> для отключения подробного вывода), также можно использовать <code class="literal">meson install</code> вместо неё. Подробнее <a class="ulink" href="https://mesonbuild.com/Commands.html#install" target="_top">установка meson</a> и допустимые параметры описаны в документации Meson.</p></li></ol></div><p><strong>Удаление: </strong>Чтобы отменить установку, воспользуйтесь командой <code class="command">ninja uninstall</code>.</p><p><strong>Очистка: </strong>После установки можно освободить место на диске, удалив собранные файлы из дерева исходного кода с помощью команды <code class="command">ninja clean</code>.</p></div><div class="sect2" id="MESON-OPTIONS"><div class="titlepage"><div><div><h3 class="title">17.4.3. Параметры <code class="literal">meson setup</code> <a href="#MESON-OPTIONS" class="id_link">#</a></h3></div></div></div><p>Параметры командной строки <code class="command">meson setup</code> описываются ниже. Этот список не является исчерпывающим (который можно получить, вызвав <code class="literal">meson configure --help</code>). Неописанные здесь параметры предназначены для особых случаев и описаны в стандартной <a class="ulink" href="https://mesonbuild.com/Commands.html#configure" target="_top">документации Meson</a>. Эти аргументы также можно использовать с командой <code class="command">meson setup</code>.</p><div class="sect3" id="MESON-OPTIONS-LOCATIONS"><div class="titlepage"><div><div><h4 class="title">17.4.3.1. Место установки <a href="#MESON-OPTIONS-LOCATIONS" class="id_link">#</a></h4></div></div></div><p>Эти параметры определяют, куда <code class="literal">ninja install</code> (или <code class="literal">meson install</code>) будет устанавливать файлы. В большинстве случае для определения целевого расположения достаточно параметра <code class="option">--prefix</code> (например, <a class="xref" href="install-meson.html#INSTALL-SHORT-MESON" title="17.4.1. Краткий вариант">Подраздел 17.4.1</a>). Если же у вас есть особые требования, вы можете установить разные целевые подкаталоги, воспользовавшись другими описанными здесь параметрами. Однако имейте в виду, что при изменении относительного расположения разных подкаталогов ваша инсталляция может оказаться неперемещаемой, то есть её нельзя будет перенести в другое место после развёртывания. (Это ограничение не касается расположения подкаталогов <code class="literal">man</code> и <code class="literal">doc</code>.) Для получения перемещаемой инсталляции может потребоваться параметр <code class="literal">-Drpath=false</code>, описанный далее.</p><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-PREFIX-MESON"><span class="term"><code class="option">--prefix=<em class="replaceable"><code>ПРЕФИКС</code></em></code></span> <a href="#CONFIGURE-PREFIX-MESON" class="id_link">#</a></dt><dd><p>Разместить все файлы внутри каталога <em class="replaceable"><code>ПРЕФИКС</code></em>, а не в <code class="filename">/usr/local/pgsql</code> (в ОС на базе Unix) или <code class="filename"><em class="replaceable"><code>буква диска</code></em>:/usr/local/pgsql</code> (в Windows). Собственно файлы будут установлены в различные подкаталоги этого каталога; в самом каталоге <em class="replaceable"><code>ПРЕФИКС</code></em> никакие файлы не размещаются.</p></dd><dt id="CONFIGURE-BINDIR-MESON"><span class="term"><code class="option">--bindir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-BINDIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для исполняемых двоичных программ. По умолчанию это <code class="filename"><em class="replaceable"><code>ПРЕФИКС</code></em>/bin</code>.</p></dd><dt id="CONFIGURE-SYSCONFDIR-MESON"><span class="term"><code class="option">--sysconfdir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-SYSCONFDIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для различных файлов конфигурации, <code class="filename"><em class="replaceable"><code>ПРЕФИКС</code></em>/etc</code> по умолчанию.</p></dd><dt id="CONFIGURE-LIBDIR-MESON"><span class="term"><code class="option">--libdir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-LIBDIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для установки библиотек и динамически загружаемых модулей. Значение по умолчанию — <code class="filename"><em class="replaceable"><code>ПРЕФИКС</code></em>/lib</code>.</p></dd><dt id="CONFIGURE-INCLUDEDIR-MESON"><span class="term"><code class="option">--includedir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-INCLUDEDIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для установки заголовочных файлов C и C++. Значение по умолчанию — <code class="filename"><em class="replaceable"><code>ПРЕФИКС</code></em>/include</code>.</p></dd><dt id="CONFIGURE-DATADIR-MESON"><span class="term"><code class="option">--datadir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-DATADIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для статических файлов данных, используемых установленными программами. Значение по умолчанию — <code class="filename"><em class="replaceable"><code>ПРЕФИКС</code></em>/share</code>. Заметьте, что это совсем не тот каталог, в котором будут размещены файлы базы данных.</p></dd><dt id="CONFIGURE-LOCALEDIR-MESON"><span class="term"><code class="option">--localedir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-LOCALEDIR-MESON" class="id_link">#</a></dt><dd><p>Задаёт каталог для установки данных локализации, в частности, каталогов перевода сообщений. Значение по умолчанию — <code class="filename"><em class="replaceable"><code>DATADIR</code></em>/locale</code>.</p></dd><dt id="CONFIGURE-MANDIR-MESON"><span class="term"><code class="option">--mandir=<em class="replaceable"><code>КАТАЛОГ</code></em></code></span> <a href="#CONFIGURE-MANDIR-MESON" class="id_link">#</a></dt><dd><p>Страницы man, поставляемые в составе <span class="productname">PostgreSQL</span>, будут установлены в этот каталог, в соответствующие подкаталоги <code class="filename">man<em class="replaceable"><code>x</code></em></code>. Значение по умолчанию — <code class="filename"><em class="replaceable"><code>DATADIR</code></em>/man</code>.</p></dd></dl></div><div class="note"><h3 class="title">Примечание</h3><p>Чтобы <span class="productname">PostgreSQL</span> можно было установить в стандартные системные размещения (например, в <code class="filename">/usr/local/include</code>), не затрагивая пространство имён остальной системы, приняты определённые меры. Во-первых, к путям <code class="varname">datadir</code>, <code class="varname">sysconfdir</code> и <code class="varname">docdir</code> автоматически добавляется строка <span class="quote">«<span class="quote"><code class="literal">/postgresql</code></span>»</span>, если только полный развёрнутый путь каталога уже не содержит строку <span class="quote">«<span class="quote"><code class="literal">postgres</code></span>»</span> или <span class="quote">«<span class="quote"><code class="literal">pgsql</code></span>»</span>. Так, если вы выберете в качестве префикса <code class="filename">/usr/local</code>, документация будет установлена в <code class="filename">/usr/local/doc/postgresql</code>, но с префиксом <code class="filename">/opt/postgres</code> она будет помещена в <code class="filename">/opt/postgres/doc</code>. Внешние заголовочные файлы C для клиентских интерфейсов устанавливаются в <code class="varname">includedir</code>, не загрязняя пространство имён. Внутренние и серверные заголовочные файлы устанавливаются в частные подкаталоги внутри <code class="varname">includedir</code>. Чтобы узнать, как обращаться к заголовочным файлам того или иного интерфейса, обратитесь к документации этого интерфейса. Наконец, для динамически загружаемых модулей, если требуется, будет также создан частный подкаталог внутри <code class="varname">libdir</code>.</p></div></div><div class="sect3" id="MESON-OPTIONS-FEATURES"><div class="titlepage"><div><div><h4 class="title">17.4.3.2. Функциональность <span class="productname">PostgreSQL</span> <a href="#MESON-OPTIONS-FEATURES" class="id_link">#</a></h4></div></div></div><p>Параметры, описанные в этом разделе, позволяют настраивать возможности <span class="productname">PostgreSQL</span>. Для большинства из них требуется дополнительное программное обеспечение, как описано в <a class="xref" href="install-requirements.html" title="17.1. Требования">Раздел 17.1</a>, и они будут автоматически включены, если оно обнаружено. Можно изменить это поведение, вручную установив для этих возможностей значение <code class="literal">enabled</code>, чтобы они требовались, или <code class="literal">disabled</code>, чтобы не использовать их при сборке.</p><p>Чтобы указать параметры, специфичные для PostgreSQL, к имени параметра должен быть добавлен префикс <code class="literal">-D</code>.</p><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-WITH-NLS-MESON"><span class="term"><code class="option">-Dnls={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-NLS-MESON" class="id_link">#</a></dt><dd><p>Включает или отключает поддержку родного языка (<acronym class="acronym">NLS</acronym>), то есть возможность отображать сообщения программы на языке, отличном от английского. По умолчанию установлено значение auto, и эта возможность включается автоматически, если найдена реализация <span class="application">Gettext API</span>.</p></dd><dt id="CONFIGURE-WITH-PLPERL-MESON"><span class="term"><code class="option">-Dplperl={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-PLPERL-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку языка <span class="application">PL/Perl</span> на стороне сервера. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-PLPYTHON-MESON"><span class="term"><code class="option">-Dplpython={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-PLPYTHON-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку языка <span class="application">PL/Python</span> на стороне сервера. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-PLTCL-MESON"><span class="term"><code class="option">-Dpltcl={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-PLTCL-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку языка <span class="application">PL/Tcl</span> на стороне сервера. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-TCL-VERSION-MESON"><span class="term"><code class="option">-Dtcl_version=<em class="replaceable"><code>ВЕРСИЯ_TCL</code></em></code></span> <a href="#CONFIGURE-WITH-TCL-VERSION-MESON" class="id_link">#</a></dt><dd><p>Указывает версию Tcl, которая будет использоваться при сборке PL/Tcl.</p></dd><dt id="CONFIGURE-WITH-ICU-MESON"><span class="term"><code class="option">-Dicu={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-ICU-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку библиотеки <span class="productname">ICU</span><a id="id-1.6.4.8.4.4.4.6.2.1.2" class="indexterm"></a>, что позволяет использовать правила сортировки ICU <span class="phrase"> (см. <a class="xref" href="collation.html" title="24.2. Поддержка правил сортировки">Раздел 24.2</a>)</span>. Для этого должен быть установлен пакет <span class="productname">ICU4C</span>. Значение по умолчанию — auto. В настоящее время требуется <span class="productname">ICU4C</span> версии не ниже 4.2.</p></dd><dt id="CONFIGURE-WITH-LLVM-MESON"><span class="term"><code class="option">-Dllvm={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-LLVM-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку <acronym class="acronym">JIT</acronym>-компиляции<span class="phrase"> (см. <a class="xref" href="jit.html" title="Глава 32. JIT-компиляция">Главу 32</a>)</span> на базе <span class="productname">LLVM</span>. Для этого должна быть установлена библиотека <span class="productname">LLVM</span>. В настоящее время требуется версия <span class="productname">LLVM</span> не ниже 3.9. По умолчанию поддержка отключена.</p><p>Программа <code class="command">llvm-config</code><a id="id-1.6.4.8.4.4.4.7.2.2.2" class="indexterm"></a> будет использоваться для выяснения требуемых параметров компиляции. Поиск её будет выполняться в заданных путях <code class="envar">PATH</code> по имени <code class="command">llvm-config</code>, а затем <code class="command">llvm-config-$version</code> для всех поддерживаемых версий. Если нужную программу найти таким образом не удастся, воспользуйтесь переменной <code class="envar">LLVM_CONFIG</code> и укажите путь к корректному <code class="command">llvm-config</code>.</p></dd><dt id="CONFIGURE-WITH-LZ4-MESON"><span class="term"><code class="option">-Dlz4={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-LZ4-MESON" class="id_link">#</a></dt><dd><p>Собрать с поддержкой сжатия <span class="productname">LZ4</span>. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-ZSTD-MESON"><span class="term"><code class="option">-Dzstd={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-ZSTD-MESON" class="id_link">#</a></dt><dd><p>Собрать с поддержкой сжатия <span class="productname">Zstandard</span>. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-SSL-MESON"><span class="term"><code class="option">-Dssl={ auto | <em class="replaceable"><code>БИБЛИОТЕКА</code></em> }</code>
      <a id="id-1.6.4.8.4.4.4.10.1.2" class="indexterm"></a>
      </span> <a href="#CONFIGURE-WITH-SSL-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку соединений <acronym class="acronym">SSL</acronym> (зашифрованных). Единственной поддерживаемой <em class="replaceable"><code>БИБЛИОТЕКОЙ</code></em> является <code class="option">openssl</code>. Для такой сборки необходимо установить пакет <span class="productname">OpenSSL</span>, при этом до начала сборки будет проверено наличие необходимых заголовочных файлов и библиотек, чтобы убедиться в целостности инсталляции <span class="productname">OpenSSL</span>. Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-GSSAPI-MESON"><span class="term"><code class="option">-Dgssapi={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-GSSAPI-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку аутентификации GSSAPI. Для GSSAPI необходимо установить MIT Kerberos. На многих платформах подсистема GSSAPI (обычно входящая в состав MIT Kerberos) устанавливается не в тот каталог, который просматривается по умолчанию (например, <code class="filename">/usr/include</code>, <code class="filename">/usr/lib</code>). В этих случаях PostgreSQL отправит запрос <code class="command">pkg-config</code>, чтобы определить необходимые параметры компилятора и компоновщика. Значение параметра по умолчанию — auto. Команда <code class="filename">meson configure</code> проверит наличие необходимых заголовочных файлов и библиотек, чтобы проверить полноту установки GSSAPI, прежде чем продолжить.</p></dd><dt id="CONFIGURE-WITH-LDAP-MESON"><span class="term"><code class="option">-Dldap={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-LDAP-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку <acronym class="acronym">LDAP</acronym><a id="id-1.6.4.8.4.4.4.12.2.1.2" class="indexterm"></a> для проверки подлинности и получения параметров соединения (за дополнительными сведениями обратитесь к <span id="INSTALL-LDAP-LINKS-MESON" class="phrase"><a class="xref" href="libpq-ldap.html" title="34.18. Получение параметров соединения через LDAP">Разделу 34.18</a> и <a class="xref" href="auth-ldap.html" title="21.10. Аутентификация LDAP">Разделу 21.10</a></span>). В Unix для этого нужно установить пакет <span class="productname">OpenLDAP</span>. В Windows используется стандартная библиотека <span class="productname">WinLDAP</span>. Значение по умолчанию — auto. Скрипт <code class="filename">meson configure</code> проверит наличие необходимых заголовочных файлов и библиотек, чтобы убедиться в целостности инсталляции <span class="productname">OpenLDAP</span>, прежде чем продолжить.</p></dd><dt id="CONFIGURE-WITH-PAM-MESON"><span class="term"><code class="option">-Dpam={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-PAM-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку <acronym class="acronym">PAM</acronym><a id="id-1.6.4.8.4.4.4.13.2.1.2" class="indexterm"></a> (Pluggable Authentication Modules, подключаемых модулей аутентификации). Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-BSD-AUTH-MESON"><span class="term"><code class="option">-Dbsd_auth={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-BSD-AUTH-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку аутентификации BSD. (Инфраструктура аутентификации BSD в настоящее время доступна только в OpenBSD.) Значение по умолчанию — auto.</p></dd><dt id="CONFIGURE-WITH-SYSTEMD-MESON"><span class="term"><code class="option">-Dsystemd={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-SYSTEMD-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку служебных уведомлений для <span class="application">systemd</span><a id="id-1.6.4.8.4.4.4.15.2.1.2" class="indexterm"></a>. Это улучшает интеграцию с системой, когда сервер запускается под управлением <span class="application">systemd</span>, и не оказывает никакого влияния в противном случае<span class="phrase">; за дополнительными сведениями обратитесь к <a class="xref" href="server-start.html" title="19.3. Запуск сервера баз данных">Разделу 19.3</a></span>. Значение по умолчанию — auto. Для использования этой поддержки в системе должна быть установлена <span class="application">libsystemd</span> с сопутствующими заголовочными файлами.</p></dd><dt id="CONFIGURE-WITH-BONJOUR-MESON"><span class="term"><code class="option">-Dbonjour={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-BONJOUR-MESON" class="id_link">#</a></dt><dd><p>Включает поддержку Bonjour, протокола автоматического обнаружения служб. Значение по умолчанию — auto. Bonjour должен поддерживаться самой операционной системой. Рекомендуется для macOS.</p></dd><dt id="CONFIGURE-WITH-UUID-MESON"><span class="term"><code class="option">-Duuid=<em class="replaceable"><code>БИБЛИОТЕКА</code></em></code></span> <a href="#CONFIGURE-WITH-UUID-MESON" class="id_link">#</a></dt><dd><p>Собрать модуль <a class="xref" href="uuid-ossp.html" title="F.49. uuid-ossp — генератор UUID">uuid-ossp</a> (предоставляющий функции для генерирования UUID), используя заданную библиотеку UUID.<a id="id-1.6.4.8.4.4.4.17.2.1.2" class="indexterm"></a> <em class="replaceable"><code>БИБЛИОТЕКА</code></em> может быть следующей:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Значение <code class="option">none</code> отключает сборку модуля uuid. Это значение по умолчанию.</p></li><li class="listitem"><p><code class="option">bsd</code>, чтобы использовались функции получения UUID, имеющиеся во FreeBSD и некоторых других системах на базе BSD</p></li><li class="listitem"><p><code class="option">e2fs</code>, чтобы использовалась библиотека получения UUID, созданная в рамках проекта <code class="literal">e2fsprogs</code>; эта библиотека присутствует в большинстве систем Linux и macOS, также её можно найти и для других платформ.</p></li><li class="listitem"><p><code class="option">ossp</code>, чтобы использовалась библиотека <a class="ulink" href="http://www.ossp.org/pkg/lib/uuid/" target="_top">OSSP UUID</a></p></li></ul></div></dd><dt id="CONFIGURE-WITH-LIBXML-MESON"><span class="term"><code class="option">-Dlibxml={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-LIBXML-MESON" class="id_link">#</a></dt><dd><p>Собрать с libxml2, включая тем самым поддержку SQL/XML. Для этого требуется libxml версии 2.6.23 или новее. Значение по умолчанию — auto.</p><p>Чтобы использовать инсталляцию libxml2, расположенную в нестандартном месте, можно установить переменные среды, связанные с <code class="command">pkg-config</code> (см. документацию libxml2).</p></dd><dt id="CONFIGURE-WITH-LIBXSLT-MESON"><span class="term"><code class="option">-Dlibxslt={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-WITH-LIBXSLT-MESON" class="id_link">#</a></dt><dd><p>Собрать с libxslt, включая тем самым возможность выполнять XSL-преобразования XML-документов в модуле <a class="xref" href="xml2.html" title="F.50. xml2 — функции для выполнения запросов XPath и преобразований XSLT">xml2</a>. Для этого также должен быть указан ключ <code class="option">-Dlibxml</code>. Значение по умолчанию — auto.</p></dd></dl></div></div><div class="sect3" id="MESON-OPTIONS-ANTI-FEATURES"><div class="titlepage"><div><div><h4 class="title">17.4.3.3. Отключение функциональности <a href="#MESON-OPTIONS-ANTI-FEATURES" class="id_link">#</a></h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-READLINE-MESON"><span class="term"><code class="option">-Dreadline={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-READLINE-MESON" class="id_link">#</a></dt><dd><p>Разрешает использование библиотеки <span class="application">Readline</span> (а также <span class="application">libedit</span>). Значение параметра по умолчанию — auto, при этом включается редактирование командной строки и история в <span class="application">psql</span>, так что использовать этот вариант настоятельно рекомендуется.</p></dd><dt id="CONFIGURE-LIBEDIT-PREFERRED-MESON"><span class="term"><code class="option">-Dlibedit_preferred={ true | false }</code></span> <a href="#CONFIGURE-LIBEDIT-PREFERRED-MESON" class="id_link">#</a></dt><dd><p>Со значением true предпочтение отдаётся библиотеке <span class="application">libedit</span> с лицензией BSD, а не <span class="application">Readline</span> (GPL). Этот параметр имеет значение, только если установлены обе библиотеки; по умолчанию установлено значение false, при котором используется <span class="application">Readline</span>.</p></dd><dt id="CONFIGURE-ZLIB-MESON"><span class="term"><code class="option">-Dzlib={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-ZLIB-MESON" class="id_link">#</a></dt><dd><p><a id="id-1.6.4.8.4.5.2.3.2.1.1" class="indexterm"></a> Запрещает использование библиотеки <span class="application">Zlib</span>. По умолчанию установлено (и рекомендуется использовать) значение auto, оно включает поддержку сжатых архивов в <span class="application">pg_dump</span>, <span class="application">pg_restore</span> и <span class="application">pg_basebackup</span>.</p></dd><dt id="CONFIGURE-SPINLOCKS-MESON"><span class="term"><code class="option">-Dspinlocks={ true | false }</code></span> <a href="#CONFIGURE-SPINLOCKS-MESON" class="id_link">#</a></dt><dd><p>По умолчанию для этого параметра установлено значение true. Значение false позволяет провести сборку, если <span class="productname">PostgreSQL</span> не может воспользоваться циклическими блокировками CPU на данной платформе. Отсутствие таких блокировок приводит к кардинальному снижению производительности, поэтому изменять этот параметр следует, только если сборка прерывается и выдаётся сообщение, что ваша платформа эти блокировки не поддерживает. Если для сборки <span class="productname">PostgreSQL</span> на вашей платформе требуется значение false, сообщите о данной проблеме разработчикам <span class="productname">PostgreSQL</span>.</p></dd><dt id="CONFIGURE-ATOMICS-MESON"><span class="term"><code class="option">-Datomics={ true | false }</code></span> <a href="#CONFIGURE-ATOMICS-MESON" class="id_link">#</a></dt><dd><p>По умолчанию для этого параметра установлено значение true; установка значения false отключает использование атомарных операций процессора. На архитектурах, где такие операции отсутствуют, этот параметр никак не действует. Там же, где они поддерживаются, отказ от их использования приведёт к падению производительности. Изменение этого параметра полезно только для отладки и для сравнительной оценки быстродействия.</p></dd></dl></div></div><div class="sect3" id="MESON-OPTIONS-BUILD-PROCESS"><div class="titlepage"><div><div><h4 class="title">17.4.3.4. Особенности процесса сборки <a href="#MESON-OPTIONS-BUILD-PROCESS" class="id_link">#</a></h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-AUTO-FEATURES-MESON"><span class="term"><code class="option">--auto_features={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-AUTO-FEATURES-MESON" class="id_link">#</a></dt><dd><p>Установка этого параметра позволяет переопределить значение всех возможностей, которые включаются <span class="quote">«<span class="quote">автоматически</span>»</span>, если найдено необходимое программное обеспечение. Это может быть полезно, если нужно отключить или включить все <span class="quote">«<span class="quote">дополнительные</span>»</span> функции одновременно, без необходимости настраивать каждую из них вручную. Значение по умолчанию для этого параметра — auto.</p></dd><dt id="CONFIGURE-BACKEND-MESON"><span class="term"><code class="option">--backend=<em class="replaceable"><code>СЕРВЕР</code></em></code></span> <a href="#CONFIGURE-BACKEND-MESON" class="id_link">#</a></dt><dd><p>По умолчанию Meson использует систему сборки ninja, и этого должно быть достаточно для большинства случаев использования. Однако если необходимо обеспечить полную интеграцию с Visual Studio, можно установить значение <code class="command">vs</code>.</p></dd><dt id="CONFIGURE-C-ARGS-MESON"><span class="term"><code class="option">-Dc_args=<em class="replaceable"><code>ПАРАМЕТРЫ</code></em></code></span> <a href="#CONFIGURE-C-ARGS-MESON" class="id_link">#</a></dt><dd><p>Этот параметр можно использовать для передачи дополнительных параметров компилятору C.</p></dd><dt id="CONFIGURE-C-LINK-ARGS-MESON"><span class="term"><code class="option">-Dc_link_args=<em class="replaceable"><code>ПАРАМЕТРЫ</code></em></code></span> <a href="#CONFIGURE-C-LINK-ARGS-MESON" class="id_link">#</a></dt><dd><p>Этот параметр можно использовать для передачи дополнительных параметров компоновщику C.</p></dd><dt id="CONFIGURE-EXTRA-INCLUDE-DIRS-MESON"><span class="term"><code class="option">-Dextra_include_dirs=<em class="replaceable"><code>КАТАЛОГИ</code></em></code></span> <a href="#CONFIGURE-EXTRA-INCLUDE-DIRS-MESON" class="id_link">#</a></dt><dd><p>Значение <em class="replaceable"><code>КАТАЛОГИ</code></em> представляет список каталогов через запятую, которые будут просмотрены компилятором при поиске заголовочных файлов. Если для дополнительных пакетов (например, GNU <span class="application">Readline</span>) используется нестандартный каталог установки, вам придётся использовать этот параметр и, возможно, также добавить соответствующий параметр <code class="option">-Dextra_lib_dirs</code>.</p><p>Пример: <code class="literal">-Dextra_include_dirs=/opt/gnu/include,/usr/sup/include</code>.</p></dd><dt id="CONFIGURE-EXTRA-LIB-DIRS-MESON"><span class="term"><code class="option">-Dextra_lib_dirs=<em class="replaceable"><code>КАТАЛОГИ</code></em></code></span> <a href="#CONFIGURE-EXTRA-LIB-DIRS-MESON" class="id_link">#</a></dt><dd><p>Значение <em class="replaceable"><code>КАТАЛОГИ</code></em> представляет список каталогов через запятую, в котором следует искать библиотеки. Возможно, вам потребуется использовать этот параметр (и соответствующий <code class="option">-Dextra_include_dirs</code>), если используются нестандартные каталоги для установки.</p><p>Пример: <code class="literal">-Dextra_lib_dirs=/opt/gnu/lib,/usr/sup/lib</code>.</p></dd><dt id="CONFIGURE-SYSTEM-TZDATA-MESON"><span class="term"><code class="option">-Dsystem_tzdata=<em class="replaceable"><code>КАТАЛОГ</code></em></code>
      <a id="id-1.6.4.8.4.6.2.7.1.2" class="indexterm"></a>
      </span> <a href="#CONFIGURE-SYSTEM-TZDATA-MESON" class="id_link">#</a></dt><dd><p>В <span class="productname">PostgreSQL</span> включена собственная база данных часовых поясов, необходимая для операций с датой и временем. На самом деле эта база данных совместима с базой часовых поясов IANA, поставляемой в составе многих операционных систем FreeBSD, Linux, Solaris, поэтому устанавливать её дополнительно может быть излишне. С этим параметром вместо базы данных, включённой в пакет исходного кода PostgreSQL, будет использоваться системная база данных часовых поясов, находящаяся в заданном <em class="replaceable"><code>КАТАЛОГЕ</code></em>. <em class="replaceable"><code>КАТАЛОГ</code></em> должен задаваться абсолютным путём (в ряде операционных систем принят путь <code class="filename">/usr/share/zoneinfo</code>). Заметьте, что процедура установки не будет проверять несоответствия или ошибки в данных часовых поясов. Поэтому, используя этот параметр, рекомендуется выполнить регрессионные тесты, чтобы убедиться, что выбранная вами база данных часовых поясов работает корректно с <span class="productname">PostgreSQL</span>.</p><a id="id-1.6.4.8.4.6.2.7.2.2" class="indexterm"></a><p>Этот параметр в основном предназначен для тех, кто собирает двоичные пакеты для дистрибутивов и хорошо знает свою операционную систему. Основной плюс от использования системных данных в том, что пакет PostgreSQL не придётся обновлять при изменениях местных определений часовых поясов. Ещё один плюс заключается в упрощении кросс-компиляции, так как при инсталляции не требуется собирать базу данных часовых поясов.</p></dd><dt id="CONFIGURE-EXTRA-VERSION-MESON"><span class="term"><code class="option">-Dextra_version=<em class="replaceable"><code>СТРОКА</code></em></code></span> <a href="#CONFIGURE-EXTRA-VERSION-MESON" class="id_link">#</a></dt><dd><p>Заданная <em class="replaceable"><code>СТРОКА</code></em> добавляется к номеру версии PostgreSQL. Это можно использовать, например, чтобы двоичные файлы, собранные из промежуточных снимков <span class="productname">Git</span> или кода с дополнительными правками, отличались от стандартных дополнительной строкой в версии, например, содержащей идентификатор <code class="command">git describe</code> или номер выпуска дистрибутивного пакета.</p></dd><dt id="CONFIGURE-RPATH-MESON"><span class="term"><code class="option">-Drpath={ true | false }</code></span> <a href="#CONFIGURE-RPATH-MESON" class="id_link">#</a></dt><dd><p>Значение этого параметра по умолчанию — true. При значении false в исполняемые файлы <span class="productname">PostgreSQL</span> не добавляется атрибут, с которым они будут искать разделяемые библиотеки в каталоге библиотек инсталляции (см. <code class="option">--libdir</code>). На большинстве платформ этот атрибут задаёт абсолютный путь к каталогу библиотек, поэтому этот вариант не подходит, если вы намерены перемещать готовую инсталляцию. Однако вам в любом случае нужно каким-то образом указать, где исполняемые файлы могут найти разделяемые библиотеки. Обычно для этого нужно настроить механизм динамического связывания в операционной системе, указав нужный каталог библиотек; за подробностями обратитесь к <a class="xref" href="install-post.html#INSTALL-POST-SHLIBS" title="17.5.1. Разделяемые библиотеки">Подразделу 17.5.1</a>.</p></dd><dt id="CONFIGURE-BINARY-NAME-MESON"><span class="term"><code class="option">-D<em class="replaceable"><code>ИМЯ_ИСПОЛНЯЕМОГО_ФАЙЛА</code></em>=<em class="replaceable"><code>ПУТЬ</code></em></code></span> <a href="#CONFIGURE-BINARY-NAME-MESON" class="id_link">#</a></dt><dd><p>Если программа, необходимая для сборки PostgreSQL (с дополнительными флагами или без них), имеет нестандартный путь установки, можно указать его вручную в этом параметре для <code class="literal">meson configure</code>. Полный список программ, для которых поддерживается такой способ, можно найти, запустив <code class="literal">meson configure</code>. Пример: </p><pre class="programlisting">meson configure -DBISON=PATH_TO_BISON</pre></dd></dl></div></div><div class="sect3" id="MESON-OPTIONS-DOCS"><div class="titlepage"><div><div><h4 class="title">17.4.3.5. Документация <a href="#MESON-OPTIONS-DOCS" class="id_link">#</a></h4></div></div></div><p>Чтобы узнать об инструментах, необходимых для сборки документации, обратитесь к <a class="xref" href="docguide-toolsets.html" title="J.2. Инструментарий">Разделу J.2</a>.</p><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-DOCS-MESON"><span class="term"><code class="option">-Ddocs={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-DOCS-MESON" class="id_link">#</a></dt><dd><p>Позволяет собирать документацию в форматах <acronym class="acronym">HTML</acronym> и <acronym class="acronym">man</acronym>. По умолчанию установлено значение auto.</p></dd><dt id="CONFIGURE-DOCS-PDF-MESON"><span class="term"><code class="option">-Ddocs_pdf={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-DOCS-PDF-MESON" class="id_link">#</a></dt><dd><p>Позволяет собирать документацию в формате <acronym class="acronym">PDF</acronym>. По умолчанию установлено значение auto.</p></dd><dt id="CONFIGURE-DOCS-HTML-STYLE"><span class="term"><code class="option">-Ddocs_html_style={ simple | website }</code></span> <a href="#CONFIGURE-DOCS-HTML-STYLE" class="id_link">#</a></dt><dd><p>Определяет, какая таблица стилей <acronym class="acronym">CSS</acronym> используется. По умолчанию используется <code class="literal">simple</code>. Если установлено значение <code class="literal">website</code>, документация HTML будет ссылаться на таблицу стилей для <a class="ulink" href="https://www.postgresql.org/docs/current/" target="_top">postgresql.org</a>.</p></dd></dl></div></div><div class="sect3" id="MESON-OPTIONS-MISC"><div class="titlepage"><div><div><h4 class="title">17.4.3.6. Разное <a href="#MESON-OPTIONS-MISC" class="id_link">#</a></h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-PGPORT-MESON"><span class="term"><code class="option">-Dpgport=<em class="replaceable"><code>НОМЕР</code></em></code></span> <a href="#CONFIGURE-PGPORT-MESON" class="id_link">#</a></dt><dd><p>Задаёт <em class="replaceable"><code>НОМЕР</code></em> порта по умолчанию для сервера и клиентов. Стандартное значение — 5432. Этот порт всегда можно изменить позже, но если вы укажете другой номер здесь, и сервер, и клиенты будут скомпилированы с одним значением, что очень удобно. Обычно менять это значение имеет смысл, только если вы намерены запускать в одной системе несколько серверов <span class="productname">PostgreSQL</span>.</p></dd><dt id="CONFIGURE-KRB-SRVNAM-MESON"><span class="term"><code class="option">-Dkrb_srvnam=<em class="replaceable"><code>ИМЯ</code></em></code></span> <a href="#CONFIGURE-KRB-SRVNAM-MESON" class="id_link">#</a></dt><dd><p>Задаёт имя по умолчанию для субъекта-службы Kerberos, используемое GSSAPI (по умолчанию это <code class="literal">postgres</code>). Обычно менять его имеет смысл только в сборке для среды Windows, где оно должно быть задано в верхнем регистре (<code class="literal">POSTGRES</code>).</p></dd><dt id="CONFIGURE-SEGSIZE-MESON"><span class="term"><code class="option">-Dsegsize=<em class="replaceable"><code>РАЗМЕР_СЕГМЕНТА</code></em></code></span> <a href="#CONFIGURE-SEGSIZE-MESON" class="id_link">#</a></dt><dd><p>Задаёт <em class="firstterm">размер сегмента</em> (в гигабайтах). Сервер делит большие таблицы на несколько файлов в файловой системе, ограничивая размер каждого данным размером сегмента. Это позволяет обойти ограничения на размер файлов, существующие на многих платформах. Размер сегмента по умолчанию, 1 гигабайт, безопасен для всех поддерживаемых платформ. Если же ваша операционная система поддерживает <span class="quote">«<span class="quote">большие файлы</span>»</span> (а сегодня это поддерживают почти все), вы можете установить больший размер сегмента. Это позволит уменьшить число файловых дескрипторов, используемых при работе с очень большими таблицами. Но будьте осторожны, чтобы выбранное значение не превысило максимум, поддерживаемый вашей платформой и файловыми системами, которые вы будете применять. Возможно, допустимый размер файла будет ограничиваться и другими утилитами, которые вы захотите использовать, например <span class="application">tar</span>. Рекомендуется, хотя и не требуется, чтобы это значение было степенью 2.</p></dd><dt id="CONFIGURE-BLOCKSIZE-MESON"><span class="term"><code class="option">-Dblocksize=<em class="replaceable"><code>РАЗМЕР_БЛОКА</code></em></code></span> <a href="#CONFIGURE-BLOCKSIZE-MESON" class="id_link">#</a></dt><dd><p>Задаёт <em class="firstterm">размер блока</em> (в килобайтах). Эта величина будет единицей хранения и ввода/вывода данных таблиц. Значение по умолчанию, 8 килобайт, достаточно универсально; но в особых случаях может быть оправдан другой размер блока. Это значение должно быть степенью 2 от 1 до 32 (в килобайтах).</p></dd><dt id="CONFIGURE-WAL-BLOCKSIZE-MESON"><span class="term"><code class="option">-Dwal_blocksize=<em class="replaceable"><code>РАЗМЕР_БЛОКА</code></em></code></span> <a href="#CONFIGURE-WAL-BLOCKSIZE-MESON" class="id_link">#</a></dt><dd><p>Задаёт <em class="firstterm">размер блока WAL</em> (в килобайтах). Эта величина будет единицей хранения и ввода/вывода в журнале WAL. Значение по умолчанию, 8 килобайт, достаточно универсально; но в особых случаях может быть оправдан другой размер блока. Это значение должно быть степенью 2 от 1 до 64 (в килобайтах).</p></dd></dl></div></div><div class="sect3" id="MESON-OPTIONS-DEVEL"><div class="titlepage"><div><div><h4 class="title">17.4.3.7. Параметры для разработчиков <a href="#MESON-OPTIONS-DEVEL" class="id_link">#</a></h4></div></div></div><p>Большинство параметров в этом разделе имеют ценность только для разработки или отладки <span class="productname">PostgreSQL</span>. Использовать их в производственных сборках не рекомендуется, кроме, возможно, ключа <code class="option">--debug</code>, позволяющего получить подробную информацию об ошибке, в случае, если вы столкнётесь с проблемой. На платформах, поддерживающих DTrace, также может иметь смысл использовать для производственной сборки <code class="option">-Ddtrace</code>.</p><p>При сборке инсталляции, которая будет использоваться для отладки внутреннего кода сервера, рекомендуется как минимум использовать параметры <code class="option">--buildtype=debug</code> и <code class="option">-Dcassert</code>.</p><div class="variablelist"><dl class="variablelist"><dt id="CONFIGURE-BUILDTYPE-MESON"><span class="term"><code class="option">--buildtype=<em class="replaceable"><code>ТИП_СБОРКИ</code></em></code></span> <a href="#CONFIGURE-BUILDTYPE-MESON" class="id_link">#</a></dt><dd><p>Этот параметр можно использовать для указания используемого типа сборки; по умолчанию — <code class="option">debugoptimized</code>. Если нужна более тонкая настройка символов отладки и уровней оптимизации, чем предоставляемая этим параметром, можно использовать флаги <code class="option">--debug</code> и <code class="option">--optimization</code>.</p><p>Обычно используются следующие типы сборки: <code class="option">plain</code>, <code class="option">debug</code>, <code class="option">debugoptimized</code> и <code class="option">release</code>. Дополнительную информацию о них можно найти в <a class="ulink" href="https://mesonbuild.com/Running-Meson.html#configuring-the-build-directory" target="_top">документации Meson</a>.</p></dd><dt id="CONFIGURE-DEBUG-MESON"><span class="term"><code class="option">--debug</code></span> <a href="#CONFIGURE-DEBUG-MESON" class="id_link">#</a></dt><dd><p>Включает компиляцию всех программ и библиотек с отладочными символами. Это значит, что вы сможете запускать программы в отладчике для анализа проблем. При такой компиляции размер установленных исполняемых файлов значительно увеличивается, а компиляторы, кроме GCC, обычно отключают оптимизацию, что снижает быстродействие. Однако наличие отладочных символов очень полезно при решении возможных проблем любой сложности. В настоящее время рекомендуется использовать этот параметр для производственной среды, только если применяется компилятор GCC. Но если вы занимаетесь разработкой или испытываете бета-версию, его следует использовать всегда.</p></dd><dt id="CONFIGURE-OPTIMIZATION-MESON"><span class="term"><code class="option">--optimization</code>=<em class="replaceable"><code>УРОВЕНЬ</code></em></span> <a href="#CONFIGURE-OPTIMIZATION-MESON" class="id_link">#</a></dt><dd><p>Указывает уровень оптимизации. Для <code class="option">LEVEL</code> можно установить любое из значений {0,g,1,2,3,s}.</p></dd><dt id="CONFIGURE-WERROR-MESON"><span class="term"><code class="option">--werror</code></span> <a href="#CONFIGURE-WERROR-MESON" class="id_link">#</a></dt><dd><p>Указывает компилятору рассматривать предупреждения как ошибки, что может быть полезно для разработки кода.</p></dd><dt id="CONFIGURE-CASSERT-MESON"><span class="term"><code class="option">-Dcassert={ true | false }</code></span> <a href="#CONFIGURE-CASSERT-MESON" class="id_link">#</a></dt><dd><p>Включает для сервера проверочные <em class="firstterm">утверждения</em>, проверяющие множество условий, которые <span class="quote">«<span class="quote">не должны происходить</span>»</span>. Это бесценно в процессе разработки кода, но эти проверки значительно замедляют работу сервера. Кроме того, включение этих проверок не обязательно увеличит стабильность вашего сервера! Проверочные утверждения не категоризируются по важности, поэтому относительно безвредная ошибка может привести к перезапуску сервера, если утверждение не выполнится. Применять это следует, только если вы занимаетесь разработкой или испытываете бета-версию, но не в производственной среде.</p></dd><dt id="CONFIGURE-TAP-TESTS-MESON"><span class="term"><code class="option">-Dtap_tests={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-TAP-TESTS-MESON" class="id_link">#</a></dt><dd><p>Включает тесты по технологии Perl TAP. Значение по умолчанию — auto. Для работы тестов у вас должен быть установлен Perl и модуль <code class="literal">IPC::Run</code>. <span class="phrase">За дополнительными сведениями обратитесь к <a class="xref" href="regress-tap.html" title="33.4. TAP-тесты">Разделу 33.4</a>.</span></p></dd><dt id="CONFIGURE-PG-TEST-EXTRA-MESON"><span class="term"><code class="option">-DPG_TEST_EXTRA=<em class="replaceable"><code>КОМПЛЕКТЫ_ТЕСТОВ</code></em></code></span> <a href="#CONFIGURE-PG-TEST-EXTRA-MESON" class="id_link">#</a></dt><dd><p>Включает комплекты тестов, для запуска которых требуется специальное программное обеспечение. Этот параметр принимает аргументы в виде списка, разделённого пробелами. За подробностями обратитесь к <a class="xref" href="regress-run.html#REGRESS-ADDITIONAL" title="33.1.3. Дополнительные пакеты тестов">Подразделу 33.1.3</a>.</p></dd><dt id="CONFIGURE-B-COVERAGE-MESON"><span class="term"><code class="option">-Db_coverage={ true | false }</code></span> <a href="#CONFIGURE-B-COVERAGE-MESON" class="id_link">#</a></dt><dd><p>При использовании GCC все программы и библиотеки компилируются с инструментарием, оценивающим покрытие кода тестами. Если его запустить, в каталоге сборки будут сформированы файлы с метриками покрытия кода. <span class="phrase">За дополнительными сведениями обратитесь к <a class="xref" href="regress-coverage.html" title="33.5. Определение покрытия кода тестами">Разделу 33.5</a>.</span> Этот параметр предназначен только для GCC и только для использования в процессе разработки.</p></dd><dt id="CONFIGURE-DTRACE-MESON"><span class="term"><code class="option">-Ddtrace={ auto | enabled | disabled }</code></span> <a href="#CONFIGURE-DTRACE-MESON" class="id_link">#</a></dt><dd><p><a id="id-1.6.4.8.4.9.4.9.2.1.1" class="indexterm"></a> Включает при компиляции <span class="productname">PostgreSQL</span> поддержку средства динамической трассировки DTrace. <span class="phrase">За дополнительными сведениями обратитесь к <a class="xref" href="dynamic-trace.html" title="28.5. Динамическая трассировка">Разделу 28.5</a>.</span></p><p>Задать расположение программы <code class="command">dtrace</code> можно в переменной окружения <code class="option">DTRACE</code>. Часто это необходимо, потому что <code class="command">dtrace</code> обычно устанавливается в каталог <code class="filename">/usr/sbin</code>, который может отсутствовать в <code class="envar">PATH</code>.</p></dd><dt id="CONFIGURE-SEGSIZE-BLOCKS-MESON"><span class="term"><code class="option">-Dsegsize_blocks=SEGSIZE_BLOCKS</code></span> <a href="#CONFIGURE-SEGSIZE-BLOCKS-MESON" class="id_link">#</a></dt><dd><p>Указывает размер сегмента отношения в блоках. Если указан и данный параметр, и <code class="option">-Dsegsize</code>, применяется данный параметр. Он предназначен только для разработчиков и позволяет тестировать код, связанный с сегментом.</p></dd></dl></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install-make.html" title="17.3. Сборка и установка с использованием Autoconf и Make">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="installation.html" title="Глава 17. Установка из исходного кода">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="install-post.html" title="17.5. Действия после установки">След.</a></td></tr><tr><td width="40%" align="left" valign="top">17.3. Сборка и установка с использованием Autoconf и Make </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 17.5. Действия после установки</td></tr></table></div></body></html>