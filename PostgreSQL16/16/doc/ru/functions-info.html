<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.26. Системные информационные функции и операторы</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="functions-srf.html" title="9.25. Функции, возвращающие множества" /><link rel="next" href="functions-admin.html" title="9.27. Функции для системного администрирования" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">9.26. Системные информационные функции и операторы</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-srf.html" title="9.25. Функции, возвращающие множества">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="Глава 9. Функции и операторы">Наверх</a></td><th width="60%" align="center">Глава 9. Функции и операторы</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="functions-admin.html" title="9.27. Функции для системного администрирования">След.</a></td></tr></table><hr /></div><div class="sect1" id="FUNCTIONS-INFO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.26. Системные информационные функции и операторы <a href="#FUNCTIONS-INFO" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-SESSION">9.26.1. Функции получения информации о сеансе</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-ACCESS">9.26.2. Функции для проверки прав доступа</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-SCHEMA">9.26.3. Функции для определения видимости</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-CATALOG">9.26.4. Функции для обращения к системным каталогам</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-OBJECT">9.26.5. Функции получения информации и адресации объектов</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-COMMENT">9.26.6. Функции получения комментариев</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-VALIDITY">9.26.7. Функции проверки допустимости данных</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-SNAPSHOT">9.26.8. Функции получения информации об идентификаторах транзакций и снимках состояния</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-COMMIT-TIMESTAMP">9.26.9. Функции получения информации о фиксации транзакций</a></span></dt><dt><span class="sect2"><a href="functions-info.html#FUNCTIONS-INFO-CONTROLDATA">9.26.10. Функции управления данными</a></span></dt></dl></div><p>Функции, описанные в этом разделе, предназначены для получения различной информации о сервере <span class="productname">PostgreSQL</span>.</p><div class="sect2" id="FUNCTIONS-INFO-SESSION"><div class="titlepage"><div><div><h3 class="title">9.26.1. Функции получения информации о сеансе <a href="#FUNCTIONS-INFO-SESSION" class="id_link">#</a></h3></div></div></div><p>В <a class="xref" href="functions-info.html#FUNCTIONS-INFO-SESSION-TABLE" title="Таблица 9.67. Функции получения информации о сеансе">Таблице 9.67</a> перечислен ряд функций, предназначенных для получения информации о текущем сеансе и системе.</p><p>В дополнение к перечисленным здесь функциям существуют также функции, связанные с подсистемой статистики, которые тоже предоставляют системную информацию. Подробнее они рассматриваются в <a class="xref" href="monitoring-stats.html#MONITORING-STATS-VIEWS" title="28.2.2. Просмотр статистики">Подразделе 28.2.2</a>.</p><div class="table" id="FUNCTIONS-INFO-SESSION-TABLE"><p class="title"><strong>Таблица 9.67. Функции получения информации о сеансе</strong></p><div class="table-contents"><table class="table" summary="Функции получения информации о сеансе" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.1.1.1.1" class="indexterm"></a>
        <code class="function">current_catalog</code>
        → <code class="returnvalue">name</code>
       </p>
       <p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.1.1.2.1" class="indexterm"></a> <code class="function">current_database</code> () → <code class="returnvalue">name</code></p>
       <p>Выдаёт имя текущей базы данных. (В стандарте SQL базы данных называются <span class="quote">«<span class="quote">каталогами</span>»</span>, поэтому стандарту соответствует написание <code class="function">current_catalog</code>.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.2.1.1.1" class="indexterm"></a> <code class="function">current_query</code> () → <code class="returnvalue">text</code></p>
       <p>Выдаёт текст запроса, выполняемого в данный момент, в том виде, в каком его передал клиент (может состоять из нескольких операторов).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.3.1.1.1" class="indexterm"></a>
        <code class="function">current_role</code>
        → <code class="returnvalue">name</code>
       </p>
       <p>Аналог <code class="function">current_user</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.4.1.1.1" class="indexterm"></a>
        <a id="id-1.5.8.32.3.4.2.2.4.1.1.2" class="indexterm"></a>
        <code class="function">current_schema</code>
        → <code class="returnvalue">name</code>
       </p>
       <p class="func_signature"><code class="function">current_schema</code> () → <code class="returnvalue">name</code></p>
       <p>Выдаёт имя первой схемы в пути поиска (или значение NULL, если путь поиска пустой). В эту схему будут добавляться таблицы и другие объекты, при создании которых схема не указывается явно.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.5.1.1.1" class="indexterm"></a> <a id="id-1.5.8.32.3.4.2.2.5.1.1.2" class="indexterm"></a> <code class="function">current_schemas</code> ( <em class="parameter"><code>include_implicit</code></em> <code class="type">boolean</code> ) → <code class="returnvalue">name[]</code></p>
       <p>Выдаёт массив имён всех схем, в настоящее время представленных в действующем пути поиска, по порядку их приоритета. (Элементы текущего значения <a class="xref" href="runtime-config-client.html#GUC-SEARCH-PATH">search_path</a>, которым не соответствуют существующие схемы, опускаются). Если логический аргумент равен <code class="literal">true</code>, в результат включаются системные схемы, неявно просматриваемые при поиске, как например, <code class="literal">pg_catalog</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.6.1.1.1" class="indexterm"></a>
        <a id="id-1.5.8.32.3.4.2.2.6.1.1.2" class="indexterm"></a>
        <code class="function">current_user</code>
        → <code class="returnvalue">name</code>
       </p>
       <p>Выдаёт имя пользователя в текущем контексте выполнения.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.7.1.1.1" class="indexterm"></a> <code class="function">inet_client_addr</code> () → <code class="returnvalue">inet</code></p>
       <p>Выдаёт IP-адрес текущего клиента либо <code class="literal">NULL</code>, если текущее соединение установлено через Unix-сокет.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.8.1.1.1" class="indexterm"></a> <code class="function">inet_client_port</code> () → <code class="returnvalue">integer</code></p>
       <p>Выдаёт номер TCP-порта текущего клиента либо <code class="literal">NULL</code>, если текущее подключение установлено через Unix-сокет.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.9.1.1.1" class="indexterm"></a> <code class="function">inet_server_addr</code> () → <code class="returnvalue">inet</code></p>
       <p>Выдаёт IP-адрес, через который сервер принял текущее подключение, либо NULL, если текущее подключение установлено через Unix-сокет.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.10.1.1.1" class="indexterm"></a> <code class="function">inet_server_port</code> () → <code class="returnvalue">integer</code></p>
       <p>Выдаёт номер TCP-порта, через который сервер принял текущее подключение, либо <code class="literal">NULL</code>, если текущее подключение установлено через Unix-сокет.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.11.1.1.1" class="indexterm"></a> <code class="function">pg_backend_pid</code> () → <code class="returnvalue">integer</code></p>
       <p>Выдаёт идентификатор серверного процесса, обслуживающего текущий сеанс.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.12.1.1.1" class="indexterm"></a> <code class="function">pg_blocking_pids</code> ( <code class="type">integer</code> ) → <code class="returnvalue">integer[]</code></p>
       <p>Выдаёт массив с идентификаторами процессов сеансов, которые блокируют серверный процесс с указанным идентификатором, либо пустой массив, если указанный серверный процесс не найден или не заблокирован.</p>
       <p>Один серверный процесс блокирует другой, если он либо удерживает блокировку, конфликтующую с блокировкой, запрашиваемой вторым (жёсткая блокировка), либо ожидает блокировку, которая вызвала бы конфликт с запросом блокировки заблокированного процесса и находится перед ней в очереди ожидания (мягкая блокировка). При распараллеливании запросов эта функция всегда выдаёт видимые клиентом идентификаторы процессов (то есть, результаты <code class="function">pg_backend_pid</code>), даже если фактическая блокировка удерживается или ожидается дочерним рабочим процессом. Вследствие этого в результатах могут оказаться дублирующиеся PID. Также заметьте, что когда конфликтующую блокировку удерживает подготовленная транзакция, в выводе этой функции она будет представлена нулевым ID процесса.</p>
       <p>Частые вызовы этой функции могут отразиться на производительности базы данных, так как ей нужен монопольный доступ к общему состоянию менеджера блокировок, пусть и на короткое время.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.13.1.1.1" class="indexterm"></a> <code class="function">pg_conf_load_time</code> () → <code class="returnvalue">timestamp with time zone</code></p>
       <p>Выдаёт время, когда в последний раз сервер загружал файлы конфигурации. (Если текущий сеанс начался раньше, она возвращает время, когда эти файлы были перезагружены для данного сеанса, так что в разных сеансах это значение может немного различаться. В противном случае это будет время, когда файлы конфигурации считал главный процесс.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.14.1.1.1" class="indexterm"></a> <a id="id-1.5.8.32.3.4.2.2.14.1.1.2" class="indexterm"></a> <a id="id-1.5.8.32.3.4.2.2.14.1.1.3" class="indexterm"></a> <a id="id-1.5.8.32.3.4.2.2.14.1.1.4" class="indexterm"></a> <code class="function">pg_current_logfile</code> ( [<span class="optional"><code class="type">text</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт путь к файлу журнала, в настоящее время используемому сборщиком сообщений. Этот путь состоит из пути каталога <a class="xref" href="runtime-config-logging.html#GUC-LOG-DIRECTORY">log_directory</a> и имени конкретного файла. Если сборщик сообщений отключён, выдаётся значение <code class="literal">NULL</code>. Если ведутся несколько журналов в разных форматах, при вызове функции <code class="function">pg_current_logfile</code> без аргументов возвращается путь первого существующего файла следующего формата (в порядке приоритета): <span class="systemitem">stderr</span>, <span class="systemitem">csvlog</span>, <code class="literal">jsonlog</code>. Если файл журнала в этих форматах отсутствует, выдаётся <code class="literal">NULL</code>. Чтобы запросить информацию о файле в определённом формате, передайте <span class="systemitem">csvlog</span>, <code class="literal">jsonlog</code> или <span class="systemitem">stderr</span> в качестве значения необязательного параметра типа <code class="type">text</code>. Если запрошенный формат не включён в <a class="xref" href="runtime-config-logging.html#GUC-LOG-DESTINATION">log_destination</a>, результатом будет <code class="literal">NULL</code>. Результат функции отражает содержимое файла <code class="filename">current_logfiles</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.15.1.1.1" class="indexterm"></a> <code class="function">pg_my_temp_schema</code> () → <code class="returnvalue">oid</code></p>
       <p>Выдаёт OID временной схемы текущего сеанса или 0, если такой схемы нет (в рамках сеанса не создавались временные таблицы).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.16.1.1.1" class="indexterm"></a> <code class="function">pg_is_other_temp_schema</code> ( <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Выдаёт true, если заданный OID относится к временной схеме другого сеанса. (Это может быть полезно, например для исключения временных таблиц других сеансов из общего списка при просмотре таблиц базы данных.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.17.1.1.1" class="indexterm"></a> <code class="function">pg_jit_available</code> () → <code class="returnvalue">boolean</code></p>
       <p>Выдаёт true, если в данном сеансе доступна <acronym class="acronym">JIT</acronym>-компиляция (см. <a class="xref" href="jit.html" title="Глава 32. JIT-компиляция">Главу 32</a>) и параметр конфигурации <a class="xref" href="runtime-config-query.html#GUC-JIT">jit</a> включён.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.18.1.1.1" class="indexterm"></a> <code class="function">pg_listening_channels</code> () → <code class="returnvalue">setof text</code></p>
       <p>Выдаёт список имён каналов асинхронных уведомлений, по которым текущий сеанс принимает сигналы.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.19.1.1.1" class="indexterm"></a> <code class="function">pg_notification_queue_usage</code> () → <code class="returnvalue">double precision</code></p>
       <p>Выдаёт долю (0–1) максимального размера очереди асинхронных уведомлений, в настоящее время занятую уведомлениями, ожидающими обработки. За дополнительными сведениями обратитесь к <a class="xref" href="sql-listen.html" title="LISTEN"><span class="refentrytitle">LISTEN</span></a> и <a class="xref" href="sql-notify.html" title="NOTIFY"><span class="refentrytitle">NOTIFY</span></a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.20.1.1.1" class="indexterm"></a> <code class="function">pg_postmaster_start_time</code> () → <code class="returnvalue">timestamp with time zone</code></p>
       <p>Выдаёт время, когда был запущен сервер.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.21.1.1.1" class="indexterm"></a> <code class="function">pg_safe_snapshot_blocking_pids</code> ( <code class="type">integer</code> ) → <code class="returnvalue">integer[]</code></p>
       <p>Выдаёт массив с идентификаторами процессов сеансов, которые блокируют серверный процесс с указанным идентификатором, не давая ему получить безопасный снимок, либо выдаёт пустой массив, если такой серверный процесс не найден или он не заблокирован.</p>
       <p>Сеанс, выполняющий транзакцию уровня <code class="literal">SERIALIZABLE</code>, блокирует транзакцию <code class="literal">SERIALIZABLE READ ONLY DEFERRABLE</code>, не давая ей получить снимок, пока она не определит, что можно безопасно избежать установления предикатных блокировок. За дополнительными сведениями о сериализуемых и откладываемых транзакциях обратитесь к <a class="xref" href="transaction-iso.html#XACT-SERIALIZABLE" title="13.2.3. Уровень изоляции Serializable">Подразделу 13.2.3</a>.</p>
       <p>Частые вызовы этой функции могут отразиться на производительности сервера, так как ей нужен доступ к общему состоянию менеджера предикатных блокировок, пусть и на короткое время.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.22.1.1.1" class="indexterm"></a> <code class="function">pg_trigger_depth</code> () → <code class="returnvalue">integer</code></p>
       <p>Выдаёт текущий уровень вложенности в триггерах <span class="productname">PostgreSQL</span> (0, если эта функция вызывается не из тела триггера, непосредственно или косвенно).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.23.1.1.1" class="indexterm"></a>
        <code class="function">session_user</code>
        → <code class="returnvalue">name</code>
       </p>
       <p>Выдаёт имя пользователя сеанса.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.24.1.1.1" class="indexterm"></a>
        <code class="function">system_user</code>
        → <code class="returnvalue">text</code>
       </p>
       <p>Возвращает метод аутентификации и идентификационную информацию (если есть), которые пользователь представил во время цикла аутентификации до того, как ему была назначена роль базы данных. Он представлен как <code class="literal">auth_method:identity</code> или <code class="literal">NULL</code>, если пользователь не прошел аутентификацию (например, если была использована <a class="link" href="auth-trust.html" title="21.4. Аутентификация trust">аутентификация trust</a>).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
        <a id="id-1.5.8.32.3.4.2.2.25.1.1.1" class="indexterm"></a>
        <code class="function">user</code>
        → <code class="returnvalue">name</code>
       </p>
       <p>Аналог <code class="function">current_user</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.3.4.2.2.26.1.1.1" class="indexterm"></a> <code class="function">version</code> () → <code class="returnvalue">text</code></p>
       <p>Выдаёт текстовую строку, описывающую версию сервера <span class="productname">PostgreSQL</span>. Эту информацию также можно получить из переменной <a class="xref" href="runtime-config-preset.html#GUC-SERVER-VERSION">server_version</a> или, в более машинно-ориентированном формате, из переменной <a class="xref" href="runtime-config-preset.html#GUC-SERVER-VERSION-NUM">server_version_num</a>. При разработке программ следует использовать функцию <code class="varname">server_version_num</code> (появившуюся в версии 8.2) или <a class="xref" href="libpq-status.html#LIBPQ-PQSERVERVERSION"><code class="function">PQserverVersion</code></a>, а не разбирать текстовую версию.</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">Примечание</h3><p>Функции <code class="function">current_catalog</code>, <code class="function">current_role</code>, <code class="function">current_schema</code>, <code class="function">current_user</code>, <code class="function">session_user</code> и <code class="function">user</code> имеют особый синтаксический статус в <acronym class="acronym">SQL</acronym>: они должны вызываться без скобок после имени. PostgreSQL позволяет добавить скобки в вызове <code class="function">current_schema</code>, но не других функций.</p></div><p>Функция <code class="function">session_user</code> обычно возвращает имя пользователя, установившего текущее соединение с базой данных, но суперпользователи могут изменить это имя, выполнив команду <a class="xref" href="sql-set-session-authorization.html" title="SET SESSION AUTHORIZATION"><span class="refentrytitle">SET SESSION AUTHORIZATION</span></a>. Функция <code class="function">current_user</code> возвращает идентификатор пользователя, по которому будут проверяться его права. Обычно это тот же пользователь, что и пользователь сеанса, но его можно сменить с помощью <a class="xref" href="sql-set-role.html" title="SET ROLE"><span class="refentrytitle">SET ROLE</span></a>. Этот идентификатор также меняется при выполнении функций с атрибутом <code class="literal">SECURITY DEFINER</code>. На языке Unix пользователь сеанса называется <span class="quote">«<span class="quote">реальным</span>»</span>, а текущий — <span class="quote">«<span class="quote">эффективным</span>»</span>. Имена <code class="function">current_role</code> и <code class="function">user</code> являются синонимами <code class="function">current_user</code>. (В стандарте SQL <code class="function">current_role</code> и <code class="function">current_user</code> имеют разное значение, но в <span class="productname">PostgreSQL</span> они не различаются, так как пользователи и роли объединены в единую сущность.)</p></div><div class="sect2" id="FUNCTIONS-INFO-ACCESS"><div class="titlepage"><div><div><h3 class="title">9.26.2. Функции для проверки прав доступа <a href="#FUNCTIONS-INFO-ACCESS" class="id_link">#</a></h3></div></div></div><a id="id-1.5.8.32.4.2" class="indexterm"></a><p>В <a class="xref" href="functions-info.html#FUNCTIONS-INFO-ACCESS-TABLE" title="Таблица 9.68. Функции для проверки прав доступа">Таблице 9.68</a> показаны функции, позволяющие программно проверить права доступа к объектам. (Подробнее о правах рассказывается в <a class="xref" href="ddl-priv.html" title="5.7. Права">Разделе 5.7</a>.) Этим функциям в качестве идентификатора пользователя, для которого запрашиваются права, можно передать его имя или OID (<code class="structname">pg_authid</code>.<code class="structfield">oid</code>), а также можно передать <code class="literal">public</code> (это будет указывать на псевдороль PUBLIC). Кроме того, аргумент <em class="parameter"><code>user</code></em> можно полностью опустить, тогда будет подразумеваться <code class="function">current_user</code>. Объект, права для доступа к которому запрашиваются, также можно задать по имени или по OID. Когда указывается имя объекта, его можно дополнить именем схемы, если это уместно. Запрашиваемое право записывается текстовой строкой, которая должна задавать одно из прав доступа, соответствующих типу объекта (например, <code class="literal">SELECT</code>). Дополнительно к названию права можно добавить <code class="literal">WITH GRANT OPTION</code> и проверить, разрешено ли пользователю передавать это право другим. Кроме того, в одном параметре можно перечислить несколько прав через запятую, и тогда функция возвратит <code class="literal">true</code>, если пользователь имеет какие-либо из них. (Регистр в названии прав не имеет значения, а между ними (но не внутри) разрешены пробельные символы.) Пара примеров: </p><pre class="programlisting">SELECT has_table_privilege('myschema.mytable', 'select');
SELECT has_table_privilege('joe', 'mytable',
  'INSERT, SELECT WITH GRANT OPTION');</pre><div class="table" id="FUNCTIONS-INFO-ACCESS-TABLE"><p class="title"><strong>Таблица 9.68. Функции для проверки прав доступа</strong></p><div class="table-contents"><table class="table" summary="Функции для проверки прав доступа" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.1.1.1.1" class="indexterm"></a> <code class="function">has_any_column_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>table</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь указанное право для какого-либо столбца таблицы? Ответ положительный, когда он имеет это право для всей таблицы или ему дано соответствующее право на уровне столбцов хотя бы для одного столбца. Возможные права: <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code> и <code class="literal">REFERENCES</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.2.1.1.1" class="indexterm"></a> <code class="function">has_column_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>table</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>column</code></em> <code class="type">text</code> или <code class="type">smallint</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь указанное право для заданного столбца таблицы? Ответ положительный, когда он имеет это право для всей таблицы или ему дано соответствующее право на уровне столбца. Столбец можно задать по имени или номеру атрибута (<code class="structname">pg_attribute</code>.<code class="structfield">attnum</code>). Возможные права: <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code> и <code class="literal">REFERENCES</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.3.1.1.1" class="indexterm"></a> <code class="function">has_database_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>database</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь указанное право в базе данных? Возможные права: <code class="literal">CREATE</code>, <code class="literal">CONNECT</code>, <code class="literal">TEMPORARY</code> и <code class="literal">TEMP</code> (синоним <code class="literal">TEMPORARY</code>).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.4.1.1.1" class="indexterm"></a> <code class="function">has_foreign_data_wrapper_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>fdw</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для обёртки сторонних данных? На данный момент возможно только одно право: <code class="literal">USAGE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.5.1.1.1" class="indexterm"></a> <code class="function">has_function_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>function</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для функции? Возможно единственное право: <code class="literal">EXECUTE</code>.</p>
       <p>При указании функции по имени, а не по OID, допускаются те же входные значения, что и для типа <code class="type">regprocedure</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>). Например: </p><pre class="programlisting">SELECT has_function_privilege('joeuser', 'myfunc(int, text)', 'execute');</pre></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.6.1.1.1" class="indexterm"></a> <code class="function">has_language_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>language</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для языка? Возможно единственное право: <code class="literal">USAGE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.7.1.1.1" class="indexterm"></a> <code class="function">has_parameter_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>parameter</code></em> <code class="type">text</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для параметра конфигурации? Регистр в имени параметра игнорируется. Возможные права: <code class="literal">SET</code> и <code class="literal">ALTER SYSTEM</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.8.1.1.1" class="indexterm"></a> <code class="function">has_schema_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>schema</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для схемы? Возможные права: <code class="literal">CREATE</code> и <code class="literal">USAGE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.9.1.1.1" class="indexterm"></a> <code class="function">has_sequence_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>sequence</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для последовательности? Возможные права: <code class="literal">USAGE</code>, <code class="literal">SELECT</code> и <code class="literal">UPDATE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.10.1.1.1" class="indexterm"></a> <code class="function">has_server_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>server</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для стороннего сервера? На данный момент возможно только одно право: <code class="literal">USAGE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.11.1.1.1" class="indexterm"></a> <code class="function">has_table_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>table</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для таблицы? Возможные права: <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, <code class="literal">TRUNCATE</code>, <code class="literal">REFERENCES</code> и <code class="literal">TRIGGER</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.12.1.1.1" class="indexterm"></a> <code class="function">has_tablespace_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>tablespace</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для табличного пространства? Возможно единственное право: <code class="literal">CREATE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.13.1.1.1" class="indexterm"></a> <code class="function">has_type_privilege</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>type</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для типа данных? Возможно единственное право: <code class="literal">USAGE</code>. При указании типа по имени, а не по OID, допускаются те же входные значения, что и для типа данных <code class="type">regtype</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.14.1.1.1" class="indexterm"></a> <code class="function">pg_has_role</code> ( [<span class="optional"><em class="parameter"><code>user</code></em> <code class="type">name</code> или <code class="type">oid</code>, </span>] <em class="parameter"><code>role</code></em> <code class="type">text</code> или <code class="type">oid</code>, <em class="parameter"><code>privilege</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Имеет ли пользователь право для роли? Возможные права: <code class="literal">MEMBER</code>, <code class="literal">USAGE</code> и <code class="literal">SET</code>. Под <code class="literal">MEMBER</code> подразумевается непосредственное или косвенное членство в роли независимо от того, какие особые права могут быть предоставлены. <code class="literal">USAGE</code> означает, что пользователь получает права этой роли автоматически, не выполняя <code class="command">SET ROLE</code>, а <code class="literal">SET</code> — можно ли изменить роль командой <code class="command">SET ROLE</code>. Эта функция не поддерживает особый случай установки значения <code class="literal">public</code> для <em class="parameter"><code>user</code></em>, так как псевдороль PUBLIC не может быть членом обычных ролей.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.4.2.2.15.1.1.1" class="indexterm"></a> <code class="function">row_security_active</code> ( <em class="parameter"><code>table</code></em> <code class="type">text</code> или <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Действует ли защита на уровне строк для заданной таблицы в контексте текущего пользователя в текущем окружении?</p></td></tr></tbody></table></div></div><br class="table-break" /><p>В <a class="xref" href="functions-info.html#FUNCTIONS-ACLITEM-OP-TABLE" title="Таблица 9.69. Операторы для типа aclitem">Таблице 9.69</a> показаны операторы, предназначенные для работы с типом <code class="type">aclitem</code>, который представляет в системном каталоге права доступа. О содержании значений этого типа рассказывается в <a class="xref" href="ddl-priv.html" title="5.7. Права">Разделе 5.7</a>.</p><div class="table" id="FUNCTIONS-ACLITEM-OP-TABLE"><p class="title"><strong>Таблица 9.69. Операторы для типа <code class="type">aclitem</code></strong></p><div class="table-contents"><table class="table" summary="Операторы для типа aclitem" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Оператор</p>
        <p>Описание</p>
        <p>Пример(ы)</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.32.4.6.2.2.1.1.1.1" class="indexterm"></a>
         <code class="type">aclitem</code> <code class="literal">=</code> <code class="type">aclitem</code>
         → <code class="returnvalue">boolean</code>
        </p>
        <p>Значения <code class="type">aclitem</code> равны? (Заметьте, что для типа <code class="type">aclitem</code> не определён обычный набор операторов сравнения, поддерживается только проверка равенства. Массивы <code class="type">aclitem</code>, в свою очередь, также могут сравниваться только на равенство.)</p>
        <p>
         <code class="literal">'calvin=r*w/hobbes'::aclitem = 'calvin=r*w*/hobbes'::aclitem</code>
         → <code class="returnvalue">f</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <a id="id-1.5.8.32.4.6.2.2.2.1.1.1" class="indexterm"></a>
         <code class="type">aclitem[]</code> <code class="literal">@&gt;</code> <code class="type">aclitem</code>
         → <code class="returnvalue">boolean</code>
        </p>
        <p>Содержит ли массив заданное право? (Ответ положительный, если в массиве есть запись, соответствующая правообладателю и праводателю из <code class="type">aclitem</code> и содержащая как минимум указанный набор прав.)</p>
        <p>
         <code class="literal">'{calvin=r*w/hobbes,hobbes=r*w*/postgres}'::aclitem[] @&gt; 'calvin=r*/hobbes'::aclitem</code>
         → <code class="returnvalue">t</code>
        </p></td></tr><tr><td class="func_table_entry"><p class="func_signature">
         <code class="type">aclitem[]</code> <code class="literal">~</code> <code class="type">aclitem</code>
         → <code class="returnvalue">boolean</code>
        </p>
        <p>Это устаревший синоним для <code class="literal">@&gt;</code>.</p>
        <p>
         <code class="literal">'{calvin=r*w/hobbes,hobbes=r*w*/postgres}'::aclitem[] ~ 'calvin=r*/hobbes'::aclitem</code>
         → <code class="returnvalue">t</code>
        </p></td></tr></tbody></table></div></div><br class="table-break" /><p>В <a class="xref" href="functions-info.html#FUNCTIONS-ACLITEM-FN-TABLE" title="Таблица 9.70. Функции для типа aclitem">Таблице 9.70</a> приведены дополнительные функции, предназначенные для работы с типом <code class="type">aclitem</code>.</p><div class="table" id="FUNCTIONS-ACLITEM-FN-TABLE"><p class="title"><strong>Таблица 9.70. Функции для типа <code class="type">aclitem</code></strong></p><div class="table-contents"><table class="table" summary="Функции для типа aclitem" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.8.2.2.1.1.1.1" class="indexterm"></a> <code class="function">acldefault</code> ( <em class="parameter"><code>type</code></em> <code class="type">"char"</code>, <em class="parameter"><code>ownerId</code></em> <code class="type">oid</code> ) → <code class="returnvalue">aclitem[]</code></p>
       <p>Выдаёт массив с элементами <code class="type">aclitem</code>, содержащий действующий по умолчанию набор прав доступа для объектов типа <em class="parameter"><code>type</code></em>, принадлежащих роли <em class="parameter"><code>ownerId</code></em>. Результат показывает, какие права доступа подразумеваются, когда список ACL определённого объекта пуст. (Права доступа, действующие по умолчанию, описываются в <a class="xref" href="ddl-priv.html" title="5.7. Права">Разделе 5.7</a>.) Параметр <em class="parameter"><code>type</code></em> может принимать одно из следующих значений: 'c' —столбец (<code class="literal">COLUMN</code>), 'r' — таблица или подобный таблице объект (<code class="literal">TABLE</code>), 's' — последовательность (<code class="literal">SEQUENCE</code>), 'd' — база данных (<code class="literal">DATABASE</code>), 'f' — функция (<code class="literal">FUNCTION</code>) или процедура (<code class="literal">PROCEDURE</code>), 'l' — язык (<code class="literal">LANGUAGE</code>), 'L' — большой объект (<code class="literal">LARGE OBJECT</code>), 'n' — схема (<code class="literal">SCHEMA</code>), 'p' — параметр (<code class="literal">PARAMETER</code>), 't' — табличное пространство (<code class="literal">TABLESPACE</code>), 'F' — обёртка сторонних данных (<code class="literal">FOREIGN DATA WRAPPER</code>), 'S' — сторонний сервер (<code class="literal">FOREIGN SERVER</code>) и 'T' — тип (<code class="literal">TYPE</code>) или домен (<code class="literal">DOMAIN</code>).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.8.2.2.2.1.1.1" class="indexterm"></a> <code class="function">aclexplode</code> ( <code class="type">aclitem[]</code> ) → <code class="returnvalue">setof record</code> ( <em class="parameter"><code>grantor</code></em> <code class="type">oid</code>, <em class="parameter"><code>grantee</code></em> <code class="type">oid</code>, <em class="parameter"><code>privilege_type</code></em> <code class="type">text</code>, <em class="parameter"><code>is_grantable</code></em> <code class="type">boolean</code> )</p>
       <p>Возвращает массив <code class="type">aclitem</code> в виде набора табличных строк. Если праводателем является псевдороль PUBLIC, она представляется нулём в столбце <em class="parameter"><code>grantee</code></em>. Назначенные права представляются ключевыми словами <code class="literal">SELECT</code>, <code class="literal">INSERT</code> и т. д. (полный список находится в <a class="xref" href="ddl-priv.html#PRIVILEGE-ABBREVS-TABLE" title="Таблица 5.1. Сокращённые обозначения прав в ACL">Таблице 5.1</a>). Заметьте, что каждое право выводится в отдельной строке, так что в столбце <em class="parameter"><code>privilege_type</code></em> содержится только одно ключевое слово.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.4.8.2.2.3.1.1.1" class="indexterm"></a> <code class="function">makeaclitem</code> ( <em class="parameter"><code>grantee</code></em> <code class="type">oid</code>, <em class="parameter"><code>grantor</code></em> <code class="type">oid</code>, <em class="parameter"><code>privileges</code></em> <code class="type">text</code>, <em class="parameter"><code>is_grantable</code></em> <code class="type">boolean</code> ) → <code class="returnvalue">aclitem</code></p>
       <p>Конструирует значение <code class="type">aclitem</code> с заданными свойствами. В аргументе <em class="parameter"><code>privileges</code></em> передаётся список имён прав, разделённых запятыми, таких как <code class="literal">SELECT</code>, <code class="literal">INSERT</code> и т. д., которые устанавливаются в результате. (Регистр строки права не имеет значения, дополнительные пробелы допускаются между именами прав, но не внутри них.)</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-SCHEMA"><div class="titlepage"><div><div><h3 class="title">9.26.3. Функции для определения видимости <a href="#FUNCTIONS-INFO-SCHEMA" class="id_link">#</a></h3></div></div></div><p>В <a class="xref" href="functions-info.html#FUNCTIONS-INFO-SCHEMA-TABLE" title="Таблица 9.71. Функции для определения видимости">Таблице 9.71</a> показаны функции, определяющие <em class="firstterm">видимость</em> объекта с текущим путём поиска схем. К примеру, таблица считается видимой, если содержащая её схема включена в путь поиска и нет другой таблицы с тем же именем, которая была бы найдена в этом пути раньше. Другими словами, к этой таблице можно будет обратиться просто по её имени, без явного указания схемы. Просмотреть список всех видимых таблиц можно так: </p><pre class="programlisting">SELECT relname FROM pg_class WHERE pg_table_is_visible(oid);</pre><p> Объект, представляющий функцию и оператор, считаются видимым в пути поиска, если при просмотре пути не находится предшествующий ему другой объект с тем же именем <span class="emphasis"><em>и типами аргументов</em></span>. Для семейств и классов операторов помимо имени объекта во внимание принимается также связанный метод доступа к индексу.</p><a id="id-1.5.8.32.5.3" class="indexterm"></a><div class="table" id="FUNCTIONS-INFO-SCHEMA-TABLE"><p class="title"><strong>Таблица 9.71. Функции для определения видимости</strong></p><div class="table-contents"><table class="table" summary="Функции для определения видимости" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.1.1.1.1" class="indexterm"></a> <code class="function">pg_collation_is_visible</code> ( <em class="parameter"><code>collation</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видимо ли правило сортировки в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_conversion_is_visible</code> ( <em class="parameter"><code>conversion</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видимо ли преобразование в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_function_is_visible</code> ( <em class="parameter"><code>function</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видима ли функция в пути поиска? (Также работает для процедур и агрегатных функций.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.4.1.1.1" class="indexterm"></a> <code class="function">pg_opclass_is_visible</code> ( <em class="parameter"><code>opclass</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Виден ли класс операторов в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.5.1.1.1" class="indexterm"></a> <code class="function">pg_operator_is_visible</code> ( <em class="parameter"><code>operator</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли оператор в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.6.1.1.1" class="indexterm"></a> <code class="function">pg_opfamily_is_visible</code> ( <em class="parameter"><code>opclass</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видимо ли семейство операторов в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.7.1.1.1" class="indexterm"></a> <code class="function">pg_statistics_obj_is_visible</code> ( <em class="parameter"><code>stat</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли объект статистики в пути поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.8.1.1.1" class="indexterm"></a> <code class="function">pg_table_is_visible</code> ( <em class="parameter"><code>table</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видима ли таблица в пути поиска? (Эта проверка работает со всеми типами отношений, включая представления, матпредставления, индексы, последовательности и сторонние таблицы.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.9.1.1.1" class="indexterm"></a> <code class="function">pg_ts_config_is_visible</code> ( <em class="parameter"><code>config</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видима ли конфигурация текстового поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.10.1.1.1" class="indexterm"></a> <code class="function">pg_ts_dict_is_visible</code> ( <em class="parameter"><code>dict</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли словарь текстового поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.11.1.1.1" class="indexterm"></a> <code class="function">pg_ts_parser_is_visible</code> ( <em class="parameter"><code>parser</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли анализатор текстового поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.12.1.1.1" class="indexterm"></a> <code class="function">pg_ts_template_is_visible</code> ( <em class="parameter"><code>template</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли шаблон текстового поиска?</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.5.4.2.2.13.1.1.1" class="indexterm"></a> <code class="function">pg_type_is_visible</code> ( <em class="parameter"><code>type</code></em> <code class="type">oid</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Видим ли тип (или домен) в пути поиска?</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Всем этим функциям должен передаваться OID проверяемого объекта. Если вы хотите проверить объект по имени, удобнее использовать типы-псевдонимы OID (<code class="type">regclass</code>, <code class="type">regtype</code>, <code class="type">regprocedure</code>, <code class="type">regoperator</code>, <code class="type">regconfig</code> или <code class="type">regdictionary</code>), например: </p><pre class="programlisting">SELECT pg_type_is_visible('myschema.widget'::regtype);</pre><p> Заметьте, что проверять таким способом имена без указания схемы не имеет большого смысла — если имя удастся распознать, значит и объект будет видимым.</p></div><div class="sect2" id="FUNCTIONS-INFO-CATALOG"><div class="titlepage"><div><div><h3 class="title">9.26.4. Функции для обращения к системным каталогам <a href="#FUNCTIONS-INFO-CATALOG" class="id_link">#</a></h3></div></div></div><p>В <a class="xref" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Таблица 9.72. Функции для обращения к системным каталогам">Таблице 9.72</a> перечислены функции, извлекающие информацию из системных каталогов.</p><div class="table" id="FUNCTIONS-INFO-CATALOG-TABLE"><p class="title"><strong>Таблица 9.72. Функции для обращения к системным каталогам</strong></p><div class="table-contents"><table class="table" summary="Функции для обращения к системным каталогам" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">format_type</code> ( <em class="parameter"><code>type</code></em> <code class="type">oid</code>, <em class="parameter"><code>typemod</code></em> <code class="type">integer</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт в формате SQL имя типа данных, определяемого по OID и, возможно, модификатору типа. Если модификатор неизвестен, вместо него можно передать NULL.</p></td></tr><tr><td id="PG-CHAR-TO-ENCODING" class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_char_to_encoding</code> ( <em class="parameter"><code>encoding</code></em> <code class="type">name</code> ) → <code class="returnvalue">integer</code></p>
       <p>Преобразует предоставленное имя кодировки в целое число, представляющее внутренний идентификатор, используемый в некоторых таблицах системного каталога. Возвращает <code class="literal">-1</code>, если указано неизвестное имя кодировки.</p></td></tr><tr><td id="PG-ENCODING-TO-CHAR" class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_encoding_to_char</code> ( <em class="parameter"><code>encoding</code></em> <code class="type">integer</code> ) → <code class="returnvalue">name</code></p>
       <p>Преобразует целое число, используемое в качестве внутреннего идентификатора кодировки в некоторых таблицах системного каталога, в понятное имя. Возвращает пустую строку, если указан неправильный номер кодировки.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.4.1.1.1" class="indexterm"></a> <code class="function">pg_get_catalog_foreign_keys</code> () → <code class="returnvalue">setof record</code> ( <em class="parameter"><code>fktable</code></em> <code class="type">regclass</code>, <em class="parameter"><code>fkcols</code></em> <code class="type">text[]</code>, <em class="parameter"><code>pktable</code></em> <code class="type">regclass</code>, <em class="parameter"><code>pkcols</code></em> <code class="type">text[]</code>, <em class="parameter"><code>is_array</code></em> <code class="type">boolean</code>, <em class="parameter"><code>is_opt</code></em> <code class="type">boolean</code> )</p>
       <p>Возвращает набор записей, описывающих отношения внешних ключей, существующие в системных каталогах <span class="productname">PostgreSQL</span>. Столбец <em class="parameter"><code>fktable</code></em> содержит имя ссылающегося каталога, а столбец <em class="parameter"><code>fkcols</code></em> содержит имена ссылающихся столбцов. Точно так же столбец <em class="parameter"><code>pktable</code></em> содержит имя целевого каталога, а столбец <em class="parameter"><code>pkcols</code></em> содержит имена целевых столбцов. Если столбец <em class="parameter"><code>is_array</code></em> содержит значение true, последний ссылающийся столбец является массивом, каждый из элементов которого должен соответствовать некоторой записи в целевом каталоге. Если столбец <em class="parameter"><code>is_opt</code></em> содержит значение true, ссылающиеся столбцы могут содержать нули вместо действительной ссылки.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.5.1.1.1" class="indexterm"></a> <code class="function">pg_get_constraintdef</code> ( <em class="parameter"><code>constraint</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую ограничение. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.6.1.1.1" class="indexterm"></a> <code class="function">pg_get_expr</code> ( <em class="parameter"><code>expr</code></em> <code class="type">pg_node_tree</code>, <em class="parameter"><code>relation</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Декомпилирует внутреннюю форму выражений, находящихся в системных каталогах, например, выражений, задающих значения по умолчанию. Если выражение может содержать Vars (переменные), передайте во втором параметре OID отношения, к которому обращается данное выражение; в противном случае достаточно передать 0.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.7.1.1.1" class="indexterm"></a> <code class="function">pg_get_functiondef</code> ( <em class="parameter"><code>func</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую функцию или процедуру. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.) В результате выдаётся полноценный оператор <code class="command">CREATE OR REPLACE FUNCTION</code> или <code class="command">CREATE OR REPLACE PROCEDURE</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.8.1.1.1" class="indexterm"></a> <code class="function">pg_get_function_arguments</code> ( <em class="parameter"><code>func</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает список аргументов для функции или процедуры в том виде, в каком он должен задаваться в команде <code class="command">CREATE FUNCTION</code> (включая значения по умолчанию).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.9.1.1.1" class="indexterm"></a> <code class="function">pg_get_function_identity_arguments</code> ( <em class="parameter"><code>func</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает список аргументов, необходимый для однозначной идентификации функции или процедуры, в том виде, в каком он должен задаваться, например в <code class="command">ALTER FUNCTION</code>. В этом виде значения по умолчанию не указываются.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.10.1.1.1" class="indexterm"></a> <code class="function">pg_get_function_result</code> ( <em class="parameter"><code>func</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает для функции предложение <code class="literal">RETURNS</code> в том виде, в котором оно должно указываться в команде <code class="command">CREATE FUNCTION</code>. Для процедуры возвращается <code class="literal">NULL</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.11.1.1.1" class="indexterm"></a> <code class="function">pg_get_indexdef</code> ( <em class="parameter"><code>index</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>column</code></em> <code class="type">integer</code>, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую индекс. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.) Если передаётся значение <em class="parameter"><code>column</code></em> и оно отлично от нуля, восстанавливается только определение этого столбца.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.12.1.1.1" class="indexterm"></a> <code class="function">pg_get_keywords</code> () → <code class="returnvalue">setof record</code> ( <em class="parameter"><code>word</code></em> <code class="type">text</code>, <em class="parameter"><code>catcode</code></em> <code class="type">"char"</code>, <em class="parameter"><code>barelabel</code></em> <code class="type">boolean</code>, <em class="parameter"><code>catdesc</code></em> <code class="type">text</code>, <em class="parameter"><code>baredesc</code></em> <code class="type">text</code> )</p>
       <p>Выдаёт набор записей, описывающих ключевые слова, которые воспринимает сервер. Столбец <em class="parameter"><code>word</code></em> содержит слово, а столбец <em class="parameter"><code>catcode</code></em> — код категории: <code class="literal">U</code> — не зарезервировано, <code class="literal">C</code> — слово, которое может быть именем столбца, <code class="literal">T</code> — слово, которое может быть именем типа или функции, <code class="literal">R</code> — полностью зарезервированное слово. Столбец <em class="parameter"><code>barelabel</code></em> содержит <code class="literal">true</code>, если ключевое слово можно использовать в качестве <span class="quote">«<span class="quote">открытой</span>»</span> метки столбца в списках <code class="command">SELECT</code>, или <code class="literal">false</code>, если его можно использовать только после <code class="literal">AS</code>. Столбец <code class="structfield">catdesc</code> содержит описание категории слова, возможно локализованное. Столбец <em class="parameter"><code>baredesc</code></em> содержит возможно локализованную строку, описывающую статус метки столбца, содержащего слово.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.13.1.1.1" class="indexterm"></a> <code class="function">pg_get_partkeydef</code> ( <em class="parameter"><code>table</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает определение ключа разбиения секционированной таблицы в той форме, которую он имел бы в предложении <code class="literal">PARTITION BY</code> команды <code class="command">CREATE TABLE</code>. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.14.1.1.1" class="indexterm"></a> <code class="function">pg_get_ruledef</code> ( <em class="parameter"><code>rule</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую правило. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.15.1.1.1" class="indexterm"></a> <code class="function">pg_get_serial_sequence</code> ( <em class="parameter"><code>table</code></em> <code class="type">text</code>, <em class="parameter"><code>column</code></em> <code class="type">text</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт имя последовательности, связанной со столбцом, либо NULL, если такой последовательности нет. Для столбца идентификации это будет последовательность, созданная для него неявно внутри. Для столбцов, имеющих один из последовательных типов (<code class="type">serial</code>, <code class="type">smallserial</code>, <code class="type">bigserial</code>), это последовательность, созданная объявлением данного столбца. В последнем случае эту связь можно изменить или разорвать, воспользовавшись командой <code class="command">ALTER SEQUENCE OWNED BY</code>. (Возможно, эту функцию стоило назвать <code class="function">pg_get_owned_sequence</code>; её существующее имя отражает тот факт, что изначально она использовалась со столбцами последовательных типов.) В первом параметре функции указывается имя таблицы (возможно, дополненное схемой), а во втором — имя столбца. Так как первый параметр может содержать имя схемы и таблицы, он воспринимается не как идентификатор в кавычках и поэтому по умолчанию приводится к нижнему регистру, тогда как имя столбца во втором параметре воспринимается как заключённое в кавычки и в нём регистр символов сохраняется. Эта функция возвращает имя в виде, пригодном для передачи функциям, работающим с последовательностями (см. <a class="xref" href="functions-sequence.html" title="9.17. Функции для работы с последовательностями">Раздел 9.17</a>).</p>
       <p>Обычно эта функция применяется для получения текущего значения последовательности для столбца идентификации или последовательного столбца, например так: </p><pre class="programlisting">SELECT currval(pg_get_serial_sequence('sometable', 'id'));</pre></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.16.1.1.1" class="indexterm"></a> <code class="function">pg_get_statisticsobjdef</code> ( <em class="parameter"><code>statobj</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую объект расширенной статистики. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.17.1.1.1" class="indexterm"></a> <code class="function">pg_get_triggerdef</code> ( <em class="parameter"><code>trigger</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду, создающую триггер. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.18.1.1.1" class="indexterm"></a> <code class="function">pg_get_userbyid</code> ( <em class="parameter"><code>role</code></em> <code class="type">oid</code> ) → <code class="returnvalue">name</code></p>
       <p>Выдаёт имя роли по заданному OID.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.19.1.1.1" class="indexterm"></a> <code class="function">pg_get_viewdef</code> ( <em class="parameter"><code>view</code></em> <code class="type">oid</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду <code class="command">SELECT</code>, определяющую представление или матпредставление. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_get_viewdef</code> ( <em class="parameter"><code>view</code></em> <code class="type">oid</code>, <em class="parameter"><code>wrap_column</code></em> <code class="type">integer</code> ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду <code class="command">SELECT</code>, определяющую представление или матпредставление. (Текст команды не является изначальным, он восстанавливается путём декомпиляции.) В этой вариации функции всегда применяется визуальное улучшение и длинные строки переносятся, чтобы текст умещался по ширине в заданное число столбцов.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">pg_get_viewdef</code> ( <em class="parameter"><code>view</code></em> <code class="type">text</code> [<span class="optional">, <em class="parameter"><code>pretty</code></em> <code class="type">boolean</code></span>] ) → <code class="returnvalue">text</code></p>
       <p>Восстанавливает команду <code class="command">SELECT</code>, определяющую представление или матпредставление, заданное по имени, а не по OID. (Это устаревшая вариация, используйте вместо неё вариацию с OID).</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.22.1.1.1" class="indexterm"></a> <code class="function">pg_index_column_has_property</code> ( <em class="parameter"><code>index</code></em> <code class="type">regclass</code>, <em class="parameter"><code>column</code></em> <code class="type">integer</code>, <em class="parameter"><code>property</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Проверяет, имеет ли столбец индекса заданное свойство. Типичные свойства столбцов описаны в <a class="xref" href="functions-info.html#FUNCTIONS-INFO-INDEX-COLUMN-PROPS" title="Таблица 9.73. Свойства столбца индекса">Таблице 9.73</a>. (Заметьте, что расширенные методы доступа могут определять для своих индексов дополнительные свойства.) Если заданное имя свойства не известно или не применимо к конкретному объекту, либо если OID или номер столбца не указывают на существующий объект, эта функция возвращает <code class="literal">NULL</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.23.1.1.1" class="indexterm"></a> <code class="function">pg_index_has_property</code> ( <em class="parameter"><code>index</code></em> <code class="type">regclass</code>, <em class="parameter"><code>property</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Проверяет, имеет ли индекс заданное свойство. Типичные свойства индексов описаны в <a class="xref" href="functions-info.html#FUNCTIONS-INFO-INDEX-COLUMN-PROPS" title="Таблица 9.73. Свойства столбца индекса">Таблице 9.73</a>. (Заметьте, что расширенные методы доступа могут определять для своих индексов дополнительные свойства.) Если заданное имя свойства не известно или не применимо к конкретному объекту, либо если OID не указывает на существующий объект, эта функция возвращает <code class="literal">NULL</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.24.1.1.1" class="indexterm"></a> <code class="function">pg_indexam_has_property</code> ( <em class="parameter"><code>am</code></em> <code class="type">oid</code>, <em class="parameter"><code>property</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Проверяет, имеет ли метод доступа индекса заданное свойство. Свойства методов доступа описаны в <a class="xref" href="functions-info.html#FUNCTIONS-INFO-INDEXAM-PROPS" title="Таблица 9.75. Свойства метода доступа индекса">Таблице 9.75</a>. Если заданное имя свойства неизвестно или не применимо к конкретному объекту, либо если OID не указывает на существующий объект, эта функция возвращает <code class="literal">NULL</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.25.1.1.1" class="indexterm"></a> <code class="function">pg_options_to_table</code> ( <em class="parameter"><code>options_array</code></em> <code class="type">text[]</code> ) → <code class="returnvalue">setof record</code> ( <em class="parameter"><code>option_name</code></em> <code class="type">text</code>, <em class="parameter"><code>option_value</code></em> <code class="type">text</code> )</p>
       <p>Выдаёт набор параметров хранилища, представленных значением из <code class="structname">pg_class</code>.<code class="structfield">reloptions</code> или <code class="structname">pg_attribute</code>.<code class="structfield">attoptions</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.26.1.1.1" class="indexterm"></a> <code class="function">pg_settings_get_flags</code> ( <em class="parameter"><code>guc</code></em> <code class="type">text</code> ) → <code class="returnvalue">text[]</code></p>
       <p>Возвращает массив флагов, связанных с данным параметром GUC, или <code class="literal">NULL</code>, если указанный параметр не существует. Если же он существует, но у него нет флагов для отображения, возвращается пустой массив. Показываются только самые полезные флаги, перечисленные в <a class="xref" href="functions-info.html#FUNCTIONS-PG-SETTINGS-FLAGS" title="Таблица 9.76. Флаги параметров GUC">Таблице 9.76</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.27.1.1.1" class="indexterm"></a> <code class="function">pg_tablespace_databases</code> ( <em class="parameter"><code>tablespace</code></em> <code class="type">oid</code> ) → <code class="returnvalue">setof oid</code></p>
       <p>Выдаёт набор OID баз данных, объекты которых размещены в заданном табличном пространстве. Если эта функция возвращает строки, это означает, что табличное пространство не пустое и удалить его нельзя. Какие именно объекты находятся в табличном пространстве, можно определить, подключаясь к базам данных, OID которых сообщила <code class="function">pg_tablespace_databases</code>, и анализируя их каталоги <code class="structname">pg_class</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.28.1.1.1" class="indexterm"></a> <code class="function">pg_tablespace_location</code> ( <em class="parameter"><code>tablespace</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт путь в файловой системе к местоположению заданного табличного пространства.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.29.1.1.1" class="indexterm"></a> <code class="function">pg_typeof</code> ( <code class="type">"any"</code> ) → <code class="returnvalue">regtype</code></p>
       <p>Выдаёт OID типа данных для переданного значения. Это может быть полезно для разрешения проблем или динамического создания SQL-запросов. Эта функция объявлена как возвращающая тип <code class="type">regtype</code>, который является псевдонимом типа OID (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); это означает, что значение этого типа можно сравнивать как OID, но выводится оно как название типа.</p>
       <p>Пример: </p><pre class="programlisting">SELECT pg_typeof(33);
 pg_typeof
-----------
 integer

SELECT typlen FROM pg_type WHERE oid = pg_typeof(33);
 typlen
--------
      4</pre></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.30.1.1.1" class="indexterm"></a> <code class="function">COLLATION FOR</code> ( <code class="type">"any"</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт имя правила сортировки для переданного значения. Это значение может быть заключено в кавычки и дополнено схемой. Если с выражением аргумента не связано правило сортировки, возвращается <code class="literal">NULL</code>. Если же правила сортировки не применимы для типа аргумента, происходит ошибка.</p>
       <p>Пример: </p><pre class="programlisting">SELECT collation for (description) FROM pg_description LIMIT 1;
 pg_collation_for
------------------
 "default"

SELECT collation for ('foo' COLLATE "de_DE");
 pg_collation_for
------------------
 "de_DE"</pre></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.31.1.1.1" class="indexterm"></a> <code class="function">to_regclass</code> ( <code class="type">text</code> ) → <code class="returnvalue">regclass</code></p>
       <p>Переводит в OID текстовое имя отношения. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regclass</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.32.1.1.1" class="indexterm"></a> <code class="function">to_regcollation</code> ( <code class="type">text</code> ) → <code class="returnvalue">regcollation</code></p>
       <p>Переводит в OID текстовое имя правила сортировки. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regcollation</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.33.1.1.1" class="indexterm"></a> <code class="function">to_regnamespace</code> ( <code class="type">text</code> ) → <code class="returnvalue">regnamespace</code></p>
       <p>Переводит в OID текстовое имя схемы. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regnamespace</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.34.1.1.1" class="indexterm"></a> <code class="function">to_regoper</code> ( <code class="type">text</code> ) → <code class="returnvalue">regoper</code></p>
       <p>Переводит в OID текстовое имя оператора. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regoper</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано или окажется неоднозначным, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.35.1.1.1" class="indexterm"></a> <code class="function">to_regoperator</code> ( <code class="type">text</code> ) → <code class="returnvalue">regoperator</code></p>
       <p>Переводит в OID текстовое имя оператора с указанием типов параметров. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regoperator</code> (см <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.36.1.1.1" class="indexterm"></a> <code class="function">to_regproc</code> ( <code class="type">text</code> ) → <code class="returnvalue">regproc</code></p>
       <p>Переводит в OID текстовое имя функции или процедуры. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regoperator</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано или окажется неоднозначным, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.37.1.1.1" class="indexterm"></a> <code class="function">to_regprocedure</code> ( <code class="type">text</code> ) → <code class="returnvalue">regprocedure</code></p>
       <p>Переводит в OID текстовое имя функции или процедуры с указанием типов аргументов. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regprocedure</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.38.1.1.1" class="indexterm"></a> <code class="function">to_regrole</code> ( <code class="type">text</code> ) → <code class="returnvalue">regrole</code></p>
       <p>Переводит в OID текстовое имя роли. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regrole</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.6.3.2.2.39.1.1.1" class="indexterm"></a> <code class="function">to_regtype</code> ( <code class="type">text</code> ) → <code class="returnvalue">regtype</code></p>
       <p>Переводит в OID текстовое имя типа. Подобный результат можно получить, приведя строку с именем к типу <code class="type">regtype</code> (см. <a class="xref" href="datatype-oid.html" title="8.19. Идентификаторы объектов">Раздел 8.19</a>); однако если имя не будет распознано, эта функция возвратит <code class="literal">NULL</code>, а не выдаст ошибку.</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Многие из функций, восстанавливающих (декомпилирующих) объекты БД, принимают дополнительный флаг <em class="parameter"><code>pretty</code></em>, в котором можно передать <code class="literal">true</code> для визуального улучшения вывода. При этом будут убраны лишние скобки и добавлены пробельные символы, чтобы текст был более разборчивым. Преобразованный вывод легче читается, но формат по умолчанию с большей вероятностью будет успешно восприниматься будущими версиями <span class="productname">PostgreSQL</span>, поэтому для выгрузки содержимого БД рекомендуется избегать использования визуально улучшенного формата. Если параметр <em class="parameter"><code>pretty</code></em> равен <code class="literal">false</code>, это равнозначно его отсутствию.</p><div class="table" id="FUNCTIONS-INFO-INDEX-COLUMN-PROPS"><p class="title"><strong>Таблица 9.73. Свойства столбца индекса</strong></p><div class="table-contents"><table class="table" summary="Свойства столбца индекса" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Описание</th></tr></thead><tbody><tr><td><code class="literal">asc</code></td><td>Сортируется ли столбец по возрастанию при сканировании вперёд?</td></tr><tr><td><code class="literal">desc</code></td><td>Сортируется ли столбец по убыванию при сканировании вперёд?</td></tr><tr><td><code class="literal">nulls_first</code></td><td>Выдаются ли NULL в начале при сканирования вперёд?</td></tr><tr><td><code class="literal">nulls_last</code></td><td>Выдаются ли NULL в конце при сканировании вперёд?</td></tr><tr><td><code class="literal">orderable</code></td><td>Связан ли со столбцом некоторый порядок сортировки?</td></tr><tr><td><code class="literal">distance_orderable</code></td><td>Может ли столбец сканироваться по порядку оператором <span class="quote">«<span class="quote">расстояния</span>»</span>, например, <code class="literal">ORDER BY столбец &lt;-&gt; константа</code> ?</td></tr><tr><td><code class="literal">returnable</code></td><td>Может ли значение столбца быть получено при сканировании только индекса?</td></tr><tr><td><code class="literal">search_array</code></td><td>Поддерживает ли столбец внутренними средствами поиск <code class="literal">столбец = ANY(массив)</code>?</td></tr><tr><td><code class="literal">search_nulls</code></td><td>Поддерживает ли столбец поиск <code class="literal">IS NULL</code> и <code class="literal">IS NOT NULL</code>?</td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-INFO-INDEX-PROPS"><p class="title"><strong>Таблица 9.74. Свойства индекса</strong></p><div class="table-contents"><table class="table" summary="Свойства индекса" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Описание</th></tr></thead><tbody><tr><td><code class="literal">clusterable</code></td><td>Может ли индекс использоваться в команде <code class="literal">CLUSTER</code>?</td></tr><tr><td><code class="literal">index_scan</code></td><td>Поддерживает ли индекс простое сканирование (не по битовой карте)?</td></tr><tr><td><code class="literal">bitmap_scan</code></td><td>Поддерживает ли индекс сканирование по битовой карте?</td></tr><tr><td><code class="literal">backward_scan</code></td><td>Может ли в процессе сканирования меняться направление (для поддержки перемещения курсора <code class="literal">FETCH BACKWARD</code> без необходимости материализации)?</td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-INFO-INDEXAM-PROPS"><p class="title"><strong>Таблица 9.75. Свойства метода доступа индекса</strong></p><div class="table-contents"><table class="table" summary="Свойства метода доступа индекса" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Описание</th></tr></thead><tbody><tr><td><code class="literal">can_order</code></td><td>Поддерживает ли метод доступа <code class="literal">ASC</code>, <code class="literal">DESC</code> и связанные ключевые слова в <code class="literal">CREATE INDEX</code>?</td></tr><tr><td><code class="literal">can_unique</code></td><td>Поддерживает ли метод доступа уникальные индексы?</td></tr><tr><td><code class="literal">can_multi_col</code></td><td>Поддерживает ли метод доступа индексы по нескольким столбцам?</td></tr><tr><td><code class="literal">can_exclude</code></td><td>Поддерживает ли метод доступа ограничения-исключения?</td></tr><tr><td><code class="literal">can_include</code></td><td>Поддерживает ли метод доступа предложение <code class="literal">INCLUDE</code> команды <code class="literal">CREATE INDEX</code>?</td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-PG-SETTINGS-FLAGS"><p class="title"><strong>Таблица 9.76. Флаги параметров GUC</strong></p><div class="table-contents"><table class="table" summary="Флаги параметров GUC" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Флаг</th><th>Описание</th></tr></thead><tbody><tr><td><code class="literal">EXPLAIN</code></td><td>Параметры с этим флагом включаются в команды <code class="command">EXPLAIN (SETTINGS)</code>.</td></tr><tr><td><code class="literal">NO_SHOW_ALL</code></td><td>Параметры с этим флагом исключаются из команд <code class="command">SHOW ALL</code>.</td></tr><tr><td><code class="literal">NO_RESET</code></td><td>Параметры с этим флагом не поддерживают команды <code class="command">RESET</code>.</td></tr><tr><td><code class="literal">NO_RESET_ALL</code></td><td>Параметры с этим флагом исключаются из команд <code class="command">RESET ALL</code>.</td></tr><tr><td><code class="literal">NOT_IN_SAMPLE</code></td><td>Параметры с этим флагом не включаются в <code class="filename">postgresql.conf</code> по умолчанию.</td></tr><tr><td><code class="literal">RUNTIME_COMPUTED</code></td><td>Параметры с этим флагом вычисляются во время выполнения.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-OBJECT"><div class="titlepage"><div><div><h3 class="title">9.26.5. Функции получения информации и адресации объектов <a href="#FUNCTIONS-INFO-OBJECT" class="id_link">#</a></h3></div></div></div><p>В <a class="xref" href="functions-info.html#FUNCTIONS-INFO-OBJECT-TABLE" title="Таблица 9.77. Функции получения информации и адресации объектов">Таблице 9.77</a> перечислены функции, связанные с идентификацией и адресацией объектов баз данных.</p><div class="table" id="FUNCTIONS-INFO-OBJECT-TABLE"><p class="title"><strong>Таблица 9.77. Функции получения информации и адресации объектов</strong></p><div class="table-contents"><table class="table" summary="Функции получения информации и адресации объектов" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.7.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">pg_describe_object</code> ( <em class="parameter"><code>classid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objsubid</code></em> <code class="type">integer</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт текстовое описание объекта БД, идентифицируемого по OID каталога, OID объекта и ID подобъекта (например, номер столбца в таблице; ID подобъекта равен нулю для объекта в целом). Это описание предназначено для человека и может переводиться, в зависимости от конфигурации сервера. Данная функция в особенности полезна, когда требуется узнать, что за объект хранится в каталоге <code class="structname">pg_depend</code>. Эта функция возвращает значение <code class="literal">NULL</code> для неопределённых объектов.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.7.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_identify_object</code> ( <em class="parameter"><code>classid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objsubid</code></em> <code class="type">integer</code> ) → <code class="returnvalue">record</code> ( <em class="parameter"><code>type</code></em> <code class="type">text</code>, <em class="parameter"><code>schema</code></em> <code class="type">text</code>, <em class="parameter"><code>name</code></em> <code class="type">text</code>, <em class="parameter"><code>identity</code></em> <code class="type">text</code> )</p>
       <p>Выдаёт запись, содержащую достаточно информации для однозначной идентификации объекта БД по OID каталога, OID объекта и ID подобъекта. Эта информация предназначена для машины и поэтому никогда не переводится. Столбец <em class="parameter"><code>type</code></em> содержит тип объекта БД; <em class="parameter"><code>schema</code></em> — имя схемы, к которой относится объект (либо <code class="literal">NULL</code> для объектов, не относящихся к схемам); <em class="parameter"><code>name</code></em> — имя объекта, при необходимости в кавычках, которое присутствует, только если оно (возможно, вместе со схемой) однозначно идентифицирует объект (в противном случае <code class="literal">NULL</code>); <em class="parameter"><code>identity</code></em> — полный идентификатор объекта, точный формат которого зависит от типа объекта, а каждая его часть дополняется схемой и заключается в кавычки, если требуется. Для неопределённых объектов эти столбцы содержат значение <code class="literal">NULL</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.7.3.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_identify_object_as_address</code> ( <em class="parameter"><code>classid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objsubid</code></em> <code class="type">integer</code> ) → <code class="returnvalue">record</code> ( <em class="parameter"><code>type</code></em> <code class="type">text</code>, <em class="parameter"><code>object_names</code></em> <code class="type">text[]</code>, <em class="parameter"><code>object_args</code></em> <code class="type">text[]</code> )</p>
       <p>Выдаёт запись, содержащую достаточно информации для однозначной идентификации объекта БД по OID каталога, OID объекта и ID подобъекта. Выдаваемая информация не зависит от текущего сервера, то есть по ней можно идентифицировать одноимённый объект на другом сервере. Поле <em class="parameter"><code>type</code></em> содержит тип объекта БД, а <em class="parameter"><code>object_names</code></em> и <em class="parameter"><code>object_args</code></em> — текстовые массивы, в совокупности формирующие ссылку на объект. Эти три значения можно передать функции <code class="function">pg_get_object_address</code>, чтобы получить внутренний адрес объекта.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.7.3.2.2.4.1.1.1" class="indexterm"></a> <code class="function">pg_get_object_address</code> ( <em class="parameter"><code>type</code></em> <code class="type">text</code>, <em class="parameter"><code>object_names</code></em> <code class="type">text[]</code>, <em class="parameter"><code>object_args</code></em> <code class="type">text[]</code> ) → <code class="returnvalue">record</code> ( <em class="parameter"><code>classid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objid</code></em> <code class="type">oid</code>, <em class="parameter"><code>objsubid</code></em> <code class="type">integer</code> )</p>
       <p>Выдаёт запись, содержащую достаточно информации для уникальной идентификации объекта БД по коду типа и массивам имён и аргументов. В ней возвращаются значения, которые используются в системных каталогах, например <code class="structname">pg_depend</code>, и могут передаваться в другие системные функции, например <code class="function">pg_describe_object</code> или <code class="function">pg_identify_object</code>. Поле <em class="parameter"><code>classid</code></em> содержит OID системного каталога, к которому относится объект; <em class="parameter"><code>objid</code></em> — OID самого объекта, а <em class="parameter"><code>objsubid</code></em> — идентификатор подобъекта или 0 в случае его отсутствия. Эта функция является обратной к <code class="function">pg_identify_object_as_address</code>. Для неопределённых объектов эти поля содержат значение <code class="literal">NULL</code>.</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-COMMENT"><div class="titlepage"><div><div><h3 class="title">9.26.6. Функции получения комментариев <a href="#FUNCTIONS-INFO-COMMENT" class="id_link">#</a></h3></div></div></div><a id="id-1.5.8.32.8.2" class="indexterm"></a><p>Функции, перечисленные в <a class="xref" href="functions-info.html#FUNCTIONS-INFO-COMMENT-TABLE" title="Таблица 9.78. Функции получения комментариев">Таблице 9.78</a>, извлекают комментарии, заданные для объектов с помощью команды <a class="xref" href="sql-comment.html" title="COMMENT"><span class="refentrytitle">COMMENT</span></a>. Если найти комментарий для заданных параметров не удаётся, они возвращают NULL.</p><div class="table" id="FUNCTIONS-INFO-COMMENT-TABLE"><p class="title"><strong>Таблица 9.78. Функции получения комментариев</strong></p><div class="table-contents"><table class="table" summary="Функции получения комментариев" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.8.4.2.2.1.1.1.1" class="indexterm"></a> <code class="function">col_description</code> ( <em class="parameter"><code>table</code></em> <code class="type">oid</code>, <em class="parameter"><code>column</code></em> <code class="type">integer</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт комментарий для столбца с заданным номером в таблице с указанным OID. (<code class="function">obj_description</code> нельзя использовать для столбцов таблицы, так столбцы не имеют собственных OID.)</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.8.4.2.2.2.1.1.1" class="indexterm"></a> <code class="function">obj_description</code> ( <em class="parameter"><code>object</code></em> <code class="type">oid</code>, <em class="parameter"><code>catalog</code></em> <code class="type">name</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт комментарий для объекта, имеющего заданный OID и находящегося в указанном системном каталоге. Например, в результате вызова <code class="literal">obj_description(123456,'pg_class')</code> будет получен комментарий для таблицы с OID 123456.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><code class="function">obj_description</code> ( <em class="parameter"><code>object</code></em> <code class="type">oid</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт комментарий для объекта, заданного только по OID. Эта вариация считается <span class="emphasis"><em>устаревшей</em></span>, так как нет гарантии, что OID будет уникальным в разных системных каталогах, и поэтому может быть получен неправильный комментарий.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.8.4.2.2.4.1.1.1" class="indexterm"></a> <code class="function">shobj_description</code> ( <em class="parameter"><code>object</code></em> <code class="type">oid</code>, <em class="parameter"><code>catalog</code></em> <code class="type">name</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт комментарий для общего объекта баз данных, имеющего заданный OID и находящегося в указанном системном каталоге. Эта функция аналогична <code class="function">obj_description</code>, за исключением того, что она извлекает комментарий для общих объектов (то есть, баз данных, ролей и табличных пространств). Некоторые системные каталоги являются глобальными для всех баз данных в кластере и описания объектов в них также хранятся глобально.</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-VALIDITY"><div class="titlepage"><div><div><h3 class="title">9.26.7. Функции проверки допустимости данных <a href="#FUNCTIONS-INFO-VALIDITY" class="id_link">#</a></h3></div></div></div><p>Функции, показанные в <a class="xref" href="functions-info.html#FUNCTIONS-INFO-VALIDITY-TABLE" title="Таблица 9.79. Функции проверки допустимости данных">Таблица 9.79</a>, могут быть полезны для проверки допустимости предлагаемых входных данных.</p><div class="table" id="FUNCTIONS-INFO-VALIDITY-TABLE"><p class="title"><strong>Таблица 9.79. Функции проверки допустимости данных</strong></p><div class="table-contents"><table class="table" summary="Функции проверки допустимости данных" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p>
       <p>Пример(ы)</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.9.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">pg_input_is_valid</code> ( <em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>type</code></em> <code class="type">text</code> ) → <code class="returnvalue">boolean</code></p>
       <p>Проверяет, является ли заданный аргумент <em class="parameter"><code>string</code></em> допустимым входным значением для указанного типа данных, и возвращает true или false.</p>
       <p>Эта функция будет работать должным образом только в том случае, если функция ввода типа данных была изменена, чтобы сообщать о недопустимом вводе как о <span class="quote">«<span class="quote">мягкой</span>»</span> ошибке. В противном случае передача недопустимых входных данных приведёт к отмене транзакции, как если бы строка была непосредственно приведена к типу.</p>
        <p>
         <code class="literal">pg_input_is_valid('42', 'integer')</code>
         → <code class="returnvalue">t</code>
        </p>
        <p>
         <code class="literal">pg_input_is_valid('42000000000', 'integer')</code>
         → <code class="returnvalue">f</code>
        </p>
        <p>
         <code class="literal">pg_input_is_valid('1234.567', 'numeric(7,4)')</code>
         → <code class="returnvalue">f</code>
       </p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.9.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_input_error_info</code> ( <em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>type</code></em> <code class="type">text</code> ) → <code class="returnvalue">record</code> ( <em class="parameter"><code>message</code></em> <code class="type">text</code>, <em class="parameter"><code>detail</code></em> <code class="type">text</code>, <em class="parameter"><code>hint</code></em> <code class="type">text</code>, <em class="parameter"><code>sql_error_code</code></em> <code class="type">text</code> )</p>
       <p>Проверяет, является ли заданный аргумент <em class="parameter"><code>string</code></em> допустимым входным значением для указанного типа данных; если нет, возвращает подробную информацию о ошибке, которая возникла бы в таком случае. Если ввод допустим, выдаётся NULL. Принимаются те же входные значения, что и для <code class="function">pg_input_is_valid</code>.</p>
       <p>Эта функция будет работать должным образом только в том случае, если функция ввода типа данных была изменена, чтобы сообщать о недопустимом вводе как о <span class="quote">«<span class="quote">мягкой</span>»</span> ошибке. В противном случае передача недопустимых входных данных приведёт к отмене транзакции, как если бы строка была непосредственно приведена к типу.</p>
       <p>
        <code class="literal">select * from pg_input_error_info('42000000000', 'integer')</code>
        → <code class="returnvalue"></code>
</p><pre class="programlisting">                       message                        | detail | hint | sql_error_code
------------------------------------------------------+--------+------+----------------
 value "42000000000" is out of range for type integer |        |      | 22003</pre><p>
       </p>
       <p>
        <code class="literal">select message, detail from pg_input_error_info('1234.567', 'numeric(7,4)')</code>
        → <code class="returnvalue"></code>
</p><pre class="programlisting">        message         |                                      detail
------------------------+----------------------------------​-------------------------------------------------
 numeric field overflow | A field with precision 7, scale 4 must round to an absolute value less than 10^3.</pre><p>
       </p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-SNAPSHOT"><div class="titlepage"><div><div><h3 class="title">9.26.8. Функции получения информации об идентификаторах транзакций и снимках состояния <a href="#FUNCTIONS-INFO-SNAPSHOT" class="id_link">#</a></h3></div></div></div><p>Функции, показанные в <a class="xref" href="functions-info.html#FUNCTIONS-PG-SNAPSHOT" title="Таблица 9.80. Функции получения информации об идентификаторах транзакций и снимках состояния">Таблице 9.80</a>, выдают информацию о транзакциях сервера в виде, подходящем для экспорта. В основном эти функции используются, чтобы определить, какие транзакции были зафиксированы между двумя снимками состояния.</p><div class="table" id="FUNCTIONS-PG-SNAPSHOT"><p class="title"><strong>Таблица 9.80. Функции получения информации об идентификаторах транзакций и снимках состояния</strong></p><div class="table-contents"><table class="table" summary="Функции получения информации об идентификаторах транзакций и снимках состояния" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">pg_current_xact_id</code> () → <code class="returnvalue">xid8</code></p>
       <p>Выдаёт идентификатор текущей транзакции. Если у текущей транзакции ещё нет идентификатора (она не успела выполнить какие-либо изменения в базе), он будет ей назначен; подробнее см. <a class="xref" href="transaction-id.html" title="74.1. Транзакции и идентификаторы">Раздел 74.1</a>. Если выполняется в подтранзакции, выдаёт идентификатор транзакции верхнего уровня; подробнее см. <a class="xref" href="subxacts.html" title="74.3. Подтранзакции">Раздел 74.3</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_current_xact_id_if_assigned</code> () → <code class="returnvalue">xid8</code></p>
       <p>Выдаёт идентификатор текущей транзакции или <code class="literal">NULL</code>, если она ещё не имеет идентификатора. (Если транзакция может оставаться только читающей, лучше использовать эту вариацию, чтобы избежать излишнего потребления XID.) Если выполняется в подтранзакции, возвращает идентификатор транзакции верхнего уровня.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_xact_status</code> ( <code class="type">xid8</code> ) → <code class="returnvalue">text</code></p>
       <p>Выдаёт состояние фиксации транзакции. Результатом будет одно из значений: <code class="literal">in progress</code> (выполняется), <code class="literal">committed</code> (зафиксирована) и <code class="literal">aborted</code> (прервана), если только транзакция не настолько давняя, чтобы система удалила информацию о её состоянии. Если же упоминаний о транзакции в системе не осталось и информация о её фиксации потеряна, эта функция возвращает <code class="literal">NULL</code>. Приложения могут использовать эту функцию, например, чтобы определить, была ли транзакция зафиксирована или прервана, после потери подключения к серверу в процессе выполнения <code class="literal">COMMIT</code>. Заметьте, что для подготовленных транзакций возвращается состояние <code class="literal">in progress</code>; приложения должны проверять <a class="link" href="view-pg-prepared-xacts.html" title="54.16. pg_prepared_xacts"><code class="structname">pg_prepared_xacts</code></a>, если им нужно определить, является ли транзакция с заданным ID подготовленной.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.4.1.1.1" class="indexterm"></a> <code class="function">pg_current_snapshot</code> () → <code class="returnvalue">pg_snapshot</code></p>
       <p>Возвращает текущий <em class="firstterm">снимок состояния</em> — структуру данных, показывающую идентификаторы транзакций, которые выполняются в момент снимка. В снимок включаются только идентификаторы транзакций верхнего уровня; идентификаторы подтранзакций не отображаются; за подробностями обратитесь к <a class="xref" href="subxacts.html" title="74.3. Подтранзакции">Разделу 74.3</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.5.1.1.1" class="indexterm"></a> <code class="function">pg_snapshot_xip</code> ( <code class="type">pg_snapshot</code> ) → <code class="returnvalue">setof xid8</code></p>
       <p>Выдаёт набор идентификаторов выполняющихся транзакций, содержащихся в снимке.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.6.1.1.1" class="indexterm"></a> <code class="function">pg_snapshot_xmax</code> ( <code class="type">pg_snapshot</code> ) → <code class="returnvalue">xid8</code></p>
       <p>Выдаёт значение <code class="literal">xmax</code> для заданного снимка.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.7.1.1.1" class="indexterm"></a> <code class="function">pg_snapshot_xmin</code> ( <code class="type">pg_snapshot</code> ) → <code class="returnvalue">xid8</code></p>
       <p>Выдаёт <code class="structfield">xmin</code> для заданного снимка.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.3.2.2.8.1.1.1" class="indexterm"></a> <code class="function">pg_visible_in_snapshot</code> ( <code class="type">xid8</code>, <code class="type">pg_snapshot</code> ) → <code class="returnvalue">boolean</code></p>
       <p><em class="firstterm">Видна</em> ли транзакция с указанным идентификатором в данном снимке (то есть, была ли она завершена до момента получения снимка)? Обратите внимание, что эта функция не выдаст правильный ответ, если ей передать идентификатор подтранзакции (subxid); за подробностями обратитесь к <a class="xref" href="subxacts.html" title="74.3. Подтранзакции">Разделу 74.3</a>.</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Внутренний тип идентификаторов транзакций, <code class="type">xid</code>, имеет размер 32 бита и значения в нём повторяются через каждые 4 миллиарда транзакций. Однако функции, показанные в <a class="xref" href="functions-info.html#FUNCTIONS-PG-SNAPSHOT" title="Таблица 9.80. Функции получения информации об идентификаторах транзакций и снимках состояния">Таблице 9.80</a> используют 64-битный тип <code class="type">xid8</code>, значения которого не повторяются на протяжении всей жизни сервера и могут быть приведены к типу <code class="type">xid</code>, если требуется (подробное описание находится в <a class="xref" href="transaction-id.html" title="74.1. Транзакции и идентификаторы">Разделе 74.1</a>). Тип данных <code class="type">pg_snapshot</code> содержит информацию о видимости транзакций в определённый момент времени. Его компоненты описаны в <a class="xref" href="functions-info.html#FUNCTIONS-PG-SNAPSHOT-PARTS" title="Таблица 9.81. Состав информации о снимке">Таблице 9.81</a>. В текстовом виде <code class="type">pg_snapshot</code> представляется как <code class="literal"><em class="replaceable"><code>xmin</code></em>:<em class="replaceable"><code>xmax</code></em>:<em class="replaceable"><code>список_xip</code></em></code>. Например, запись <code class="literal">10:20:10,14,15</code> обозначает <code class="literal">xmin=10, xmax=20, xip_list=10, 14, 15</code>.</p><div class="table" id="FUNCTIONS-PG-SNAPSHOT-PARTS"><p class="title"><strong>Таблица 9.81. Состав информации о снимке</strong></p><div class="table-contents"><table class="table" summary="Состав информации о снимке" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Описание</th></tr></thead><tbody><tr><td><code class="structfield">xmin</code></td><td>Минимальный идентификатор транзакции среди всех активных. Все транзакции, идентификаторы которых меньше <code class="structfield">xmin</code>, уже либо зафиксированы и видимы, либо отменены и «мертвы».</td></tr><tr><td><code class="structfield">xmax</code></td><td>Идентификатор на один больше идентификатора последней завершённой транзакции. Все транзакции, идентификаторы которых больше или равны <code class="structfield">xmax</code>, на момент получения снимка ещё не завершены и не являются видимыми.</td></tr><tr><td><code class="structfield">xip_list</code></td><td>Транзакции, выполняющиеся в момент получения снимка. Транзакции с такими идентификаторами, для которых <code class="literal">xmin &lt;= <em class="replaceable"><code>ид</code></em> &lt; xmax</code>, не попавшие в этот список, были уже завершены на момент получения снимка, и поэтому либо видимы, либо «мертвы», в зависимости от варианта завершения. Идентификаторы подтранзакций (subxid) в этот список не включаются.</td></tr></tbody></table></div></div><br class="table-break" /><p>До 13 версии в <span class="productname">PostgreSQL</span> отсутствовал тип <code class="type">xid8</code>, поэтому предлагались вариации этих функций, в которых 64-битные XID представлялись в типе <code class="type">bigint</code>, а для информации о снимке использовался отдельный тип <code class="type">txid_snapshot</code>. В названиях этих старых функций фигурирует <code class="literal">txid</code>. Они по-прежнему поддерживаются для обратной совместимости, но могут быть удалены в будущем. См. <a class="xref" href="functions-info.html#FUNCTIONS-TXID-SNAPSHOT" title="Таблица 9.82. Устаревшие функции получения информации об идентификаторах транзакций и снимках состояния">Таблицу 9.82</a>.</p><div class="table" id="FUNCTIONS-TXID-SNAPSHOT"><p class="title"><strong>Таблица 9.82. Устаревшие функции получения информации об идентификаторах транзакций и снимках состояния</strong></p><div class="table-contents"><table class="table" summary="Устаревшие функции получения информации об идентификаторах транзакций и снимках состояния" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.1.1.1.1" class="indexterm"></a> <code class="function">txid_current</code> () → <code class="returnvalue">bigint</code></p>
       <p>См. <code class="function">pg_current_xact_id()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.2.1.1.1" class="indexterm"></a> <code class="function">txid_current_if_assigned</code> () → <code class="returnvalue">bigint</code></p>
       <p>См. <code class="function">pg_current_xact_id_if_assigned()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.3.1.1.1" class="indexterm"></a> <code class="function">txid_current_snapshot</code> () → <code class="returnvalue">txid_snapshot</code></p>
       <p>См. <code class="function">pg_current_snapshot()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.4.1.1.1" class="indexterm"></a> <code class="function">txid_snapshot_xip</code> ( <code class="type">txid_snapshot</code> ) → <code class="returnvalue">setof bigint</code></p>
       <p>См. <code class="function">pg_snapshot_xip()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.5.1.1.1" class="indexterm"></a> <code class="function">txid_snapshot_xmax</code> ( <code class="type">txid_snapshot</code> ) → <code class="returnvalue">bigint</code></p>
       <p>См. <code class="function">pg_snapshot_xmax()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.6.1.1.1" class="indexterm"></a> <code class="function">txid_snapshot_xmin</code> ( <code class="type">txid_snapshot</code> ) → <code class="returnvalue">bigint</code></p>
       <p>См. <code class="function">pg_snapshot_xmin()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.7.1.1.1" class="indexterm"></a> <code class="function">txid_visible_in_snapshot</code> ( <code class="type">bigint</code>, <code class="type">txid_snapshot</code> ) → <code class="returnvalue">boolean</code></p>
       <p>См. <code class="function">pg_visible_in_snapshot()</code>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.10.7.2.2.8.1.1.1" class="indexterm"></a> <code class="function">txid_status</code> ( <code class="type">bigint</code> ) → <code class="returnvalue">text</code></p>
       <p>См. <code class="function">pg_xact_status()</code>.</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-COMMIT-TIMESTAMP"><div class="titlepage"><div><div><h3 class="title">9.26.9. Функции получения информации о фиксации транзакций <a href="#FUNCTIONS-INFO-COMMIT-TIMESTAMP" class="id_link">#</a></h3></div></div></div><p>Функции, показанные в <a class="xref" href="functions-info.html#FUNCTIONS-COMMIT-TIMESTAMP" title="Таблица 9.83. Функции получения информации о фиксации транзакций">Таблице 9.83</a>, выдают информацию о времени фиксации уже завершённых транзакций. Результат этих функций будет полезным, только когда включён параметр конфигурации <a class="xref" href="runtime-config-replication.html#GUC-TRACK-COMMIT-TIMESTAMP">track_commit_timestamp</a> и только для транзакций, зафиксированных после его включения. Информация о временной метке фиксации удаляется во время очистки.</p><div class="table" id="FUNCTIONS-COMMIT-TIMESTAMP"><p class="title"><strong>Таблица 9.83. Функции получения информации о фиксации транзакций</strong></p><div class="table-contents"><table class="table" summary="Функции получения информации о фиксации транзакций" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.11.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">pg_xact_commit_timestamp</code> ( <code class="type">xid</code> ) → <code class="returnvalue">timestamp with time zone</code></p>
       <p>Выдаёт время фиксации транзакции.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.11.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">pg_xact_commit_timestamp_origin</code> ( <code class="type">xid</code> ) → <code class="returnvalue">record</code> ( <em class="parameter"><code>timestamp</code></em> <code class="type">timestamp with time zone</code>, <em class="parameter"><code>roident</code></em> <code class="type">oid</code>)</p>
       <p>Выдаёт время фиксации и источник репликации транзакции.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.11.3.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_last_committed_xact</code> () → <code class="returnvalue">record</code> ( <em class="parameter"><code>xid</code></em> <code class="type">xid</code>, <em class="parameter"><code>timestamp</code></em> <code class="type">timestamp with time zone</code>, <em class="parameter"><code>roident</code></em> <code class="type">oid</code> )</p>
       <p>Выдаёт идентификатор, время фиксации и источник репликации транзакции, зафиксированной последней.</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2" id="FUNCTIONS-INFO-CONTROLDATA"><div class="titlepage"><div><div><h3 class="title">9.26.10. Функции управления данными <a href="#FUNCTIONS-INFO-CONTROLDATA" class="id_link">#</a></h3></div></div></div><p>Функции, показанные в <a class="xref" href="functions-info.html#FUNCTIONS-CONTROLDATA" title="Таблица 9.84. Функции управления данными">Таблице 9.84</a>, выдают информацию, записываемую во время <code class="command">initdb</code>, например, версию каталога. Они также выводят сведения о журнале предзаписи и контрольных точках. Эта информация относится ко всему кластеру, а не к отдельной базе. Данные функции выдают практически ту же информацию, и из того же источника, что и <a class="xref" href="app-pgcontroldata.html" title="pg_controldata"><span class="refentrytitle"><span class="application">pg_controldata</span></span></a>.</p><div class="table" id="FUNCTIONS-CONTROLDATA"><p class="title"><strong>Таблица 9.84. Функции управления данными</strong></p><div class="table-contents"><table class="table" summary="Функции управления данными" border="1"><colgroup><col /></colgroup><thead><tr><th class="func_table_entry"><p class="func_signature">Функция</p>
       <p>Описание</p></th></tr></thead><tbody><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.1.1.1.1" class="indexterm"></a> <code class="function">age</code> ( <code class="type">xid</code> ) → <code class="returnvalue">integer</code></p>
       <p>Возвращает количество транзакций между указанным идентификатором транзакции и текущим значением счётчика транзакций.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.2.1.1.1" class="indexterm"></a> <code class="function">mxid_age</code> ( <code class="type">xid</code> ) → <code class="returnvalue">integer</code></p>
       <p>Возвращает количество идентификаторов мультитранзакций между указанным идентификатором мультитранзакций и текущим значением счётчика мультитранзакций.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.3.1.1.1" class="indexterm"></a> <code class="function">pg_control_checkpoint</code> () → <code class="returnvalue">record</code></p>
       <p>Выдаёт информацию о текущем состоянии контрольных точек, показанную в <a class="xref" href="functions-info.html#FUNCTIONS-PG-CONTROL-CHECKPOINT" title="Таблица 9.85. Столбцы результата pg_control_checkpoint">Таблице 9.85</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.4.1.1.1" class="indexterm"></a> <code class="function">pg_control_system</code> () → <code class="returnvalue">record</code></p>
       <p>Выдаёт информацию о текущем состоянии управляющего файла, показанную в <a class="xref" href="functions-info.html#FUNCTIONS-PG-CONTROL-SYSTEM" title="Таблица 9.86. Столбцы результата pg_control_system">Таблице 9.86</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.5.1.1.1" class="indexterm"></a> <code class="function">pg_control_init</code> () → <code class="returnvalue">record</code></p>
       <p>Выдаёт информацию о состоянии инициализации кластера, показанную в <a class="xref" href="functions-info.html#FUNCTIONS-PG-CONTROL-INIT" title="Таблица 9.87. Столбцы результата pg_control_init">Таблице 9.87</a>.</p></td></tr><tr><td class="func_table_entry"><p class="func_signature"><a id="id-1.5.8.32.12.3.2.2.6.1.1.1" class="indexterm"></a> <code class="function">pg_control_recovery</code> () → <code class="returnvalue">record</code></p>
       <p>Выдаёт информацию о состоянии восстановления, как показано в <a class="xref" href="functions-info.html#FUNCTIONS-PG-CONTROL-RECOVERY" title="Таблица 9.88. Столбцы результата pg_control_recovery">Таблице 9.88</a>.</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-PG-CONTROL-CHECKPOINT"><p class="title"><strong>Таблица 9.85. Столбцы результата <code class="function">pg_control_checkpoint</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы результата pg_control_checkpoint" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Имя столбца</th><th>Тип данных</th></tr></thead><tbody><tr><td><code class="structfield">checkpoint_lsn</code></td><td><code class="type">pg_lsn</code></td></tr><tr><td><code class="structfield">redo_lsn</code></td><td><code class="type">pg_lsn</code></td></tr><tr><td><code class="structfield">redo_wal_file</code></td><td><code class="type">text</code></td></tr><tr><td><code class="structfield">timeline_id</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">prev_timeline_id</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">full_page_writes</code></td><td><code class="type">boolean</code></td></tr><tr><td><code class="structfield">next_xid</code></td><td><code class="type">text</code></td></tr><tr><td><code class="structfield">next_oid</code></td><td><code class="type">oid</code></td></tr><tr><td><code class="structfield">next_multixact_id</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">next_multi_offset</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">oldest_xid</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">oldest_xid_dbid</code></td><td><code class="type">oid</code></td></tr><tr><td><code class="structfield">oldest_active_xid</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">oldest_multi_xid</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">oldest_multi_dbid</code></td><td><code class="type">oid</code></td></tr><tr><td><code class="structfield">oldest_commit_ts_xid</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">newest_commit_ts_xid</code></td><td><code class="type">xid</code></td></tr><tr><td><code class="structfield">checkpoint_time</code></td><td><code class="type">timestamp with time zone</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-PG-CONTROL-SYSTEM"><p class="title"><strong>Таблица 9.86. Столбцы результата <code class="function">pg_control_system</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы результата pg_control_system" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Имя столбца</th><th>Тип данных</th></tr></thead><tbody><tr><td><code class="structfield">pg_control_version</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">catalog_version_no</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">system_identifier</code></td><td><code class="type">bigint</code></td></tr><tr><td><code class="structfield">pg_control_last_modified</code></td><td><code class="type">timestamp with time zone</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-PG-CONTROL-INIT"><p class="title"><strong>Таблица 9.87. Столбцы результата <code class="function">pg_control_init</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы результата pg_control_init" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Имя столбца</th><th>Тип данных</th></tr></thead><tbody><tr><td><code class="structfield">max_data_alignment</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">database_block_size</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">blocks_per_segment</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">wal_block_size</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">bytes_per_wal_segment</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">max_identifier_length</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">max_index_columns</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">max_toast_chunk_size</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">large_object_chunk_size</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">float8_pass_by_value</code></td><td><code class="type">boolean</code></td></tr><tr><td><code class="structfield">data_page_checksum_version</code></td><td><code class="type">integer</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="FUNCTIONS-PG-CONTROL-RECOVERY"><p class="title"><strong>Таблица 9.88. Столбцы результата <code class="function">pg_control_recovery</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы результата pg_control_recovery" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Имя столбца</th><th>Тип данных</th></tr></thead><tbody><tr><td><code class="structfield">min_recovery_end_lsn</code></td><td><code class="type">pg_lsn</code></td></tr><tr><td><code class="structfield">min_recovery_end_timeline</code></td><td><code class="type">integer</code></td></tr><tr><td><code class="structfield">backup_start_lsn</code></td><td><code class="type">pg_lsn</code></td></tr><tr><td><code class="structfield">backup_end_lsn</code></td><td><code class="type">pg_lsn</code></td></tr><tr><td><code class="structfield">end_of_backup_record_required</code></td><td><code class="type">boolean</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-srf.html" title="9.25. Функции, возвращающие множества">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html" title="Глава 9. Функции и операторы">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-admin.html" title="9.27. Функции для системного администрирования">След.</a></td></tr><tr><td width="40%" align="left" valign="top">9.25. Функции, возвращающие множества </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 9.27. Функции для системного администрирования</td></tr></table></div></body></html>