<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.5. Анализаторы</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="textsearch-features.html" title="12.4. Дополнительные возможности" /><link rel="next" href="textsearch-dictionaries.html" title="12.6. Словари" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">12.5. Анализаторы</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="textsearch-features.html" title="12.4. Дополнительные возможности">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="textsearch.html" title="Глава 12. Полнотекстовый поиск">Наверх</a></td><th width="60%" align="center">Глава 12. Полнотекстовый поиск</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="textsearch-dictionaries.html" title="12.6. Словари">След.</a></td></tr></table><hr /></div><div class="sect1" id="TEXTSEARCH-PARSERS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">12.5. Анализаторы <a href="#TEXTSEARCH-PARSERS" class="id_link">#</a></h2></div></div></div><p>Задача анализаторов текста — разделить текст документа на <em class="firstterm">фрагменты</em> и присвоить каждому из них тип из набора, определённого в самом анализаторе. Заметьте, что анализаторы не меняют текст — они просто выдают позиции предполагаемых слов. Вследствие такой ограниченности их функций, собственные специфические анализаторы бывают нужны гораздо реже, чем собственные словари. В настоящее время в <span class="productname">PostgreSQL</span> есть только один встроенный анализатор, который может быть полезен для широкого круга приложений.</p><p>Этот встроенный анализатор называется <code class="literal">pg_catalog.default</code>. Он распознаёт 23 типа фрагментов, перечисленные в <a class="xref" href="textsearch-parsers.html#TEXTSEARCH-DEFAULT-PARSER" title="Таблица 12.1. Типы фрагментов, выделяемых стандартным анализатором">Таблице 12.1</a>.</p><div class="table" id="TEXTSEARCH-DEFAULT-PARSER"><p class="title"><strong>Таблица 12.1. Типы фрагментов, выделяемых стандартным анализатором</strong></p><div class="table-contents"><table class="table" summary="Типы фрагментов, выделяемых стандартным анализатором" border="1"><colgroup><col class="col1" /><col class="col2" /><col class="col3" /></colgroup><thead><tr><th>Псевдоним</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><code class="literal">asciiword</code></td><td>Слово только из букв ASCII</td><td><code class="literal">elephant</code></td></tr><tr><td><code class="literal">word</code></td><td>Слово из любых букв</td><td><code class="literal">mañana</code></td></tr><tr><td><code class="literal">numword</code></td><td>Слово из букв и цифр</td><td><code class="literal">beta1</code></td></tr><tr><td><code class="literal">asciihword</code></td><td>Слово только из букв ASCII с дефисами</td><td><code class="literal">up-to-date</code></td></tr><tr><td><code class="literal">hword</code></td><td>Слово из любых букв с дефисами</td><td><code class="literal">lógico-matemática</code></td></tr><tr><td><code class="literal">numhword</code></td><td>Слово из букв и цифр с дефисами</td><td><code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">hword_asciipart</code></td><td>Часть слова с дефисами, только из букв ASCII</td><td><code class="literal">postgresql</code> в словосочетании <code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">hword_part</code></td><td>Часть слова с дефисами, из любых букв</td><td><code class="literal">lógico</code> или <code class="literal">matemática</code> в словосочетании <code class="literal">lógico-matemática</code></td></tr><tr><td><code class="literal">hword_numpart</code></td><td>Часть слова с дефисами, из букв и цифр</td><td><code class="literal">beta1</code> в словосочетании <code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">email</code></td><td>Адрес электронной почты</td><td><code class="literal">foo@example.com</code></td></tr><tr><td><code class="literal">protocol</code></td><td>Префикс протокола</td><td><code class="literal">http://</code></td></tr><tr><td><code class="literal">url</code></td><td>URL</td><td><code class="literal">example.com/stuff/​index.html</code></td></tr><tr><td><code class="literal">host</code></td><td>Имя узла</td><td><code class="literal">example.com</code></td></tr><tr><td><code class="literal">url_path</code></td><td>Путь в адресе URL</td><td><code class="literal">/stuff/index.html</code>, как часть URL</td></tr><tr><td><code class="literal">file</code></td><td>Путь или имя файла</td><td><code class="literal">/usr/local/foo.txt</code>, если не является частью URL</td></tr><tr><td><code class="literal">sfloat</code></td><td>Научная запись числа</td><td><code class="literal">-1.234e56</code></td></tr><tr><td><code class="literal">float</code></td><td>Десятичная запись числа</td><td><code class="literal">-1.234</code></td></tr><tr><td><code class="literal">int</code></td><td>Целое со знаком</td><td><code class="literal">-1234</code></td></tr><tr><td><code class="literal">uint</code></td><td>Целое без знака</td><td><code class="literal">1234</code></td></tr><tr><td><code class="literal">version</code></td><td>Номер версии</td><td><code class="literal">8.3.0</code></td></tr><tr><td><code class="literal">tag</code></td><td>Тег XML</td><td><code class="literal">&lt;a href=​"dictionaries.html"&gt;</code></td></tr><tr><td><code class="literal">entity</code></td><td>Сущность XML</td><td><code class="literal">&amp;amp;</code></td></tr><tr><td><code class="literal">blank</code></td><td>Символы-разделители</td><td>(любые пробельные символы или знаки препинания, не попавшие в другие категории)</td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">Примечание</h3><p>Понятие <span class="quote">«<span class="quote">буквы</span>»</span> анализатор определяет исходя из локали, заданной для базы данных, в частности параметра <code class="varname">lc_ctype</code>. Слова, содержащие только буквы из ASCII (латинские буквы), распознаются как фрагменты отдельного типа, так как иногда бывает полезно выделить их. Для многих европейских языков типы фрагментов <code class="literal">word</code> и <code class="literal">asciiword</code> можно воспринимать как синонимы.</p><p><code class="literal">email</code> принимает не все символы, которые считаются допустимыми по стандарту <a class="ulink" href="https://datatracker.ietf.org/doc/html/rfc5322" target="_top">RFC 5322</a>. В частности, имя почтового ящика помимо алфавитно-цифровых символов может содержать только точку, минус и подчёркивание.</p></div><p>Анализатор может выделить в одном тексте несколько перекрывающихся фрагментов. Например, слово с дефисом будет выдано как целое составное слово и по частям: </p><pre class="screen">
SELECT alias, description, token FROM ts_debug('foo-bar-beta1');
      alias      |               description                |     token
-----------------+------------------------------------------+--------------
 numhword        | Hyphenated word, letters and digits      | foo-bar-beta1
 hword_asciipart | Hyphenated word part, all ASCII          | foo
 blank           | Space symbols                            | -
 hword_asciipart | Hyphenated word part, all ASCII          | bar
 blank           | Space symbols                            | -
 hword_numpart   | Hyphenated word part, letters and digits | beta1
</pre><p> Это поведение считается желательным, так как это позволяет находить при последующем поиске и всё слово целиком, и его части. Ещё один показательный пример: </p><pre class="screen">
SELECT alias, description, token
FROM ts_debug('http://example.com/stuff/index.html');
  alias   |  description  |            token
----------+---------------+------------------------------
 protocol | Protocol head | http://
 url      | URL           | example.com/stuff/index.html
 host     | Host          | example.com
 url_path | URL path      | /stuff/index.html
</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="textsearch-features.html" title="12.4. Дополнительные возможности">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="textsearch.html" title="Глава 12. Полнотекстовый поиск">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="textsearch-dictionaries.html" title="12.6. Словари">След.</a></td></tr><tr><td width="40%" align="left" valign="top">12.4. Дополнительные возможности </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 12.6. Словари</td></tr></table></div></body></html>