<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SELECT INTO</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-select.html" title="SELECT" /><link rel="next" href="sql-set.html" title="SET" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">SELECT INTO</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-select.html" title="SELECT">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-set.html" title="SET">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-SELECTINTO"><div class="titlepage"></div><a id="id-1.9.3.173.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">SELECT INTO</span></h2><p>SELECT INTO — создать таблицу из результатов запроса</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">[ WITH [ RECURSIVE ] <em class="replaceable"><code>запрос_WITH</code></em> [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( <em class="replaceable"><code>выражение</code></em> [, ...] ) ] ]
    * | <em class="replaceable"><code>выражение</code></em> [ [ AS ] <em class="replaceable"><code>имя_результата</code></em> ] [, ...]
    INTO [ TEMPORARY | TEMP | UNLOGGED ] [ TABLE ] <em class="replaceable"><code>новая_таблица</code></em>
    [ FROM <em class="replaceable"><code>элемент_FROM</code></em> [, ...] ]
    [ WHERE <em class="replaceable"><code>условие</code></em> ]
    [ GROUP BY <em class="replaceable"><code>выражение</code></em> [, ...] ]
    [ HAVING <em class="replaceable"><code>условие</code></em> ]
    [ WINDOW <em class="replaceable"><code>имя_окна</code></em> AS ( <em class="replaceable"><code>определение_окна</code></em> ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] <em class="replaceable"><code>выборка</code></em> ]
    [ ORDER BY <em class="replaceable"><code>выражение</code></em> [ ASC | DESC | USING <em class="replaceable"><code>оператор</code></em> ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { <em class="replaceable"><code>число</code></em> | ALL } ]
    [ OFFSET <em class="replaceable"><code>начало</code></em> [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ <em class="replaceable"><code>число</code></em> ] { ROW | ROWS } ONLY ]
    [ FOR { UPDATE | SHARE } [ OF <em class="replaceable"><code>имя_таблицы</code></em> [, ...] ] [ NOWAIT ] [...] ]</pre></div><div class="refsect1" id="id-1.9.3.173.5"><h2>Описание</h2><p><code class="command">SELECT INTO</code> создаёт новую таблицу и заполняет её данными, полученными из запроса. Данные не передаются клиенту, как с обычной командой <code class="command">SELECT</code>. Столбцы новой таблицы получают имена и типы данных, связанные с выходными столбцами <code class="command">SELECT</code>.</p></div><div class="refsect1" id="id-1.9.3.173.6"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">TEMPORARY</code> или <code class="literal">TEMP</code></span></dt><dd><p>Если указано, создаваемая таблица будет временной. За подробностями обратитесь к <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>.</p></dd><dt><span class="term"><code class="literal">UNLOGGED</code></span></dt><dd><p>Если указано, создаваемая таблица будет нежурналируемой. За подробностями обратитесь к <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>.</p></dd><dt><span class="term"><em class="replaceable"><code>новая_таблица</code></em></span></dt><dd><p>Имя создаваемой таблицы (возможно, дополненное схемой).</p></dd></dl></div><p>Все другие параметры подробно описываются в <a class="xref" href="sql-select.html" title="SELECT"><span class="refentrytitle">SELECT</span></a>.</p></div><div class="refsect1" id="id-1.9.3.173.7"><h2>Замечания</h2><p>Команда <code class="command">SELECT INTO</code> действует подобно <a class="link" href="sql-createtableas.html" title="CREATE TABLE AS"><code class="command">CREATE TABLE AS</code></a>, но рекомендуется использовать <code class="command">CREATE TABLE AS</code>, так как <code class="command">SELECT INTO</code> не поддерживается в <span class="application">ECPG</span> и <span class="application">PL/pgSQL</span> вследствие того, что они воспринимают предложение <code class="literal">INTO</code> по-своему. К тому же, <code class="command">CREATE TABLE AS</code> предоставляет больший набор возможностей, чем <code class="command">SELECT INTO</code>.</p><p>В отличие от <code class="command">CREATE TABLE AS</code>, команда <code class="command">SELECT INTO</code> не позволяет задать свойства таблицы, например выбрать метод доступа с помощью указания <a class="xref" href="sql-createtable.html#SQL-CREATETABLE-METHOD"><code class="literal">USING <em class="replaceable"><code>метод</code></em></code></a> или табличное пространство с помощью <a class="xref" href="sql-createtable.html#SQL-CREATETABLE-TABLESPACE"><code class="literal">TABLESPACE <em class="replaceable"><code>табл_пространство</code></em></code></a>. Если это требуется, используйте команду <code class="command">CREATE TABLE AS</code>. Таким образом, для новой таблицы выбирается метод доступа к таблицам по умолчанию. За дополнительными сведениями обратитесь к <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLE-ACCESS-METHOD">default_table_access_method</a>.</p></div><div class="refsect1" id="id-1.9.3.173.8"><h2>Примеры</h2><p>Создание таблицы <code class="literal">films_recent</code>, содержащей только последние записи из таблицы <code class="literal">films</code>: </p><pre class="programlisting">SELECT * INTO films_recent FROM films WHERE date_prod &gt;= '2002-01-01';</pre></div><div class="refsect1" id="id-1.9.3.173.9"><h2>Совместимость</h2><p>В стандарте SQL команда <code class="command">SELECT INTO</code> применяется для передачи скалярных значений клиентской программе, но не для создания новой таблицы. Именно это применение имеет место в <span class="application">ECPG</span> (см. <a class="xref" href="ecpg.html" title="Глава 36. ECPG — Встраиваемый SQL в C">Главу 36</a>) и в <span class="application">PL/pgSQL</span> (см. <a class="xref" href="plpgsql.html" title="Глава 43. PL/pgSQL — процедурный язык SQL">Главу 43</a>). В <span class="productname">PostgreSQL</span> команда <code class="command">SELECT INTO</code> связана с созданием таблицы по историческим причинам. Таким же образом работает <code class="command">SELECT INTO</code> и в некоторых другие реализациях SQL (но в большинстве реализаций поддерживается конструкция <code class="command">CREATE TABLE AS</code>). Если эти соображения совместимости не важны, в новом коде для этих целей лучше использовать <code class="command">CREATE TABLE AS</code>.</p></div><div class="refsect1" id="id-1.9.3.173.10"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-createtableas.html" title="CREATE TABLE AS"><span class="refentrytitle">CREATE TABLE AS</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-select.html" title="SELECT">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-set.html" title="SET">След.</a></td></tr><tr><td width="40%" align="left" valign="top">SELECT </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> SET</td></tr></table></div></body></html>