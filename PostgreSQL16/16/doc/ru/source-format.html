<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>56.1. Форматирование</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="source.html" title="Глава 56. Соглашения по оформлению кода PostgreSQL" /><link rel="next" href="error-message-reporting.html" title="56.2. Вывод сообщений об ошибках в коде сервера" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">56.1. Форматирование</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="source.html" title="Глава 56. Соглашения по оформлению кода PostgreSQL">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="source.html" title="Глава 56. Соглашения по оформлению кода PostgreSQL">Наверх</a></td><th width="60%" align="center">Глава 56. Соглашения по оформлению кода PostgreSQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="error-message-reporting.html" title="56.2. Вывод сообщений об ошибках в коде сервера">След.</a></td></tr></table><hr /></div><div class="sect1" id="SOURCE-FORMAT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">56.1. Форматирование <a href="#SOURCE-FORMAT" class="id_link">#</a></h2></div></div></div><p>Исходный код форматируется с отступом на 4 позиции, с сохранением табуляции (т. е. символы табуляции не разворачиваются в пробелы). Для каждого логического уровня отступа добавляется одна табуляция.</p><p>Правила оформления (расположения скобок и т. д.) следуют соглашениям BSD. В частности, фигурные скобки для управляемых ими блоков <code class="literal">if</code>, <code class="literal">while</code>, <code class="literal">switch</code> и т. д. размещаются в отдельных строках.</p><p>Ограничьте размеры строк, чтобы код можно было читать в окне шириной 80 символов. (Это не значит, что никогда нельзя заходить за 80 символов. Например, не стоит разбивать длинную строку сообщения в произвольных местах, просто чтобы код умещался в 80 символов, так как это в результате скорее всего не сделает код более читабельным.)</p><p>Для единообразия кода не используйте комментарии в стиле C++ (комментарии <code class="literal">//</code>). Утилита <span class="application">pgindent</span> заменит их на <code class="literal">/* ... */</code>.</p><p>Предпочитаемый стиль многострочных блоков выглядит так: </p><pre class="programlisting">/*
 * текст комментария начинается здесь
 * и продолжается здесь
 */</pre><p> Заметьте, что блоки комментариев, начинающиеся с первого символа, будут сохраняться утилитой <span class="application">pgindent</span> как есть, но содержимое блоков комментариев с отступами будет переразбито по строкам как обычный текст. Если вы хотите сохранить разрывы строк в блоке с отступом, добавьте минусы следующим образом: </p><pre class="programlisting">    /*----------
     * текст комментария начинается здесь
     * и продолжается здесь
     *----------
     */</pre><p>Хотя предлагаемые правки кода не обязательно должны следовать этим правилам форматирования, лучше их придерживаться. Ваш код будет пропущен через <span class="application">pgindent</span> перед следующим выпуском, поэтому нет смысла наводить в нём красоту по другим правилам. Для правок есть хорошее правило: <span class="quote">«<span class="quote">оформляйте новый код так же, как выглядит существующий код вокруг</span>»</span>.</p><p>В каталоге <code class="filename">src/tools/editors</code> содержатся примеры файлов настройки, которые можно использовать с редакторами <span class="productname">Emacs</span>, <span class="productname">xemacs</span> или <span class="productname">vim</span> для упрощения задачи форматирования кода в соответствии с описанными соглашениями.</p><p>Если вы хотите использовать утилиту <span class="application">pgindent</span> локально, чтобы привести код в соответствие со стилем проекта, вы найдёте полезную информацию в каталоге <code class="filename">src/tools/pgindent</code>.</p><p>Чтобы табуляция показывалась должным образом в средствах просмотра текста <span class="application">more</span> и <span class="application">less</span>, их можно вызвать так: </p><pre class="programlisting">more -x4
less -x4</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="source.html" title="Глава 56. Соглашения по оформлению кода PostgreSQL">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="source.html" title="Глава 56. Соглашения по оформлению кода PostgreSQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="error-message-reporting.html" title="56.2. Вывод сообщений об ошибках в коде сервера">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 56. Соглашения по оформлению кода PostgreSQL </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 56.2. Вывод сообщений об ошибках в коде сервера</td></tr></table></div></body></html>