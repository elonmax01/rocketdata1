<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SPI_freetuptable</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="spi-spi-freetuple.html" title="SPI_freetuple" /><link rel="next" href="spi-spi-freeplan.html" title="SPI_freeplan" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">SPI_freetuptable</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="spi-spi-freetuple.html" title="SPI_freetuple">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="spi-memory.html" title="47.3. Управление памятью">Наверх</a></td><th width="60%" align="center">47.3. Управление памятью</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="spi-spi-freeplan.html" title="SPI_freeplan">След.</a></td></tr></table><hr /></div><div class="refentry" id="SPI-SPI-FREETUPLETABLE"><div class="titlepage"></div><a id="id-1.8.12.10.13.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">SPI_freetuptable</span></h2><p>SPI_freetuptable — освободить набор строк, созданный <code class="function">SPI_execute</code> или подобной функцией</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">void SPI_freetuptable(SPITupleTable * <em class="parameter"><code>tuptable</code></em>)</pre></div><div class="refsect1" id="id-1.8.12.10.13.5"><h2>Описание</h2><p><code class="function">SPI_freetuptable</code> освобождает набор строк, созданных предыдущей функцией SPI выполнения команд, например <code class="function">SPI_execute</code>. Таким образом, при вызове этой функции в качестве аргумента часто передаётся глобальная переменная <code class="varname">SPI_tuptable</code>.</p><p>Эта функция полезна, когда функция на C, использующая SPI, должна выполнить несколько команд, но не хочет сохранять результаты предыдущих команд до завершения. Заметьте, что любые не освобождённые таким образом наборы строк будут всё равно освобождены при выполнении <code class="function">SPI_finish</code>. Кроме того, если была запущена подтранзакция, а затем она прервалась в ходе выполнения использующей SPI функции, все наборы строк, созданные в рамках подтранзакции, будут автоматически освобождены.</p><p>Начиная с <span class="productname">PostgreSQL</span> версии 9.3, <code class="function">SPI_freetuptable</code> содержит защитную логику, отфильтровывающую повторные запросы на удаление одного и того же набора строк. В предыдущих версиях повторное удаление могло приводить к сбоям.</p></div><div class="refsect1" id="id-1.8.12.10.13.6"><h2>Аргументы</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">SPITupleTable * <em class="parameter"><code>tuptable</code></em></code></span></dt><dd><p>указатель на набор строк, который нужно освободить (если NULL, ничего не происходит)</p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="spi-spi-freetuple.html" title="SPI_freetuple">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="spi-memory.html" title="47.3. Управление памятью">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="spi-spi-freeplan.html" title="SPI_freeplan">След.</a></td></tr><tr><td width="40%" align="left" valign="top">SPI_freetuple </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> SPI_freeplan</td></tr></table></div></body></html>