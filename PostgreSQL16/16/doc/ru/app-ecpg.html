<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ecpg</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="app-dropuser.html" title="dropuser" /><link rel="next" href="app-pgamcheck.html" title="pg_amcheck" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span class="application">ecpg</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-dropuser.html" title="dropuser">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-client.html" title="Клиентские приложения PostgreSQL">Наверх</a></td><th width="60%" align="center">Клиентские приложения PostgreSQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="app-pgamcheck.html" title="pg_amcheck">След.</a></td></tr></table><hr /></div><div class="refentry" id="APP-ECPG"><div class="titlepage"></div><a id="id-1.9.4.8.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">ecpg</span></span></h2><p><span class="application">ecpg</span> — встроенный C-препроцессор SQL</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><div class="cmdsynopsis"><p id="id-1.9.4.8.4.1"><code class="command">ecpg</code> [<em class="replaceable"><code>параметр</code></em>...]  <em class="replaceable"><code>файл</code></em>... </p></div></div><div class="refsect1" id="APP-ECPG-DESCRIPTION"><h2>Описание</h2><p><code class="command">ecpg</code> — это встроенный SQL препроцессор для программ, написанных на языке C. Он преобразует программы на C, содержащие SQL-выражения, заменяя их вызовами встроенных функций. Получаемые на выходе файлы можно затем скомпилировать и скомпоновать.</p><p><code class="command">ecpg</code> преобразует каждый файл, переданный в параметрах, в соответствующий файл на C. Если имя входного файла указано без расширения, подразумевается <code class="filename">.pgc</code>. Указанное имя, но с расширением <code class="filename">.c</code>, становится по умолчанию именем выходного файла. Переопределить имя выходного файла можно, воспользовавшись параметром <code class="option">-o</code>.</p><p>Если в качестве имени входного файла указано <code class="literal">-</code>, <code class="command">ecpg</code> читает программу с устройства стандартного ввода (и выводит результат в стандартный вывод, если не задан параметр <code class="option">-o</code>).</p><p>Данный раздел не содержит описания встроенного SQL-языка. Для более подробной информации см. <a class="xref" href="ecpg.html" title="Глава 36. ECPG — Встраиваемый SQL в C">Главу 36</a>.</p></div><div class="refsect1" id="id-1.9.4.8.6"><h2>Параметры</h2><p><code class="command">ecpg</code> принимает в качестве аргументов: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>Автоматически генерировать код, написанный на языке C, из кода SQL. Сейчас это справедливо для <code class="literal">EXEC SQL TYPE</code>.</p></dd><dt><span class="term"><code class="option">-C <em class="replaceable"><code>режим</code></em></code></span></dt><dd><p>Установить режим совместимости; <em class="replaceable"><code>режим</code></em> может принимать значения: <code class="literal">INFORMIX</code>, <code class="literal">INFORMIX_SE</code> и <code class="literal">ORACLE</code>.</p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>символ</code></em>[=<em class="replaceable"><code>значение</code></em>]</code></span></dt><dd><p>Определить символ начала команд препроцессора, аналогично использованию директивы <code class="command">EXEC SQL DEFINE</code>. Если <em class="replaceable"><code>значение</code></em> не указано, символ определяется <code class="literal">1</code>.</p></dd><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>Обрабатывать заголовочные файлы. Когда добавляется этот параметр, расширением выходного файла становится не <code class="literal">.c</code>, а <code class="literal">.h</code>, и расширением входного файла по умолчанию считается не <code class="literal">.pgc</code>, а <code class="literal">.pgh</code>. Кроме этого с данным параметром подразумевается <code class="option">-c</code>.</p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>Также разбирать и системные включения.</p></dd><dt><span class="term"><code class="option">-I <em class="replaceable"><code>каталог</code></em></code></span></dt><dd><p>Указать дополнительный путь включаемых файлов, используемый при выполнении <code class="literal">EXEC SQL INCLUDE</code>. По умолчанию используются <code class="filename">.</code> (текущий каталог), <code class="filename">/usr/local/include</code>, каталог, задаваемый при компиляции <span class="productname">PostgreSQL</span> (обычно — <code class="filename">/usr/local/pgsql/include</code>), и <code class="filename">/usr/include</code>, в порядке, как это перечислено.</p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>имя_файла</code></em></code></span></dt><dd><p>Задаёт <em class="replaceable"><code>имя файла</code></em>, в который программа <code class="command">ecpg</code> должна выводить результат. Указание <code class="literal">-o -</code> направляет результат в устройство стандартного вывода.</p></dd><dt><span class="term"><code class="option">-r <em class="replaceable"><code>параметр</code></em></code></span></dt><dd><p>Определяет поведение времени выполнения. <em class="replaceable"><code>Флаг</code></em> может принимать следующие значения: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">no_indicator</code></span></dt><dd><p>Использовать специальные символы для представления значений null. Исторически некоторые базы данных используют такой подход.</p></dd><dt><span class="term"><code class="option">prepare</code></span></dt><dd><p>Сформировать подготовленные выражения. libecpg сформирует кеш подготовленных выражений и будет использовать их при необходимости повторно. В случае переполнения кеша, libecpg освободит память за счёт вытеснения наименее используемых выражений.</p></dd><dt><span class="term"><code class="option">questionmarks</code></span></dt><dd><p>Разрешает использовать знак вопроса в качестве аргумента подстановки в целях совместимости. Ранее это было поведением по умолчанию.</p></dd></dl></div></dd><dt><span class="term"><code class="option">-t</code></span></dt><dd><p>Включить автоматическую фиксацию транзакций. В этом режиме каждая SQL-команда будет автоматически фиксироваться, пока не будет явно включена в блок транзакции. В режиме по умолчанию команды фиксируются лишь при явном вызове <code class="command">EXEC SQL COMMIT</code>.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Вывести информацию о версии, а также путях поиска включаемых файлов.</p></dd><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Вывести версию <span class="application">ecpg</span>.</p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p>Вывести справку по команде <span class="application">ecpg</span>.</p></dd></dl></div></div><div class="refsect1" id="id-1.9.4.8.7"><h2>Замечания</h2><p>При компиляции полученных файлов, компилятор должен иметь возможность найти заголовочные файлы <span class="application">ECPG</span> в каталоге включений <span class="productname">PostgreSQL</span>. Для этого можно использовать флаг <code class="option">-I</code> во время компиляции, например, <code class="literal">-I/usr/local/pgsql/include</code>.</p><p>Программы на C со встроенным SQL необходимо скомпоновать с библиотекой <code class="filename">libecpg</code>, например, используя флаг компоновщика <code class="literal">-L/usr/local/pgsql/lib -lecpg</code>.</p><p>Имена каталогов, подходящих для установки, можно найти в разделе <a class="xref" href="app-pgconfig.html" title="pg_config"><span class="refentrytitle"><span class="application">pg_config</span></span></a>.</p></div><div class="refsect1" id="id-1.9.4.8.8"><h2>Примеры</h2><p>Если имеется исходный файл на C <code class="filename">prog1.pgc</code> со встроенным SQL, можно создать исполняемую программу, используя следующую последовательность команд: </p><pre class="programlisting">ecpg prog1.pgc
cc -I/usr/local/pgsql/include -c prog1.c
cc -o prog1 prog1.o -L/usr/local/pgsql/lib -lecpg</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-dropuser.html" title="dropuser">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-client.html" title="Клиентские приложения PostgreSQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pgamcheck.html" title="pg_amcheck">След.</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">dropuser</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> <span class="application">pg_amcheck</span></td></tr></table></div></body></html>