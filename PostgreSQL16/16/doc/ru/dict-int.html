<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>F.13. dict_int — пример словаря текстового поиска для целых чисел</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="contrib-dblink-build-sql-update.html" title="dblink_build_sql_update" /><link rel="next" href="dict-xsyn.html" title="F.14. dict_xsyn — пример словаря текстового поиска синонимов" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">F.13. dict_int — пример словаря текстового поиска для целых чисел</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="contrib-dblink-build-sql-update.html" title="dblink_build_sql_update">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><th width="60%" align="center">Приложение F. Дополнительно поставляемые модули и расширения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="dict-xsyn.html" title="F.14. dict_xsyn — пример словаря текстового поиска синонимов">След.</a></td></tr></table><hr /></div><div class="sect1" id="DICT-INT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">F.13. dict_int — пример словаря текстового поиска для целых чисел <a href="#DICT-INT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="dict-int.html#DICT-INT-CONFIG">F.13.1. Конфигурирование</a></span></dt><dt><span class="sect2"><a href="dict-int.html#DICT-INT-USAGE">F.13.2. Использование</a></span></dt></dl></div><a id="id-1.11.7.23.2" class="indexterm"></a><p>Модуль <code class="filename">dict_int</code> представляет собой пример дополнительного шаблона словаря для полнотекстового поиска. Этот словарь был создан для управляемой индексации целых чисел (со знаком и без); он позволяет индексировать такие числа и при этом избежать чрезмерного разрастания списка уникальных слов, что значительно увеличивает скорость поиска.</p><p>Данный модуль считается <span class="quote">«<span class="quote">доверенным</span>»</span>, то есть его могут устанавливать обычные пользователи, имеющие право <code class="literal">CREATE</code> в текущей базе данных.</p><div class="sect2" id="DICT-INT-CONFIG"><div class="titlepage"><div><div><h3 class="title">F.13.1. Конфигурирование <a href="#DICT-INT-CONFIG" class="id_link">#</a></h3></div></div></div><p>Этот словарь принимает три параметра:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Параметр <code class="literal">maxlen</code> задаёт максимальное число цифр, из которого может состоять целое число. Значение по умолчанию — 6.</p></li><li class="listitem"><p>Параметр <code class="literal">rejectlong</code> определяет, должны ли чрезмерно длинные числа усекаться или игнорироваться. Если <code class="literal">rejectlong</code> имеет значение <code class="literal">false</code> (по умолчанию), этот словарь возвращает первые <code class="literal">maxlen</code> цифр целого числа. Если <code class="literal">rejectlong</code> равен <code class="literal">true</code>, чрезмерное длинное целое воспринимается как стоп-слово, и в результате не индексируется. Заметьте, это означает, что такое целое нельзя будет найти.</p></li><li class="listitem"><p>Параметр <code class="literal">absval</code> определяет, должны ли удаляться знаки <span class="quote">«<span class="quote"><code class="literal">+</code></span>»</span> и <span class="quote">«<span class="quote"><code class="literal">-</code></span>»</span>, стоящие перед целыми числами. Значение по умолчанию — <code class="literal">false</code>. Если этот параметр имеет значение <code class="literal">true</code>, знак удаляется до того, как рассматривается ограничение <code class="literal">maxlen</code>.</p></li></ul></div></div><div class="sect2" id="DICT-INT-USAGE"><div class="titlepage"><div><div><h3 class="title">F.13.2. Использование <a href="#DICT-INT-USAGE" class="id_link">#</a></h3></div></div></div><p>При установке расширения <code class="literal">dict_int</code> в базе создаётся шаблон текстового поиска <code class="literal">intdict_template</code> и словарь <code class="literal">intdict</code> на его базе, с параметрами по умолчанию. Вы можете изменить параметры словаря, например так: </p><pre class="programlisting">mydb# ALTER TEXT SEARCH DICTIONARY intdict (MAXLEN = 4, REJECTLONG = true);
ALTER TEXT SEARCH DICTIONARY</pre><p> или создать новые словари на базе этого шаблона.</p><p>Протестировать этот словарь можно так: </p><pre class="programlisting">mydb# select ts_lexize('intdict', '12345678');
 ts_lexize
-----------
 {123456}</pre><p> Но для практического применения его нужно включить в конфигурацию текстового поиска, как описано в <a class="xref" href="textsearch.html" title="Глава 12. Полнотекстовый поиск">Главе 12</a>. Это может выглядеть примерно так: </p><pre class="programlisting">ALTER TEXT SEARCH CONFIGURATION english
    ALTER MAPPING FOR int, uint WITH intdict;</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="contrib-dblink-build-sql-update.html" title="dblink_build_sql_update">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="dict-xsyn.html" title="F.14. dict_xsyn — пример словаря текстового поиска синонимов">След.</a></td></tr><tr><td width="40%" align="left" valign="top">dblink_build_sql_update </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> F.14. dict_xsyn — пример словаря текстового поиска синонимов</td></tr></table></div></body></html>