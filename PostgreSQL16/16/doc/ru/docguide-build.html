<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>J.3. Сборка документации с помощью Make</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="docguide-toolsets.html" title="J.2. Инструментарий" /><link rel="next" href="docguide-build-meson.html" title="J.4. Сборка документации с помощью Meson" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">J.3. Сборка документации с помощью Make</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="docguide-toolsets.html" title="J.2. Инструментарий">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="docguide.html" title="Приложение J. Документация">Наверх</a></td><th width="60%" align="center">Приложение J. Документация</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="docguide-build-meson.html" title="J.4. Сборка документации с помощью Meson">След.</a></td></tr></table><hr /></div><div class="sect1" id="DOCGUIDE-BUILD"><div class="titlepage"><div><div><h2 class="title" style="clear: both">J.3. Сборка документации с помощью Make <a href="#DOCGUIDE-BUILD" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="docguide-build.html#DOCGUIDE-BUILD-HTML">J.3.1. HTML</a></span></dt><dt><span class="sect2"><a href="docguide-build.html#DOCGUIDE-BUILD-MANPAGES">J.3.2. Страницы man</a></span></dt><dt><span class="sect2"><a href="docguide-build.html#DOCGUIDE-BUILD-PDF">J.3.3. PDF</a></span></dt><dt><span class="sect2"><a href="docguide-build.html#DOCGUIDE-BUILD-PLAIN-TEXT">J.3.4. Простые текстовые файлы</a></span></dt><dt><span class="sect2"><a href="docguide-build.html#DOCGUIDE-BUILD-SYNTAX-CHECK">J.3.5. Проверка синтаксиса</a></span></dt></dl></div><p>Завершив все подготовительные действия, перейдите в каталог <code class="filename">doc/src/sgml</code> и запустите одну из команд сборки, описанных в следующих подразделах. (Помните, что для сборки нужно использовать GNU make.)</p><div class="sect2" id="DOCGUIDE-BUILD-HTML"><div class="titlepage"><div><div><h3 class="title">J.3.1. HTML <a href="#DOCGUIDE-BUILD-HTML" class="id_link">#</a></h3></div></div></div><p>Чтобы собрать <acronym class="acronym">HTML</acronym>-версию документации: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make html</code></strong>
</pre><p> Эта цель сборки также выбирается по умолчанию. Результат помещается в подкаталог <code class="filename">html</code>.</p><p>Чтобы получить HTML-документацию со стилем оформления, используемым на сайте <a class="ulink" href="https://www.postgresql.org/docs/current/" target="_top">postgresql.org</a>, вместо простого стандартного стиля, выполните: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make STYLE=website html</code></strong>
</pre><p>В случае использования указания <code class="literal">STYLE=website</code> создаваемые HTML-файлы будут ссылаться на стили, размещённые на сайте <a class="ulink" href="https://www.postgresql.org/docs/current/" target="_top">postgresql.org</a>, и для просмотра этих файлов потребуется доступ к сети.</p></div><div class="sect2" id="DOCGUIDE-BUILD-MANPAGES"><div class="titlepage"><div><div><h3 class="title">J.3.2. Страницы man <a href="#DOCGUIDE-BUILD-MANPAGES" class="id_link">#</a></h3></div></div></div><p>Для преобразования страниц <span class="productname">DocBook</span> <code class="sgmltag-element">refentry</code> в формат *roff, подходящий для страниц man, мы используем стили DocBook XSL. Чтобы создать страницы man, выполните команду: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make man</code></strong>
</pre></div><div class="sect2" id="DOCGUIDE-BUILD-PDF"><div class="titlepage"><div><div><h3 class="title">J.3.3. PDF <a href="#DOCGUIDE-BUILD-PDF" class="id_link">#</a></h3></div></div></div><p>Чтобы получить документацию в формате PDF, используя <span class="productname">FOP</span>, выполните одну из следующих команд, в зависимости от предпочитаемого размера бумаги: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Для формата A4: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make postgres-A4.pdf</code></strong>
</pre></li><li class="listitem"><p>Для формата U.S. letter: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make postgres-US.pdf</code></strong>
</pre></li></ul></div><p>Так как документация PostgreSQL весьма объёмна, процессору <span class="productname">FOP</span> для её обработки требуется много памяти. Поэтому в некоторых системах сборка может прерваться ошибкой, связанной с памятью. Обычно это можно исправить, увеличив объём области кучи Java в файле конфигурации <code class="filename">~/.foprc</code>, например: </p><pre class="programlisting"># Бинарный пакет FOP
FOP_OPTS='-Xmx1500m'
# Debian
JAVA_ARGS='-Xmx1500m'
# Red Hat
ADDITIONAL_FLAGS='-Xmx1500m'</pre><p> Некоторый объём памяти является минимально необходимым, а если задать больший объём, возможно даже некоторое ускорение сборки. В системах с очень маленьким объёмом памяти (меньше 1 ГБ) сборка либо будет слишком медленной из-за подкачки, либо вообще не будет осуществляться.</p><p>В конфигурации по умолчанию <span class="productname">FOP</span> выдаёт сообщение <code class="literal">INFO</code> для каждой страницы. Уровень детализации можно изменить в файле конфигурации <code class="filename">~/.foprc</code>: </p><pre class="programlisting">LOGCHOICE=-Dorg.apache.commons.logging.Log=​org.apache.commons.logging.impl.SimpleLog
LOGLEVEL=-Dorg.apache.commons.logging.simplelog.defaultlog=WARN</pre><p>Также можно воспользоваться другими процессорами XSL-FO, запуская их вручную, но автоматическая процедура сборки поддерживает только FOP.</p></div><div class="sect2" id="DOCGUIDE-BUILD-PLAIN-TEXT"><div class="titlepage"><div><div><h3 class="title">J.3.4. Простые текстовые файлы <a href="#DOCGUIDE-BUILD-PLAIN-TEXT" class="id_link">#</a></h3></div></div></div><p>Инструкции по установке также распространяются в виде обычного текста, на случай, если они понадобятся в ситуации, когда под рукой не окажется средств просмотра более удобного формата. Файл <code class="filename">INSTALL</code> соответствует <a class="xref" href="installation.html" title="Глава 17. Установка из исходного кода">Главе 17</a>, с небольшими изменениями, внесёнными с учётом другого контекста. Чтобы пересоздать этот файл, перейдите в каталог <code class="filename">doc/src/sgml</code> и введите <strong class="userinput"><code>make INSTALL</code></strong>. Для получения текстового формата вам дополнительно потребуется <span class="productname">Pandoc</span> версии 1.13 или новее.</p><p>В прошлом примечания к выпуску и инструкции по регрессионному тестированию также распространялись в виде простых текстовых файлов, но эта практика была прекращена.</p></div><div class="sect2" id="DOCGUIDE-BUILD-SYNTAX-CHECK"><div class="titlepage"><div><div><h3 class="title">J.3.5. Проверка синтаксиса <a href="#DOCGUIDE-BUILD-SYNTAX-CHECK" class="id_link">#</a></h3></div></div></div><p>Сборка всей документации может занять много времени. Но если нужно проверить только синтаксис файлов документации, это можно сделать всего за несколько секунд: </p><pre class="screen">
<code class="prompt">doc/src/sgml$ </code><strong class="userinput"><code>make check</code></strong>
</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="docguide-toolsets.html" title="J.2. Инструментарий">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="docguide.html" title="Приложение J. Документация">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="docguide-build-meson.html" title="J.4. Сборка документации с помощью Meson">След.</a></td></tr><tr><td width="40%" align="left" valign="top">J.2. Инструментарий </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> J.4. Сборка документации с помощью Meson</td></tr></table></div></body></html>