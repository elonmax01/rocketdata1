<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>32.1. Что такое JIT-компиляция?</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="jit.html" title="Глава 32. JIT-компиляция" /><link rel="next" href="jit-decision.html" title="32.2. Когда применять JIT?" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">32.1. Что такое <acronym class="acronym">JIT</acronym>-компиляция?</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="jit.html" title="Глава 32. JIT-компиляция">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="jit.html" title="Глава 32. JIT-компиляция">Наверх</a></td><th width="60%" align="center">Глава 32. <acronym class="acronym">JIT</acronym>-компиляция</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="jit-decision.html" title="32.2. Когда применять JIT?">След.</a></td></tr></table><hr /></div><div class="sect1" id="JIT-REASON"><div class="titlepage"><div><div><h2 class="title" style="clear: both">32.1. Что такое <acronym class="acronym">JIT</acronym>-компиляция? <a href="#JIT-REASON" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="jit-reason.html#JIT-ACCELERATED-OPERATIONS">32.1.1. Операции, ускоряемые с применением <acronym class="acronym">JIT</acronym></a></span></dt><dt><span class="sect2"><a href="jit-reason.html#JIT-INLINING">32.1.2. Встраивание</a></span></dt><dt><span class="sect2"><a href="jit-reason.html#JIT-OPTIMIZATION">32.1.3. Оптимизация</a></span></dt></dl></div><p><acronym class="acronym">JIT</acronym>-компиляция (Just-In-Time compilation, Компиляция «точно в нужное время») — это производимая во время выполнения процедура преобразования интерпретируемого варианта исполнения программы в программу на языке процессора. Например, вместо использования универсального кода, способного вычислять произвольные SQL-выражения, для вычисления конкретного условия <code class="literal">WHERE a.col = 3</code> можно сгенерировать функцию, предназначенную именно для этого выражения, которую сможет выполнять непосредственно процессор, так что она будет выполняться быстрее.</p><p><span class="productname">PostgreSQL</span> поддерживает <acronym class="acronym">JIT</acronym>-компиляцию с использованием <a class="ulink" href="https://llvm.org/" target="_top"><span class="productname">LLVM</span></a>, если сборка <span class="productname">PostgreSQL</span> производится с ключом <a class="link" href="install-make.html#CONFIGURE-WITH-LLVM"><code class="literal">--with-llvm</code></a>.</p><p>Дополнительные подробности можно найти в файле <code class="filename">src/backend/jit/README</code>.</p><div class="sect2" id="JIT-ACCELERATED-OPERATIONS"><div class="titlepage"><div><div><h3 class="title">32.1.1. Операции, ускоряемые с применением <acronym class="acronym">JIT</acronym> <a href="#JIT-ACCELERATED-OPERATIONS" class="id_link">#</a></h3></div></div></div><p>В настоящее время реализация <acronym class="acronym">JIT</acronym> в <span class="productname">PostgreSQL</span> поддерживает ускорение вычисления выражений и преобразования кортежей. В будущем могут быть ускорены и некоторые другие операции.</p><p>Вычисление выражений производится при обработке предложений <code class="literal">WHERE</code>, целевых списков, агрегатов и проекций. Оно может быть ускорено в результате генерирования кода, предназначенного для каждого конкретного случая.</p><p>Преобразование кортежей — процедура перевода кортежа с диска (см. <a class="xref" href="storage-page-layout.html#STORAGE-TUPLE-LAYOUT" title="73.6.1. Компоновка строки таблицы">Подраздел 73.6.1</a>) в развёрнутое представление в памяти. Его можно ускорить, создав функции, предназначенные для определённой структуры таблицы и количества извлекаемых столбцов.</p></div><div class="sect2" id="JIT-INLINING"><div class="titlepage"><div><div><h3 class="title">32.1.2. Встраивание <a href="#JIT-INLINING" class="id_link">#</a></h3></div></div></div><p>СУБД <span class="productname">PostgreSQL</span> очень гибка и позволяет определять новые типы данных, функции, операторы и другие объекты базы данных; см. <a class="xref" href="extend.html" title="Глава 38. Расширение SQL">Главу 38</a>. В действительности встроенные объекты реализуются практически теми же механизмами. С этой гибкостью связаны некоторые издержки, например, сопутствующие вызовам функций (см. <a class="xref" href="xfunc.html" title="38.3. Пользовательские функции">Раздел 38.3</a>). Для сокращения этих издержек <acronym class="acronym">JIT</acronym>-компиляция может встраивать тела маленьких функций в код выражений, использующих их. Это позволяет соптимизировать значительный процент подобных издержек.</p></div><div class="sect2" id="JIT-OPTIMIZATION"><div class="titlepage"><div><div><h3 class="title">32.1.3. Оптимизация <a href="#JIT-OPTIMIZATION" class="id_link">#</a></h3></div></div></div><p>В <span class="productname">LLVM</span> поддерживается оптимизация сгенерированного кода. Некоторые оптимизации обходятся достаточно дёшево и могут выполняться при использовании <acronym class="acronym">JIT</acronym> в любом случае, тогда как другие оправданы только при длительных запросах. Подробнее об оптимизации рассказывается в <a class="ulink" href="https://llvm.org/docs/Passes.html#transform-passes" target="_top">https://llvm.org/docs/Passes.html#transform-passes</a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="jit.html" title="Глава 32. JIT-компиляция">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="jit.html" title="Глава 32. JIT-компиляция">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="jit-decision.html" title="32.2. Когда применять JIT?">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 32. <acronym class="acronym">JIT</acronym>-компиляция </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 32.2. Когда применять <acronym class="acronym">JIT</acronym>?</td></tr></table></div></body></html>