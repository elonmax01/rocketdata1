<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ALTER PUBLICATION</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-alterprocedure.html" title="ALTER PROCEDURE" /><link rel="next" href="sql-alterrole.html" title="ALTER ROLE" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">ALTER PUBLICATION</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-alterprocedure.html" title="ALTER PROCEDURE">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-alterrole.html" title="ALTER ROLE">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-ALTERPUBLICATION"><div class="titlepage"></div><a id="id-1.9.3.25.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">ALTER PUBLICATION</span></h2><p>ALTER PUBLICATION — изменить определение публикации</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> ADD <em class="replaceable"><code>объект_публикации</code></em> [, ...]
ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> SET <em class="replaceable"><code>объект_публикации</code></em> [, ...]
ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> DROP <em class="replaceable"><code>объект_публикации</code></em> [, ...]
ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> SET ( <em class="replaceable"><code>параметр_публикации</code></em> [= <em class="replaceable"><code>значение</code></em>] [, ... ] )
ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> OWNER TO { <em class="replaceable"><code>новый_владелец</code></em> | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PUBLICATION <em class="replaceable"><code>имя</code></em> RENAME TO <em class="replaceable"><code>новое_имя</code></em>

<span class="phrase">где <em class="replaceable"><code>объект_публикации</code></em> может быть следующим:</span>

    TABLE [ ONLY ] <em class="replaceable"><code>имя_таблицы</code></em> [ * ] [ ( <em class="replaceable"><code>имя_столбца</code></em> [, ... ] ) ] [ WHERE ( <em class="replaceable"><code>выражение</code></em> ) ] [, ... ]
    TABLES IN SCHEMA { <em class="replaceable"><code>имя_схемы</code></em> | CURRENT_SCHEMA } [, ... ]</pre></div><div class="refsect1" id="id-1.9.3.25.5"><h2>Описание</h2><p>Команда <code class="command">ALTER PUBLICATION</code> может изменять атрибуты публикации.</p><p>Первые три формы управляют вхождением таблиц/схем в публикации. Предложение <code class="literal">SET</code> заменяет список таблиц/схем в публикации заданным списком; таблицы/схемы, входившие в публикацию ранее, будут удалены из неё. Предложения <code class="literal">ADD</code> и <code class="literal">DROP</code> добавляют и удаляют таблицы/схемы в публикации соответственно. Заметьте, что при добавлении таблиц/схем в публикацию, на которую уже оформлена подписка, необходимо выполнить <code class="literal">ALTER SUBSCRIPTION ... REFRESH PUBLICATION</code> на стороне подписчика, чтобы это изменение вступило в силу. Также заметьте, что команда <code class="literal">DROP TABLES IN SCHEMA</code> не удаляет относящиеся к заданной схеме таблицы, включённые в публикацию указаниями <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-TABLE"><code class="literal">FOR TABLE</code></a>/ <code class="literal">ADD TABLE</code>, а с предложением <code class="literal">DROP</code> нельзя использовать предложение <code class="literal">WHERE</code>.</p><p>Четвёртая форма этой команды, показанная в сводке синтаксиса, может изменять все свойства публикации, заданные в <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>. Свойства, которые не упоминаются в этой команде, сохраняют предыдущие значения.</p><p>Остальные формы команды меняют владельца и имя публикации.</p><p>Для выполнения <code class="command">ALTER PUBLICATION</code> необходимо владеть данной публикацией. Чтобы добавить таблицу в публикацию, дополнительно нужно быть владельцем этой таблицы. Для выполнения <code class="literal">ADD TABLES IN SCHEMA</code> и <code class="literal">SET TABLES IN SCHEMA</code> требуется быть суперпользователем. Чтобы сменить владельца, необходимо иметь право <code class="literal">SET ROLE</code> для новой роли-владельца, а эта роль должна иметь право <code class="literal">CREATE</code> в базе данных. Кроме того, новым владельцем публикации вида <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-ALL-TABLES"><code class="literal">FOR ALL TABLES</code></a> или <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-TABLES-IN-SCHEMA"><code class="literal">FOR TABLES IN SCHEMA</code></a> должен быть суперпользователь. Однако суперпользователь может менять владельца публикации вне зависимости от этих ограничений.</p><p>Добавление/указание схемы, когда публикация также публикует таблицу со списком столбцом, равно как и обратная операция, не поддерживается.</p></div><div class="refsect1" id="id-1.9.3.25.6"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>имя</code></em></span></dt><dd><p>Имя существующей публикации, определение которой изменяется.</p></dd><dt><span class="term"><em class="replaceable"><code>имя_таблицы</code></em></span></dt><dd><p>Имя существующей таблицы. Если перед именем таблицы указано <code class="literal">ONLY</code>, затрагивается только заданная таблица. Без <code class="literal">ONLY</code> затрагивается и заданная таблица, и все её потомки (если таковые есть). После имени таблицы можно добавить необязательное указание <code class="literal">*</code>, чтобы явно обозначить, что должны затрагиваться и все дочерние таблицы.</p><p>Дополнительно может быть указан список столбцов. За подробностями обратитесь к <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>. Заметьте, что оформить одну подписку на несколько публикаций, в которых одна таблица опубликована с разными списками столбцов, нельзя. Подробнее проблемы, возможные при изменении списка столбцов, описаны в <a class="xref" href="logical-replication-col-lists.html#LOGICAL-REPLICATION-COL-LIST-COMBINING" title="Внимание: объединение списков столбцов из нескольких публикаций">Внимание: объединение списков столбцов из нескольких публикаций</a>.</p><p>Если указано необязательное предложение <code class="literal">WHERE</code>, строки, для которых <em class="replaceable"><code>выражение</code></em> выдаёт false или null, не будут публиковаться. Заметьте, что выражение должно заключаться в круглые скобки. Вычисляется <em class="replaceable"><code>выражение</code></em> от имени роли, которая применяется для соединения репликации.</p></dd><dt><span class="term"><em class="replaceable"><code>имя_схемы</code></em></span></dt><dd><p>Имя существующей схемы.</p></dd><dt><span class="term"><code class="literal">SET ( <em class="replaceable"><code>параметр_публикации</code></em> [= <em class="replaceable"><code>значение</code></em>] [, ... ] )</code></span></dt><dd><p>Это предложение изменяет параметры публикации, изначально установленные командой <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>. За дополнительными сведениями обратитесь к её описанию.</p></dd><dt><span class="term"><em class="replaceable"><code>новый_владелец</code></em></span></dt><dd><p>Имя пользователя, назначаемого новым владельцем публикации.</p></dd><dt><span class="term"><em class="replaceable"><code>новое_имя</code></em></span></dt><dd><p>Новое имя публикации.</p></dd></dl></div></div><div class="refsect1" id="id-1.9.3.25.7"><h2>Примеры</h2><p>Изменение публикации, чтобы публиковались только удаления и изменения: </p><pre class="programlisting">ALTER PUBLICATION noinsert SET (publish = 'update, delete');</pre><p>Добавление таблиц в публикацию: </p><pre class="programlisting">ALTER PUBLICATION mypublication ADD TABLE users (user_id, firstname), departments;</pre><p>Изменение набора столбцов, публикуемых для таблицы: </p><pre class="programlisting">ALTER PUBLICATION mypublication SET TABLE users (user_id, firstname, lastname), TABLE departments;</pre><p>Добавление схем <code class="structname">marketing</code> и <code class="structname">sales</code> в публикацию <code class="structname">sales_publication</code>: </p><pre class="programlisting">ALTER PUBLICATION sales_publication ADD TABLES IN SCHEMA marketing, sales;</pre><p>Добавление таблиц <code class="structname">users</code>, <code class="structname">departments</code> и схемы <code class="structname">production</code> в публикацию <code class="structname">production_publication</code>: </p><pre class="programlisting">ALTER PUBLICATION production_publication ADD TABLE users, departments, TABLES IN SCHEMA production;</pre></div><div class="refsect1" id="id-1.9.3.25.8"><h2>Совместимость</h2><p><code class="command">ALTER PUBLICATION</code> является расширением <span class="productname">PostgreSQL</span>.</p></div><div class="refsect1" id="id-1.9.3.25.9"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>, <a class="xref" href="sql-droppublication.html" title="DROP PUBLICATION"><span class="refentrytitle">DROP PUBLICATION</span></a>, <a class="xref" href="sql-createsubscription.html" title="CREATE SUBSCRIPTION"><span class="refentrytitle">CREATE SUBSCRIPTION</span></a>, <a class="xref" href="sql-altersubscription.html" title="ALTER SUBSCRIPTION"><span class="refentrytitle">ALTER SUBSCRIPTION</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-alterprocedure.html" title="ALTER PROCEDURE">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-alterrole.html" title="ALTER ROLE">След.</a></td></tr><tr><td width="40%" align="left" valign="top">ALTER PROCEDURE </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> ALTER ROLE</td></tr></table></div></body></html>