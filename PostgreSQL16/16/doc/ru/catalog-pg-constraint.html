<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.13. pg_constraint</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="catalog-pg-collation.html" title="53.12. pg_collation" /><link rel="next" href="catalog-pg-conversion.html" title="53.14. pg_conversion" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.13. <code class="structname">pg_constraint</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="catalog-pg-collation.html" title="53.12. pg_collation">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><th width="60%" align="center">Глава 53. Системные каталоги</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="catalog-pg-conversion.html" title="53.14. pg_conversion">След.</a></td></tr></table><hr /></div><div class="sect1" id="CATALOG-PG-CONSTRAINT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.13. <code class="structname">pg_constraint</code> <a href="#CATALOG-PG-CONSTRAINT" class="id_link">#</a></h2></div></div></div><a id="id-1.10.4.15.2" class="indexterm"></a><p>В каталоге <code class="structname">pg_constraint</code> хранятся ограничения-проверки, ограничения-исключения, а также ограничения первичного ключа, уникальности и внешних ключей, определённые для таблиц. (Ограничения столбцов описываются как и все остальные. Любое ограничение столбца равнозначно некоторому ограничению таблицы.) Ограничения на NULL представляются не здесь, а в каталоге <a class="link" href="catalog-pg-attribute.html" title="53.7. pg_attribute"><code class="structname">pg_attribute</code></a>.</p><p>Для пользовательских триггеров ограничений (создаваемых командой <a class="link" href="sql-createtrigger.html" title="CREATE TRIGGER"><code class="command">CREATE CONSTRAINT TRIGGER</code></a>) в этой таблице также создаётся запись.</p><p>Здесь также хранятся ограничения доменов.</p><div class="table" id="id-1.10.4.15.6"><p class="title"><strong>Таблица 53.13. Столбцы <code class="structname">pg_constraint</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы pg_constraint" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">oid</code> <code class="type">oid</code>
      </p>
      <p>Идентификатор строки</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">conname</code> <code class="type">name</code>
      </p>
      <p>Имя ограничения (не обязательно уникальное!)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">connamespace</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-namespace.html" title="53.32. pg_namespace"><code class="structname">pg_namespace</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID пространства имён, содержащего это ограничение</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">contype</code> <code class="type">char</code>
      </p>
      <p><code class="literal">c</code> = ограничение-проверка (check), <code class="literal">f</code> = внешний ключ (foreign key), <code class="literal">p</code> = первичный ключ (primary key), <code class="literal">u</code> = ограничение уникальности (unique), <code class="literal">t</code> = триггер ограничения (trigger), <code class="literal">x</code> = ограничение-исключение (exclusion)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">condeferrable</code> <code class="type">bool</code>
      </p>
      <p>Является ли ограничение откладываемым?</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">condeferred</code> <code class="type">bool</code>
      </p>
      <p>Является ли ограничение отложенным по умолчанию?</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">convalidated</code> <code class="type">bool</code>
      </p>
      <p>Было ли ограничение проверено? В настоящее время значение false возможно только для внешних ключей и ограничений CHECK</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conrelid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Таблица, для которой установлено это ограничение; ноль, если это не ограничение таблицы</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">contypid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Домен, к которому относится это ограничение; ноль, если это не ограничение домена</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conindid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Индекс, поддерживающий это ограничение, если это ограничение уникальности, первичного или внешнего ключа, либо ограничение-исключение; в противном случае — ноль</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conparentid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-constraint.html" title="53.13. pg_constraint"><code class="structname">pg_constraint</code></a>.<code class="structfield">oid</code>)</p>
      <p>Соответствующее ограничение в родительской секционированной таблице, если это ограничение в секции; иначе ноль</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">confrelid</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-class.html" title="53.11. pg_class"><code class="structname">pg_class</code></a>.<code class="structfield">oid</code>)</p>
      <p>Если это внешний ключ, таблица, на которую он ссылается; иначе ноль</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">confupdtype</code> <code class="type">char</code>
      </p>
      <p>Код действия при изменении внешнего ключа: <code class="literal">a</code> = нет действия, <code class="literal">r</code> = ограничить (restrict), <code class="literal">c</code> = каскадное действие (cascade), <code class="literal">n</code> = присвоить NULL, <code class="literal">d</code> = поведение по умолчанию</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">confdeltype</code> <code class="type">char</code>
      </p>
      <p>Код действия при удалении внешнего ключа: <code class="literal">a</code> = нет действия, <code class="literal">r</code> = ограничить (restrict), <code class="literal">c</code> = каскадное действие (cascade), <code class="literal">n</code> = присвоить NULL, <code class="literal">d</code> = поведение по умолчанию</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">confmatchtype</code> <code class="type">char</code>
      </p>
      <p>Тип сопоставления внешнего ключа: <code class="literal">f</code> = полное (full), <code class="literal">p</code> = частичное (partial), <code class="literal">s</code> = простое (simple)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">conislocal</code> <code class="type">bool</code>
      </p>
      <p>Ограничение определено локально в данном отношении. Заметьте, что ограничение может быть определено локально и при этом наследоваться.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">coninhcount</code> <code class="type">int2</code>
      </p>
      <p>Число прямых предков этого ограничения. Ограничение с ненулевым числом предков нельзя удалить или переименовать.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">connoinherit</code> <code class="type">bool</code>
      </p>
      <p>Ограничение определено локально для данного отношения и является ненаследуемым.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conkey</code> <code class="type">int2[]</code> (ссылается на <a class="link" href="catalog-pg-attribute.html" title="53.7. pg_attribute"><code class="structname">pg_attribute</code></a>.<code class="structfield">attnum</code>)</p>
      <p>Для ограничений таблицы (включая внешние ключи, но не триггеры ограничений), определяет список столбцов, образующих ограничение</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">confkey</code> <code class="type">int2[]</code> (ссылается на <a class="link" href="catalog-pg-attribute.html" title="53.7. pg_attribute"><code class="structname">pg_attribute</code></a>.<code class="structfield">attnum</code>)</p>
      <p>Для внешнего ключа определяет список столбцов, на которые он ссылается</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conpfeqop</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-operator.html" title="53.34. pg_operator"><code class="structname">pg_operator</code></a>.<code class="structfield">oid</code>)</p>
      <p>Для внешнего ключа — список операторов равенства для сравнений PK = FK</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conppeqop</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-operator.html" title="53.34. pg_operator"><code class="structname">pg_operator</code></a>.<code class="structfield">oid</code>)</p>
      <p>Для внешнего ключа — список операторов равенства для сравнений PK = PK</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conffeqop</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-operator.html" title="53.34. pg_operator"><code class="structname">pg_operator</code></a>.<code class="structfield">oid</code>)</p>
      <p>Для внешнего ключа — список операторов равенства для сравнений FK = FK</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">confdelsetcols</code> <code class="type">int2[]</code> (ссылается на <a class="link" href="catalog-pg-attribute.html" title="53.7. pg_attribute"><code class="structname">pg_attribute</code></a>.<code class="structfield">attnum</code>)</p>
      <p>Для внешнего ключа с указанием <code class="literal">SET NULL</code> или <code class="literal">SET DEFAULT</code> при удалении — список изменяемых столбцов. Значение NULL показывает, что изменены будут все столбцы, на которые ссылается ключ.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">conexclop</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-operator.html" title="53.34. pg_operator"><code class="structname">pg_operator</code></a>.<code class="structfield">oid</code>)</p>
      <p>Для ограничения-исключения — список операторов исключения по столбцам</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">conbin</code> <code class="type">pg_node_tree</code>
      </p>
      <p>Для ограничения-проверки — внутреннее представление выражения. (Чтобы извлечь определение ограничения-проверки, рекомендуется использовать <code class="function">pg_get_constraintdef()</code>.)</p></td></tr></tbody></table></div></div><br class="table-break" /><p>В случае с ограничением-исключением значение <code class="structfield">conkey</code> полезно только для элементов ограничений, представляющих простые ссылки на столбцы. Для других случаев в <code class="structfield">conkey</code> задаётся ноль, и чтобы получить выражение, определяющее ограничение, надо обратиться к соответствующему индексу. (Таким образом, поле <code class="structfield">conkey</code> имеет то же содержимое, что и <a class="link" href="catalog-pg-index.html" title="53.26. pg_index"><code class="structname">pg_index</code></a>.<code class="structfield">indkey</code> для индекса.)</p><div class="note"><h3 class="title">Примечание</h3><p>Поле <code class="literal">pg_class.relchecks</code> должно согласовываться с числом ограничений-проверок, описанных в данной таблице для каждого отношения.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="catalog-pg-collation.html" title="53.12. pg_collation">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="catalog-pg-conversion.html" title="53.14. pg_conversion">След.</a></td></tr><tr><td width="40%" align="left" valign="top">53.12. <code class="structname">pg_collation</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 53.14. <code class="structname">pg_conversion</code></td></tr></table></div></body></html>