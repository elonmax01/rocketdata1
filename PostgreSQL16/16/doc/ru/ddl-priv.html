<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5.7. Права</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="ddl-alter.html" title="5.6. Изменение таблиц" /><link rel="next" href="ddl-rowsecurity.html" title="5.8. Политики защиты строк" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">5.7. Права</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="ddl-alter.html" title="5.6. Изменение таблиц">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="ddl.html" title="Глава 5. Определение данных">Наверх</a></td><th width="60%" align="center">Глава 5. Определение данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="ddl-rowsecurity.html" title="5.8. Политики защиты строк">След.</a></td></tr></table><hr /></div><div class="sect1" id="DDL-PRIV"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.7. Права <a href="#DDL-PRIV" class="id_link">#</a></h2></div></div></div><a id="id-1.5.4.9.2" class="indexterm"></a><a id="id-1.5.4.9.3" class="indexterm"></a><a id="id-1.5.4.9.4" class="indexterm"></a><a id="id-1.5.4.9.5" class="indexterm"></a><a id="id-1.5.4.9.6" class="indexterm"></a><a id="id-1.5.4.9.7" class="indexterm"></a><p>Когда в базе данных создаётся объект, ему назначается владелец. Владельцем обычно становится роль, с которой был выполнен оператор создания. Для большинства типов объектов в исходном состоянии только владелец (или суперпользователь) может делать с объектом всё, что угодно. Чтобы разрешить использовать его другим ролям, нужно дать им <em class="firstterm">права</em>.</p><p>Существует несколько типов прав: <code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, <code class="literal">TRUNCATE</code>, <code class="literal">REFERENCES</code>, <code class="literal">TRIGGER</code>, <code class="literal">CREATE</code>, <code class="literal">CONNECT</code>, <code class="literal">TEMPORARY</code>, <code class="literal">EXECUTE</code>, <code class="literal">USAGE</code>, <code class="literal">SET</code> и <code class="literal">ALTER SYSTEM</code>. Набор прав, применимых к определённому объекту, зависит от типа объекта (таблица, функция и т. д.). Более подробно назначение этих прав описывается ниже. Как применяются эти права, вы также увидите в следующих разделах и главах.</p><p>Право изменять или удалять объект является неотъемлемым правом владельца объекта, его нельзя лишиться или передать другому. (Однако как и все другие права, это право наследуют члены роли-владельца, см. <a class="xref" href="role-membership.html" title="22.3. Членство в роли">Раздел 22.3</a>.)</p><p>Объекту можно назначить нового владельца с помощью команды <code class="command">ALTER</code> для соответствующего типа объекта, например: </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>имя_таблицы</code></em> OWNER TO <em class="replaceable"><code>новый_владелец</code></em>;</pre><p> Суперпользователь может делать это без ограничений, а обычный пользователь — только если он является одновременно текущим владельцем объекта (или наследует права роли владельца) и может выполнять <code class="literal">SET ROLE</code> для новой роли владельца.</p><p>Для назначения прав применяется команда <a class="xref" href="sql-grant.html" title="GRANT"><span class="refentrytitle">GRANT</span></a>. Например, если в базе данных есть роль <code class="literal">joe</code> и таблица <code class="literal">accounts</code>, право на изменение таблицы можно дать этой роли так: </p><pre class="programlisting">GRANT UPDATE ON accounts TO joe;</pre><p> Если вместо конкретного права написать <code class="literal">ALL</code>, роль получит все права, применимые для объекта этого типа.</p><p>Для назначения права всем ролям в системе можно использовать специальное имя <span class="quote">«<span class="quote">роли</span>»</span>: <code class="literal">PUBLIC</code>. Также для упрощения управления ролями, когда в базе данных есть множество пользователей, можно настроить <span class="quote">«<span class="quote">групповые</span>»</span> роли; подробнее об этом см. <a class="xref" href="user-manag.html" title="Глава 22. Роли базы данных">Главу 22</a>.</p><p>Чтобы лишить пользователей ранее данных им прав, используйте команду <a class="xref" href="sql-revoke.html" title="REVOKE"><span class="refentrytitle">REVOKE</span></a>: </p><pre class="programlisting">REVOKE ALL ON accounts FROM PUBLIC;</pre><p>Обычно распоряжаться правами может только владелец объекта (или суперпользователь). Однако возможно дать право доступа к объекту <span class="quote">«<span class="quote">с правом передачи</span>»</span>, что позволит получившему такое право назначать его другим. Если такое право передачи впоследствии будет отозвано, то все, кто получил данное право доступа (непосредственно или по цепочке передачи), потеряют его. Подробнее об этом см. справку <a class="xref" href="sql-grant.html" title="GRANT"><span class="refentrytitle">GRANT</span></a> и <a class="xref" href="sql-revoke.html" title="REVOKE"><span class="refentrytitle">REVOKE</span></a>.</p><p>Владелец объекта может лишить себя обычных прав, например запретить не только всем остальным, но и себе, вносить изменения в таблицу. Однако владельцы всегда имеют возможность управлять правами, так что они могут в любом случае вернуть себе права, которых лишились.</p><p>Все существующие права перечислены ниже: </p><div class="variablelist"><dl class="variablelist"><dt id="DDL-PRIV-SELECT"><span class="term"><code class="literal">SELECT</code></span> <a href="#DDL-PRIV-SELECT" class="id_link">#</a></dt><dd><p>Позволяет выполнять <code class="command">SELECT</code> для любого столбца или перечисленных столбцов в заданной таблице, представлении, матпредставлении или другом объекте табличного вида. Также позволяет выполнять <code class="command">COPY TO</code>. Помимо этого, данное право требуется для обращения к существующим значениям столбцов в <code class="command">UPDATE</code>, <code class="command">DELETE</code> или <code class="command">MERGE</code>. Для последовательностей это право позволяет пользоваться функцией <code class="function">currval</code>. Для больших объектов оно позволяет читать содержимое объекта.</p></dd><dt id="DDL-PRIV-INSERT"><span class="term"><code class="literal">INSERT</code></span> <a href="#DDL-PRIV-INSERT" class="id_link">#</a></dt><dd><p>Позволяет вставлять с помощью <code class="command">INSERT</code> строки в заданную таблицу, представление и т. п. Может назначаться для отдельных столбцов; в этом случае только этим столбцам можно присваивать значения в команде <code class="command">INSERT</code> (другие столбцы получат значения по умолчанию). Также позволяет выполнять <code class="command">COPY FROM</code>.</p></dd><dt id="DDL-PRIV-UPDATE"><span class="term"><code class="literal">UPDATE</code></span> <a href="#DDL-PRIV-UPDATE" class="id_link">#</a></dt><dd><p>Позволяет изменять с помощью <code class="command">UPDATE</code> данные во всех, либо только перечисленных, столбцах в заданной таблице, представлении и т. п. (На практике для любой нетривиальной команды <code class="command">UPDATE</code> потребуется и право <code class="literal">SELECT</code>, так как она должна обратиться к столбцам таблицы, чтобы определить, какие строки подлежат изменению, и/или вычислить новые значения столбцов.) Для <code class="literal">SELECT ... FOR UPDATE</code> и <code class="literal">SELECT ... FOR SHARE</code> также требуется иметь это право как минимум для одного столбца, помимо права <code class="literal">SELECT</code>. Для последовательностей это право позволяет пользоваться функциями <code class="function">nextval</code> и <code class="function">setval</code>. Для больших объектов это право позволяет записывать данные в объект или обрезать его.</p></dd><dt id="DDL-PRIV-DELETE"><span class="term"><code class="literal">DELETE</code></span> <a href="#DDL-PRIV-DELETE" class="id_link">#</a></dt><dd><p>Позволяет удалять с помощью команды <code class="command">DELETE</code> строки из таблицы, представления и т. п. (На практике для любой нетривиальной команды <code class="command">DELETE</code> потребуется также право <code class="literal">SELECT</code>, так как она должна обратиться к колонкам таблицы, чтобы определить, какие строки подлежат удалению.)</p></dd><dt id="DDL-PRIV-TRUNCATE"><span class="term"><code class="literal">TRUNCATE</code></span> <a href="#DDL-PRIV-TRUNCATE" class="id_link">#</a></dt><dd><p>Позволяет опустошать таблицу с помощью <code class="command">TRUNCATE</code>.</p></dd><dt id="DDL-PRIV-REFERENCES"><span class="term"><code class="literal">REFERENCES</code></span> <a href="#DDL-PRIV-REFERENCES" class="id_link">#</a></dt><dd><p>Позволяет создавать ограничение внешнего ключа, обращающееся к таблице или определённым столбцам таблицы.</p></dd><dt id="DDL-PRIV-TRIGGER"><span class="term"><code class="literal">TRIGGER</code></span> <a href="#DDL-PRIV-TRIGGER" class="id_link">#</a></dt><dd><p>Позволяет создавать триггер для таблицы, представления и т. п.</p></dd><dt id="DDL-PRIV-CREATE"><span class="term"><code class="literal">CREATE</code></span> <a href="#DDL-PRIV-CREATE" class="id_link">#</a></dt><dd><p>Для баз данных это право позволяет создавать схемы и публикации, а также устанавливать доверенные расширения в конкретной базе.</p><p>Для схем это право позволяет создавать новые объекты в заданной схеме. Чтобы переименовать существующий объект, необходимо быть его владельцем <span class="emphasis"><em>и</em></span> иметь это право для схемы, содержащей его.</p><p>Для табличных пространств это право позволяет создавать таблицы, индексы и временные файлы в определённом табличном пространстве, а также создавать базы данных, для которых это пространство будет основным.</p><p>Заметьте, что факт лишения пользователя этого права не влияет на существование или размещение существующих объектов.</p></dd><dt id="DDL-PRIV-CONNECT"><span class="term"><code class="literal">CONNECT</code></span> <a href="#DDL-PRIV-CONNECT" class="id_link">#</a></dt><dd><p>Позволяет подключаться к базе данных. Это право проверяется при установлении соединения (в дополнение к условиям, определённым в конфигурации <code class="filename">pg_hba.conf</code>).</p></dd><dt id="DDL-PRIV-TEMPORARY"><span class="term"><code class="literal">TEMPORARY</code></span> <a href="#DDL-PRIV-TEMPORARY" class="id_link">#</a></dt><dd><p>Позволяет создавать временные таблицы в определённой базе данных.</p></dd><dt id="DDL-PRIV-EXECUTE"><span class="term"><code class="literal">EXECUTE</code></span> <a href="#DDL-PRIV-EXECUTE" class="id_link">#</a></dt><dd><p>Позволяет вызывать функцию или процедуру, в том числе использовать любые операторы, реализованные данной функцией. Это единственный тип прав, применимый к функциям и процедурам.</p></dd><dt id="DDL-PRIV-USAGE"><span class="term"><code class="literal">USAGE</code></span> <a href="#DDL-PRIV-USAGE" class="id_link">#</a></dt><dd><p>Для процедурных языков это право позволяет создавать функции на определённом языке. Это единственный тип прав, применимый к процедурным языкам.</p><p>Для схем это право даёт доступ к содержащимся в них объектам (предполагается, что при этом имеются права, необходимые для доступа к самим объектам). По сути это право позволяет субъекту <span class="quote">«<span class="quote">просматривать</span>»</span> объекты внутри схемы. Без этого разрешения имена объектов всё же можно будет узнать, например, обратившись к системным каталогам. Кроме того, если отозвать это право, в существующих сеансах могут оказаться операторы, для которых просмотр имён объектов был выполнен ранее, так что это право не позволяет абсолютно надёжно перекрыть доступ к объектам.</p><p>Для последовательностей это право позволяет использовать функции <code class="function">currval</code> и <code class="function">nextval</code>.</p><p>Для типов и доменов это право позволяет использовать заданный тип или домен при создании таблиц, функций или других объектов схемы. (Заметьте, что это право не ограничивает общее <span class="quote">«<span class="quote">использование</span>»</span> типа, например обращение к значениям типа в запросах. Без этого права нельзя только создавать объекты, зависящие от заданного типа. Основное предназначение этого права в том, чтобы ограничить круг пользователей, способных создавать зависимости от типа, которые могут впоследствии помешать владельцу типа изменить его.)</p><p>Для обёрток сторонних данных это право позволяет создавать использующие их определения сторонних серверов.</p><p>Для сторонних серверов это право позволяет создавать использующие их сторонние таблицы. Наделённые этим правом могут также создавать, модифицировать или удалять собственные сопоставления пользователей, связанные с определённым сервером.</p></dd><dt id="DDL-PRIV-SET"><span class="term"><code class="literal">SET</code></span> <a href="#DDL-PRIV-SET" class="id_link">#</a></dt><dd><p>Позволяет задать для параметра конфигурации сервера новое значение в текущем сеансе. (Хотя это право может быть предоставлено для любого параметра, оно имеет смысл только для тех параметров, для которых обычно требуются права суперпользователя.)</p></dd><dt id="DDL-PRIV-ALTER-SYSTEM"><span class="term"><code class="literal">ALTER SYSTEM</code></span> <a href="#DDL-PRIV-ALTER-SYSTEM" class="id_link">#</a></dt><dd><p>Позволяет присваивать значение параметру конфигурации сервера, используя команду <a class="xref" href="sql-altersystem.html" title="ALTER SYSTEM"><span class="refentrytitle">ALTER SYSTEM</span></a>.</p></dd></dl></div><p> Права, требующиеся для других команд, указаны на страницах справки этих команд.</p><p>PostgreSQL по умолчанию назначает роли <code class="literal">PUBLIC</code> права для некоторых типов объектов, когда эти объекты создаются. Для таблиц, столбцов, последовательностей, обёрток сторонних данных, сторонних серверов, больших объектов, схем, табличных пространств или параметров конфигурации <code class="literal">PUBLIC</code> по умолчанию никаких прав не получает. Для других типов объектов <code class="literal">PUBLIC</code> получает следующие права по умолчанию: <code class="literal">CONNECT</code> и <code class="literal">TEMPORARY</code> (создание временных таблиц) для баз данных; <code class="literal">EXECUTE</code> — для функций и процедур; <code class="literal">USAGE</code> — для языков и типов данных (включая домены). Владелец объекта, конечно же, может отозвать (посредством <code class="command">REVOKE</code>) как явно назначенные права, так и права по умолчанию. (Для максимальной безопасности команду <code class="command">REVOKE</code> нужно выполнять в транзакции, создающей объект; тогда не образуется окно, в котором другой пользователь сможет обратиться к объекту.) Кроме того, эти изначально назначаемые права по умолчанию можно переопределить, воспользовавшись командой <a class="xref" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES"><span class="refentrytitle">ALTER DEFAULT PRIVILEGES</span></a>.</p><p>В <a class="xref" href="ddl-priv.html#PRIVILEGE-ABBREVS-TABLE" title="Таблица 5.1. Сокращённые обозначения прав в ACL">Таблице 5.1</a> показаны однобуквенные сокращения, которыми обозначаются эти права в списках <em class="firstterm">ACL</em> (Access Control List, Список контроля доступа). Вы увидите эти сокращения в выводе перечисленных ниже команд <a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a> или в столбцах ACL в системных каталогах.</p><div class="table" id="PRIVILEGE-ABBREVS-TABLE"><p class="title"><strong>Таблица 5.1. Сокращённые обозначения прав в ACL</strong></p><div class="table-contents"><table class="table" summary="Сокращённые обозначения прав в ACL" border="1"><colgroup><col class="col1" /><col class="col2" /><col class="col3" /></colgroup><thead><tr><th>Право</th><th>Сокращение</th><th>Применимые типы объектов</th></tr></thead><tbody><tr><td><code class="literal">SELECT</code></td><td><code class="literal">r</code> (<span class="quote">«<span class="quote">read</span>»</span>, чтение)</td><td><code class="literal">LARGE OBJECT</code>, <code class="literal">SEQUENCE</code>, <code class="literal">TABLE</code> (и объекты, подобным таблицам), столбец таблицы</td></tr><tr><td><code class="literal">INSERT</code></td><td><code class="literal">a</code> (<span class="quote">«<span class="quote">append</span>»</span>, добавление)</td><td><code class="literal">TABLE</code>, столбец таблицы</td></tr><tr><td><code class="literal">UPDATE</code></td><td><code class="literal">w</code> (<span class="quote">«<span class="quote">write</span>»</span>, запись)</td><td><code class="literal">LARGE OBJECT</code>, <code class="literal">SEQUENCE</code>, <code class="literal">TABLE</code>, столбец таблицы</td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">d</code></td><td><code class="literal">TABLE</code></td></tr><tr><td><code class="literal">TRUNCATE</code></td><td><code class="literal">D</code></td><td><code class="literal">TABLE</code></td></tr><tr><td><code class="literal">REFERENCES</code></td><td><code class="literal">x</code></td><td><code class="literal">TABLE</code>, столбец таблицы</td></tr><tr><td><code class="literal">TRIGGER</code></td><td><code class="literal">t</code></td><td><code class="literal">TABLE</code></td></tr><tr><td><code class="literal">CREATE</code></td><td><code class="literal">C</code></td><td><code class="literal">DATABASE</code>, <code class="literal">SCHEMA</code>, <code class="literal">TABLESPACE</code></td></tr><tr><td><code class="literal">CONNECT</code></td><td><code class="literal">c</code></td><td><code class="literal">DATABASE</code></td></tr><tr><td><code class="literal">TEMPORARY</code></td><td><code class="literal">T</code></td><td><code class="literal">DATABASE</code></td></tr><tr><td><code class="literal">EXECUTE</code></td><td><code class="literal">X</code></td><td><code class="literal">FUNCTION</code>, <code class="literal">PROCEDURE</code></td></tr><tr><td><code class="literal">USAGE</code></td><td><code class="literal">U</code></td><td><code class="literal">DOMAIN</code>, <code class="literal">FOREIGN DATA WRAPPER</code>, <code class="literal">FOREIGN SERVER</code>, <code class="literal">LANGUAGE</code>, <code class="literal">SCHEMA</code>, <code class="literal">SEQUENCE</code>, <code class="literal">TYPE</code></td></tr><tr><td><code class="literal">SET</code></td><td><code class="literal">s</code></td><td><code class="literal">PARAMETER</code></td></tr><tr><td><code class="literal">ALTER SYSTEM</code></td><td><code class="literal">A</code></td><td><code class="literal">PARAMETER</code></td></tr></tbody></table></div></div><br class="table-break" /><p>В <a class="xref" href="ddl-priv.html#PRIVILEGES-SUMMARY-TABLE" title="Таблица 5.2. Сводка прав доступа">Таблица 5.2</a> для каждого типа SQL-объекта показаны относящиеся к нему права, с использованием приведённых выше сокращений. Также в ней для каждого типа приведена команда <span class="application">psql</span>, которая позволяет узнать, какие права назначены для объекта этого типа.</p><div class="table" id="PRIVILEGES-SUMMARY-TABLE"><p class="title"><strong>Таблица 5.2. Сводка прав доступа</strong></p><div class="table-contents"><table class="table" summary="Сводка прав доступа" border="1"><colgroup><col class="col1" /><col class="col2" /><col class="col3" /><col class="col4" /></colgroup><thead><tr><th>Тип объекта</th><th>Все права</th><th>Права <code class="literal">PUBLIC</code> по умолчанию</th><th>Команда <span class="application">psql</span></th></tr></thead><tbody><tr><td><code class="literal">DATABASE</code></td><td><code class="literal">CTc</code></td><td><code class="literal">Tc</code></td><td><code class="literal">\l</code></td></tr><tr><td><code class="literal">DOMAIN</code></td><td><code class="literal">U</code></td><td><code class="literal">U</code></td><td><code class="literal">\dD+</code></td></tr><tr><td><code class="literal">FUNCTION</code> или <code class="literal">PROCEDURE</code></td><td><code class="literal">X</code></td><td><code class="literal">X</code></td><td><code class="literal">\df+</code></td></tr><tr><td><code class="literal">FOREIGN DATA WRAPPER</code></td><td><code class="literal">U</code></td><td>нет</td><td><code class="literal">\dew+</code></td></tr><tr><td><code class="literal">FOREIGN SERVER</code></td><td><code class="literal">U</code></td><td>нет</td><td><code class="literal">\des+</code></td></tr><tr><td><code class="literal">LANGUAGE</code></td><td><code class="literal">U</code></td><td><code class="literal">U</code></td><td><code class="literal">\dL+</code></td></tr><tr><td><code class="literal">LARGE OBJECT</code></td><td><code class="literal">rw</code></td><td>нет</td><td><code class="literal">\dl+</code></td></tr><tr><td><code class="literal">PARAMETER</code></td><td><code class="literal">sA</code></td><td>нет</td><td><code class="literal">\dconfig+</code></td></tr><tr><td><code class="literal">SCHEMA</code></td><td><code class="literal">UC</code></td><td>нет</td><td><code class="literal">\dn+</code></td></tr><tr><td><code class="literal">SEQUENCE</code></td><td><code class="literal">rwU</code></td><td>нет</td><td><code class="literal">\dp</code></td></tr><tr><td><code class="literal">TABLE</code> (и объекты, подобные таблицам)</td><td><code class="literal">arwdDxt</code></td><td>нет</td><td><code class="literal">\dp</code></td></tr><tr><td>Столбец таблицы</td><td><code class="literal">arwx</code></td><td>нет</td><td><code class="literal">\dp</code></td></tr><tr><td><code class="literal">TABLESPACE</code></td><td><code class="literal">C</code></td><td>нет</td><td><code class="literal">\db+</code></td></tr><tr><td><code class="literal">TYPE</code></td><td><code class="literal">U</code></td><td><code class="literal">U</code></td><td><code class="literal">\dT+</code></td></tr></tbody></table></div></div><br class="table-break" /><p><a id="id-1.5.4.9.23.1" class="indexterm"></a> Права, назначенные для определённого объекта, выводятся в виде списка элементов <code class="type">aclitem</code>, где каждый <code class="type">aclitem</code> имеет такой формат: </p><pre class="synopsis">
<em class="replaceable"><code>правообладатель</code></em><code class="literal">=</code><em class="replaceable"><code>аббревиатура-права</code></em>[<span class="optional"><code class="literal">*</code></span>]...<code class="literal">/</code><em class="replaceable"><code>праводатель</code></em>
</pre><p> Каждый <code class="type">aclitem</code> содержит разрешения, которые были предоставлены субъекту определённым праводателем. Конкретные права представлены однобуквенными аббревиатурами из таблицы <a class="xref" href="ddl-priv.html#PRIVILEGE-ABBREVS-TABLE" title="Таблица 5.1. Сокращённые обозначения прав в ACL">Таблица 5.1</a> с добавлением <code class="literal">*</code>, если право было выдано с параметром передачи. Например, запись <code class="literal">calvin=r*w/hobbes</code> означает, что роль <code class="literal">calvin</code> имеет право <code class="literal">SELECT</code> (<code class="literal">r</code>) с возможностью передачи (<code class="literal">*</code>), а также непередаваемое право <code class="literal">UPDATE</code> (<code class="literal">w</code>), и оба эти права даны ему ролью <code class="literal">hobbes</code>. Если <code class="literal">calvin</code> имеет для этого объекта и другие права, предоставленные ему другим праводателем, они выводятся в отдельном элементе <code class="type">aclitem</code>. Пустое поле правообладателя в <code class="type">aclitem</code> соответствует роли <code class="literal">PUBLIC</code>.</p><p>Например, предположим, что пользователь <code class="literal">miriam</code> создаёт таблицы <code class="literal">mytable</code> и выполняет: </p><pre class="programlisting">GRANT SELECT ON mytable TO PUBLIC;
GRANT SELECT, UPDATE, INSERT ON mytable TO admin;
GRANT SELECT (col1), UPDATE (col1) ON mytable TO miriam_rw;</pre><p> Тогда команда <code class="literal">\dp</code> в <span class="application">psql</span> покажет: </p><pre class="programlisting">=&gt; \dp mytable
                                  Access privileges
 Schema |  Name   | Type  |   Access privileges   |   Column privileges   | Policies
--------+---------+-------+-----------------------+-----------------------+----------
 public | mytable | table | miriam=arwdDxt/miriam+| col1:                +|
        |         |       | =r/miriam            +|   miriam_rw=rw/miriam |
        |         |       | admin=arw/miriam      |                       |
(1 row)</pre><p>Если столбец <span class="quote">«<span class="quote">Права доступа</span>»</span> (Access privileges) для данного объекта пуст, это значит, что для объекта действуют стандартные права (то есть запись прав в соответствующем каталоге содержит NULL). Права по умолчанию всегда включают все права для владельца и могут также включать некоторые права для <code class="literal">PUBLIC</code> в зависимости от типа объекта, как разъяснялось выше. Первая команда <code class="command">GRANT</code> или <code class="command">REVOKE</code> для объекта приводит к созданию записи прав по умолчанию (например, <code class="literal">{miriam=arwdDxt/miriam}</code>), а затем изменяет эту запись в соответствии с заданным запросом. Подобным образом, строки, показанные в столбце <span class="quote">«<span class="quote">Права доступа к столбцам</span>»</span> (Column privileges), выводятся только для столбцов с нестандартными правами доступа. (Заметьте, что в данном контексте под <span class="quote">«<span class="quote">стандартными правами</span>»</span> всегда подразумевается встроенный набор прав, предопределённый для типа объекта. Если с объектом связан набор прав по умолчанию, полученный после изменения в результате <code class="command">ALTER DEFAULT PRIVILEGES</code>, изменённые права будут всегда выводиться явно, показывая эффект команды <code class="command">ALTER</code>.)</p><p>Заметьте, что право распоряжения правами, которое имеет владелец, не отмечается в выводимой сводке. Знаком <code class="literal">*</code> отмечаются только те права с правом передачи, которые были явно назначены кому-либо.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ddl-alter.html" title="5.6. Изменение таблиц">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ddl.html" title="Глава 5. Определение данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="ddl-rowsecurity.html" title="5.8. Политики защиты строк">След.</a></td></tr><tr><td width="40%" align="left" valign="top">5.6. Изменение таблиц </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 5.8. Политики защиты строк</td></tr></table></div></body></html>