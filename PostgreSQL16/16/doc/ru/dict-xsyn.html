<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>F.14. dict_xsyn — пример словаря текстового поиска синонимов</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="dict-int.html" title="F.13. dict_int — пример словаря текстового поиска для целых чисел" /><link rel="next" href="earthdistance.html" title="F.15. earthdistance — вычисление расстояний между точками на Земле" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">F.14. dict_xsyn — пример словаря текстового поиска синонимов</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="dict-int.html" title="F.13. dict_int — пример словаря текстового поиска для целых чисел">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><th width="60%" align="center">Приложение F. Дополнительно поставляемые модули и расширения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="earthdistance.html" title="F.15. earthdistance — вычисление расстояний между точками на Земле">След.</a></td></tr></table><hr /></div><div class="sect1" id="DICT-XSYN"><div class="titlepage"><div><div><h2 class="title" style="clear: both">F.14. dict_xsyn — пример словаря текстового поиска синонимов <a href="#DICT-XSYN" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="dict-xsyn.html#DICT-XSYN-CONFIG">F.14.1. Конфигурирование</a></span></dt><dt><span class="sect2"><a href="dict-xsyn.html#DICT-XSYN-USAGE">F.14.2. Использование</a></span></dt></dl></div><a id="id-1.11.7.24.2" class="indexterm"></a><p>Модуль <code class="filename">dict_xsyn</code> (Extended Synonym Dictionary, расширенный словарь синонимов) представляет собой пример дополнительного шаблона словаря для полнотекстового поиска. Этот словарь заменяет слова группами их синонимов, что позволяет находить слово по одному из его синонимов.</p><div class="sect2" id="DICT-XSYN-CONFIG"><div class="titlepage"><div><div><h3 class="title">F.14.1. Конфигурирование <a href="#DICT-XSYN-CONFIG" class="id_link">#</a></h3></div></div></div><p>Словарь <code class="literal">dict_xsyn</code> принимает следующие параметры:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Параметр <code class="literal">matchorig</code> определяет, будет ли словарь принимать изначальное слово. По умолчанию он включён (имеет значение <code class="literal">true</code>).</p></li><li class="listitem"><p>Параметр <code class="literal">matchsynonyms</code> определяет, будет ли словарь принимать синонимы. По умолчанию он отключён (имеет значение <code class="literal">false</code>).</p></li><li class="listitem"><p>Параметр <code class="literal">keeporig</code> определяет, будет ли исходное слово включаться в вывод словаря. По умолчанию он включён (имеет значение <code class="literal">true</code>).</p></li><li class="listitem"><p>Параметр <code class="literal">keepsynonyms</code> определяет, будут ли в вывод словаря включаться синонимы. По умолчанию он включён (имеет значение <code class="literal">true</code>).</p></li><li class="listitem"><p>Параметр <code class="literal">rules</code> задаёт базовое имя файла со списком синонимов. Этот файл должен находиться в каталоге <code class="filename">$SHAREDIR/tsearch_data/</code> (где под <code class="literal">$SHAREDIR</code> понимается каталог с общими данными инсталляции <span class="productname">PostgreSQL</span>). Имя файла должно заканчиваться расширением <code class="literal">.rules</code> (которое не нужно указывать в параметре <code class="literal">rules</code>).</p></li></ul></div><p>Файл правил имеет следующий формат:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Каждая строка представляет группу синонимов для одного слова, которое задаётся первым в этой строке. Символы разделяются пробельными символами, так что строка выглядит так: </p><pre class="programlisting">word syn1 syn2 syn3</pre></li><li class="listitem"><p>Символ решётки (<code class="literal">#</code>) обозначает начало комментария. Он может находиться в любом месте строки. Следующая за ним часть строки игнорируется.</p></li></ul></div><p>Пример словаря можно найти в файле <code class="filename">xsyn_sample.rules</code>, устанавливаемом в <code class="filename">$SHAREDIR/tsearch_data/</code>.</p></div><div class="sect2" id="DICT-XSYN-USAGE"><div class="titlepage"><div><div><h3 class="title">F.14.2. Использование <a href="#DICT-XSYN-USAGE" class="id_link">#</a></h3></div></div></div><p>При установке расширения <code class="literal">dict_xsyn</code> в базе создаётся шаблон текстового поиска <code class="literal">xsyn_template</code> и словарь <code class="literal">xsyn</code> на его базе, с параметрами по умолчанию. Вы можете изменить параметры словаря, например так: </p><pre class="programlisting">mydb# ALTER TEXT SEARCH DICTIONARY xsyn (RULES='my_rules', KEEPORIG=false);
ALTER TEXT SEARCH DICTIONARY</pre><p> или создать новые словари на базе этого шаблона.</p><p>Протестировать этот словарь можно так: </p><pre class="programlisting">mydb=# SELECT ts_lexize('xsyn', 'word');
      ts_lexize
-----------------------
 {syn1,syn2,syn3}

mydb# ALTER TEXT SEARCH DICTIONARY xsyn (RULES='my_rules', KEEPORIG=true);
ALTER TEXT SEARCH DICTIONARY

mydb=# SELECT ts_lexize('xsyn', 'word');
      ts_lexize
-----------------------
 {word,syn1,syn2,syn3}

mydb# ALTER TEXT SEARCH DICTIONARY xsyn (RULES='my_rules', KEEPORIG=false, MATCHSYNONYMS=true);
ALTER TEXT SEARCH DICTIONARY

mydb=# SELECT ts_lexize('xsyn', 'syn1');
      ts_lexize
-----------------------
 {syn1,syn2,syn3}

mydb# ALTER TEXT SEARCH DICTIONARY xsyn (RULES='my_rules', KEEPORIG=true, MATCHORIG=false, KEEPSYNONYMS=false);
ALTER TEXT SEARCH DICTIONARY

mydb=# SELECT ts_lexize('xsyn', 'syn1');
      ts_lexize
-----------------------
 {word}</pre><p> Но для практического применения его нужно включить в конфигурацию текстового поиска, как описано в <a class="xref" href="textsearch.html" title="Глава 12. Полнотекстовый поиск">Главе 12</a>. Это может выглядеть примерно так: </p><pre class="programlisting">ALTER TEXT SEARCH CONFIGURATION english
    ALTER MAPPING FOR word, asciiword WITH xsyn, english_stem;</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dict-int.html" title="F.13. dict_int — пример словаря текстового поиска для целых чисел">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="earthdistance.html" title="F.15. earthdistance — вычисление расстояний между точками на Земле">След.</a></td></tr><tr><td width="40%" align="left" valign="top">F.13. dict_int — пример словаря текстового поиска для целых чисел </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> F.15. earthdistance — вычисление расстояний между точками на Земле</td></tr></table></div></body></html>