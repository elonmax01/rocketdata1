<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>73.4. Карта видимости</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="storage-fsm.html" title="73.3. Карта свободного пространства" /><link rel="next" href="storage-init.html" title="73.5. Слой инициализации" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">73.4. Карта видимости</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="storage-fsm.html" title="73.3. Карта свободного пространства">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="storage.html" title="Глава 73. Физическое хранение базы данных">Наверх</a></td><th width="60%" align="center">Глава 73. Физическое хранение базы данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="storage-init.html" title="73.5. Слой инициализации">След.</a></td></tr></table><hr /></div><div class="sect1" id="STORAGE-VM"><div class="titlepage"><div><div><h2 class="title" style="clear: both">73.4. Карта видимости <a href="#STORAGE-VM" class="id_link">#</a></h2></div></div></div><a id="id-1.10.24.6.2" class="indexterm"></a><a id="id-1.10.24.6.3" class="indexterm"></a><p>Каждое отношение таблицы имеет карту видимости (Visibility Map, VM) для отслеживания страниц, содержащих только кортежи, которые видны всем активным транзакциям; в ней также отслеживается, какие страницы содержат только замороженные кортежи. Она хранится вместе с данными главного отношения в отдельном файле, имя которого образуется номером файлового узла отношения с суффиксом <code class="literal">_vm</code>. Например, если файловый узел отношения — 12345, VM хранится в файле <code class="filename">12345_vm</code>, в том же самом каталоге, что и основной файл отношения. Заметьте, что индексы не имеют VM.</p><p>Карта видимости хранит по два бита на страницу таблицы. Первый бит, если он установлен, показывает, что вся страница видна или, другими словами, не содержит кортежей, которые необходимо очистить. Эта информация может также использоваться при <a class="link" href="indexes-index-only-scans.html" title="11.9. Сканирование только индекса и покрывающие индексы"><em class="firstterm">сканировании только индекса</em></a> для поиска ответов только в данных индекса. Установленный второй бит показывает, что все кортежи на этой странице заморожены. Это означает, что процесс очистки для предотвращения зацикливания не должен больше посещать эту страницу.</p><p>Карта может отражать реальные данные с запаздыванием в том смысле, что мы уверены, что в случаях, когда установлен бит, известно, что условие верно, но если бит не установлен, оно может быть верным или неверным. Биты карты видимости устанавливаются только при очистке, а сбрасываются при любых операциях, изменяющих данные на странице.</p><p>Для изучения информации, хранящейся в карте видимости, можно воспользоваться модулем <a class="xref" href="pgvisibility.html" title="F.36. pg_visibility — информация из карты видимости и вспомогательные функции">pg_visibility</a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="storage-fsm.html" title="73.3. Карта свободного пространства">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="storage.html" title="Глава 73. Физическое хранение базы данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="storage-init.html" title="73.5. Слой инициализации">След.</a></td></tr><tr><td width="40%" align="left" valign="top">73.3. Карта свободного пространства </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 73.5. Слой инициализации</td></tr></table></div></body></html>