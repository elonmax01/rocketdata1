<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.39. pg_proc</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="catalog-pg-policy.html" title="53.38. pg_policy" /><link rel="next" href="catalog-pg-publication.html" title="53.40. pg_publication" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.39. <code class="structname">pg_proc</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="catalog-pg-policy.html" title="53.38. pg_policy">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><th width="60%" align="center">Глава 53. Системные каталоги</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="catalog-pg-publication.html" title="53.40. pg_publication">След.</a></td></tr></table><hr /></div><div class="sect1" id="CATALOG-PG-PROC"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.39. <code class="structname">pg_proc</code> <a href="#CATALOG-PG-PROC" class="id_link">#</a></h2></div></div></div><a id="id-1.10.4.41.2" class="indexterm"></a><p>В каталоге <code class="structname">pg_proc</code> хранится информация об обычных функциях, процедурах, агрегатных и оконных функциях (в совокупности также называемых подпрограммами). За дополнительными сведениями обратитесь к описанию <a class="xref" href="sql-createfunction.html" title="CREATE FUNCTION"><span class="refentrytitle">CREATE FUNCTION</span></a>, <a class="xref" href="sql-createprocedure.html" title="CREATE PROCEDURE"><span class="refentrytitle">CREATE PROCEDURE</span></a> и <a class="xref" href="xfunc.html" title="38.3. Пользовательские функции">Разделу 38.3</a>.</p><p>Если <code class="structfield">prokind</code> указывает, что данная запись описывает агрегатную функцию, в <a class="link" href="catalog-pg-aggregate.html" title="53.2. pg_aggregate"><code class="structfield">pg_aggregate</code></a> должна быть соответствующая строка.</p><div class="table" id="id-1.10.4.41.5"><p class="title"><strong>Таблица 53.39. Столбцы <code class="structname">pg_proc</code></strong></p><div class="table-contents"><table class="table" summary="Столбцы pg_proc" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">Тип столбца</p>
      <p>Описание</p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">oid</code> <code class="type">oid</code>
      </p>
      <p>Идентификатор строки</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proname</code> <code class="type">name</code>
      </p>
      <p>Имя функции</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">pronamespace</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-namespace.html" title="53.32. pg_namespace"><code class="structname">pg_namespace</code></a>.<code class="structfield">oid</code>)</p>
      <p>OID пространства имён, содержащего эту функцию</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">proowner</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-authid.html" title="53.8. pg_authid"><code class="structname">pg_authid</code></a>.<code class="structfield">oid</code>)</p>
      <p>Владелец функции</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">prolang</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-language.html" title="53.29. pg_language"><code class="structname">pg_language</code></a>.<code class="structfield">oid</code>)</p>
      <p>Язык реализации или интерфейс вызова для этой функции</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">procost</code> <code class="type">float4</code>
      </p>
      <p>Примерная стоимость выполнения (в единицах <a class="xref" href="runtime-config-query.html#GUC-CPU-OPERATOR-COST">cpu_operator_cost</a>); если установлен признак <code class="structfield">proretset</code>, это стоимость выдачи одной строки</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">prorows</code> <code class="type">float4</code>
      </p>
      <p>Примерное число возвращаемых строк (ноль, если признак <code class="structfield">proretset</code> не установлен)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">provariadic</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Тип данных элементов переменного массива параметров, либо 0, если функция не принимает переменное число параметров</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">prosupport</code> <code class="type">regproc</code> (ссылается на <a class="link" href="catalog-pg-proc.html" title="53.39. pg_proc"><code class="structname">pg_proc</code></a>.<code class="structfield">oid</code>)</p>
      <p>Вспомогательная функция планировщика для данной функции (см. <a class="xref" href="xfunc-optimization.html" title="38.11. Информация для оптимизации функций">Раздел 38.11</a>) или ноль, если её нет</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">prokind</code> <code class="type">char</code>
      </p>
      <p><code class="literal">f</code> — обычная функция (Function), <code class="literal">p</code> — процедура (Procedure), <code class="literal">a</code> — агрегатная функция (Aggregate function) или <code class="literal">w</code> — оконная функция (Window function)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">prosecdef</code> <code class="type">bool</code>
      </p>
      <p>Функция определяет контекст безопасности (т. е. это функция <span class="quote">«<span class="quote">setuid</span>»</span>)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proleakproof</code> <code class="type">bool</code>
      </p>
      <p>Функция не имеет побочных эффектов. Никакая информация о её аргументах не выдаётся, кроме как через возвращаемое значение. Любая функция, которая может выдать ошибку, в зависимости от значений аргументов, не является герметичной.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proisstrict</code> <code class="type">bool</code>
      </p>
      <p>Функция возвращает NULL, если любой из аргументов при вызове NULL. В этом случае функция фактически не будет вызываться вовсе. Функции, не являющиеся <span class="quote">«<span class="quote">строгими</span>»</span>, должны быть готовы принять значения NULL.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proretset</code> <code class="type">bool</code>
      </p>
      <p>Функция возвращает множество (т. е. множество значений указанного типа данных)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">provolatile</code> <code class="type">char</code>
      </p>
      <p>Свойство <code class="structfield">provolatile</code> говорит, зависит ли результат функции только от её входных аргументов, либо на него влияют внешние факторы. Буквой <code class="literal">i</code> обозначаются постоянные функции (<span class="quote">«<span class="quote">immutable</span>»</span>), которые всегда возвращают один результат для одних и тех же аргументов. Буквой <code class="literal">s</code> обозначаются стабильные функции (<span class="quote">«<span class="quote">stable</span>»</span>), результаты которых (для одних и тех же аргументов) не меняются в ходе одного сканирования. Буквой <code class="literal">v</code> обозначаются изменчивые функции (<span class="quote">«<span class="quote">volatile</span>»</span>), результаты которых могут меняться в любое время. (Так же <code class="literal">v</code> следует выбирать для функций с побочными эффектами, чтобы система не оптимизировала их вызовы.)</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proparallel</code> <code class="type">char</code>
      </p>
      <p>Свойство <code class="structfield">proparallel</code> говорит, может ли эта функция безопасно выполняться в параллельном режиме. Символом <code class="literal">s</code> в нём обозначаются функции, которые могут выполняться в параллельном режиме без ограничений. Символом <code class="literal">r</code> обозначаются функции, которые могут выполняться в параллельном режиме, но только в ведущем процессе группы; в параллельных рабочих процессах вызывать их нельзя. Символом <code class="literal">u</code> отмечаются функции небезопасные в параллельном режиме; присутствие такой функции влечёт выбор последовательного плана выполнения запроса.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">pronargs</code> <code class="type">int2</code>
      </p>
      <p>Число входных аргументов</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">pronargdefaults</code> <code class="type">int2</code>
      </p>
      <p>Число аргументов, для которых определены значения по умолчанию</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">prorettype</code> <code class="type">oid</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Тип данных возвращаемого значения</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">proargtypes</code> <code class="type">oidvector</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Массив типов аргументов функции. В нём учитываются только входные аргументы функции (включая аргументы <code class="literal">INOUT</code> и <code class="literal">VARIADIC</code>), так что он представляет сигнатуру вызова функции.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">proallargtypes</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Массив типов аргументов функции. В нём учитываются все аргументы (включая аргументы <code class="literal">OUT</code> и <code class="literal">INOUT</code>); однако если все аргументы только входные (<code class="literal">IN</code>), это поле будет содержать NULL. Заметьте, что индексы в нём начинаются с 1, тогда как в <code class="structfield">proargtypes</code> по историческим причинами они начинаются с 0.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proargmodes</code> <code class="type">char[]</code>
      </p>
      <p>Массив режимов аргументов функций, закодированных как <code class="literal">i</code> для входных аргументов (<code class="literal">IN</code>), <code class="literal">o</code> для выходных аргументов (<code class="literal">OUT</code>), <code class="literal">b</code> для аргументов входных и выходных одновременно (<code class="literal">INOUT</code>), <code class="literal">v</code> для переменных аргументов (<code class="literal">VARIADIC</code>) и <code class="literal">t</code> для табличных аргументов (<code class="literal">TABLE</code>). Если все аргументы являются аргументами <code class="literal">IN</code>, это поле может содержать NULL. Заметьте, что позиции в этом массиве соответствуют позициям в <code class="structfield">proallargtypes</code>, а не в <code class="structfield">proargtypes</code>.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proargnames</code> <code class="type">text[]</code>
      </p>
      <p>Массив имён аргументов функции. Для аргументов без имени в этом массиве задаются пустые строки. Если все аргументы функции безымянные, это поле может содержать NULL. Заметьте, что позиции в этом массиве соответствуют позициям в <code class="structfield">proallargtypes</code>, а не в <code class="structfield">proargtypes</code>.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proargdefaults</code> <code class="type">pg_node_tree</code>
      </p>
      <p>Деревья выражений (в представлении <code class="function">nodeToString()</code>) для значений аргументов по умолчанию. Это список, содержащий <code class="structfield">pronargdefaults</code> элементов, соответствующих последним <em class="replaceable"><code>N</code></em> <span class="emphasis"><em>входным</em></span> аргументам (т. е., последним <em class="replaceable"><code>N</code></em> позициям в <code class="structfield">proargtypes</code>). Если значение по умолчанию не имеет никакой аргумент, это поле может содержать NULL.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition"><code class="structfield">protrftypes</code> <code class="type">oid[]</code> (ссылается на <a class="link" href="catalog-pg-type.html" title="53.64. pg_type"><code class="structname">pg_type</code></a>.<code class="structfield">oid</code>)</p>
      <p>Массив типов аргументов/результатов, к которым должны применяться трансформации (заданные в предложении <code class="literal">TRANSFORM</code> объявления функции), либо NULL, если таковых нет.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">prosrc</code> <code class="type">text</code>
      </p>
      <p>Это значение говорит обработчику функции, как вызывать данную функцию. Это может быть собственно исходный код функции для интерпретируемых языков, объектный символ, имя файла или что-то другое, в зависимости от языка реализации/соглашения о вызовах.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">probin</code> <code class="type">text</code>
      </p>
      <p>Дополнительная информация о том, как вызывать функцию. Интерпретация этого значения так же зависит от языка.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">prosqlbody</code> <code class="type">pg_node_tree</code>
      </p>
      <p>Предварительно разобранное тело SQL-функции. Используется для функций на языке SQL, когда тело функции оформлено по стандарту SQL, а не в виде строки. В других случаях — NULL.</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proconfig</code> <code class="type">text[]</code>
      </p>
      <p>Локальные присваивания конфигурационных переменных времени выполнения, действующие в рамках функции</p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">proacl</code> <code class="type">aclitem[]</code>
      </p>
      <p>Права доступа; за подробностями обратитесь к <a class="xref" href="ddl-priv.html" title="5.7. Права">Разделу 5.7</a>.</p></td></tr></tbody></table></div></div><br class="table-break" /><p>Для скомпилированных функций, как встроенных, так и динамически загружаемых, поле <code class="structfield">prosrc</code> содержит имя функции на языке C (объектный символ). Для функций на языке SQL: если функция определена в виде строки, поле <code class="structfield">prosrc</code> содержит исходный код функции; если же функция оформлена по стандарту SQL, поле <code class="structfield">prosrc</code> не используется (обычно это пустая строка), а поле <code class="structfield">prosqlbody</code> содержит предварительно разобранное определение функции. Для всех других известных сегодня языков поле <code class="structfield">prosrc</code> содержит исходный код функции. Поле <code class="structfield">probin</code> используется только для динамически загружаемых функций на C, для которых оно задаёт имя разделяемой библиотеки, содержащей эти функции.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="catalog-pg-policy.html" title="53.38. pg_policy">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="catalogs.html" title="Глава 53. Системные каталоги">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="catalog-pg-publication.html" title="53.40. pg_publication">След.</a></td></tr><tr><td width="40%" align="left" valign="top">53.38. <code class="structname">pg_policy</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 53.40. <code class="structname">pg_publication</code></td></tr></table></div></body></html>