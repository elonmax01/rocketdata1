<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.13. Совместимость с разными версиями и платформами</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="runtime-config-locks.html" title="20.12. Управление блокировками" /><link rel="next" href="runtime-config-error-handling.html" title="20.14. Обработка ошибок" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">20.13. Совместимость с разными версиями и платформами</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-locks.html" title="20.12. Управление блокировками">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><th width="60%" align="center">Глава 20. Настройка сервера</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="runtime-config-error-handling.html" title="20.14. Обработка ошибок">След.</a></td></tr></table><hr /></div><div class="sect1" id="RUNTIME-CONFIG-COMPATIBLE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.13. Совместимость с разными версиями и платформами <a href="#RUNTIME-CONFIG-COMPATIBLE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="runtime-config-compatible.html#RUNTIME-CONFIG-COMPATIBLE-VERSION">20.13.1. Предыдущие версии PostgreSQL</a></span></dt><dt><span class="sect2"><a href="runtime-config-compatible.html#RUNTIME-CONFIG-COMPATIBLE-CLIENTS">20.13.2. Совместимость с разными платформами и клиентами</a></span></dt></dl></div><div class="sect2" id="RUNTIME-CONFIG-COMPATIBLE-VERSION"><div class="titlepage"><div><div><h3 class="title">20.13.1. Предыдущие версии PostgreSQL <a href="#RUNTIME-CONFIG-COMPATIBLE-VERSION" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-ARRAY-NULLS"><span class="term"><code class="varname">array_nulls</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.1.1.3" class="indexterm"></a></span> <a href="#GUC-ARRAY-NULLS" class="id_link">#</a></dt><dd><p>Этот параметр определяет, будет ли при разборе вводимого массива распознаваться строка <code class="literal">NULL</code> без кавычек как элемент массива, равный NULL. Значение по умолчанию, <code class="literal">on</code>, позволяет задавать NULL в качестве элементов вводимого массива. Однако до версии 8.2 <span class="productname">PostgreSQL</span> не поддерживал ввод элементов NULL в массивах, а воспринимал <code class="literal">NULL</code> как обычный элемент массива со строковым значением <span class="quote">«<span class="quote">NULL</span>»</span>. Для обратной совместимости с приложениями, зависящими от старого поведения, эту переменную можно отключить (присвоив ей <code class="literal">off</code>).</p><p>Заметьте, что массивы, содержащие NULL, можно создать, даже когда эта переменная имеет значение <code class="literal">off</code>.</p></dd><dt id="GUC-BACKSLASH-QUOTE"><span class="term"><code class="varname">backslash_quote</code> (<code class="type">enum</code>) <a id="id-1.6.7.16.2.2.2.1.3" class="indexterm"></a> <a id="id-1.6.7.16.2.2.2.1.4" class="indexterm"></a></span> <a href="#GUC-BACKSLASH-QUOTE" class="id_link">#</a></dt><dd><p>Этот параметр определяет, можно ли будет представить знак апострофа в строковой константе в виде <code class="literal">\'</code>. В стандарте SQL определён другой, предпочитаемый вариант передачи апострофа, дублированием (<code class="literal">''</code>), но <span class="productname">PostgreSQL</span> исторически также принимал вариант <code class="literal">\'</code>. Однако применение варианта <code class="literal">\'</code> сопряжено с угрозами безопасности, так как в некоторых клиентских кодировках существуют многобайтные символы, последний байт которых численно равен ASCII-коду <code class="literal">\</code>. Если код на стороне клиента выполнит экранирование некорректно, это может открыть возможности для SQL-инъекции. Предотвратить этот риск можно, запретив серверу принимать запросы, в которых апостроф экранируется обратной косой. Допустимые значения параметра <code class="varname">backslash_quote</code>: <code class="literal">on</code> (принимать <code class="literal">\'</code> всегда), <code class="literal">off</code> (не принимать никогда) и <code class="literal">safe_encoding</code> (принимать, только если клиентская кодировка не допускает присутствия ASCII-кода <code class="literal">\</code> в многобайтных символах). Значение по умолчанию — <code class="literal">safe_encoding</code>.</p><p>Заметьте, что в строковой константе, записанной согласно стандарту, знаки <code class="literal">\</code> обозначают просто <code class="literal">\</code>. Этот параметр влияет только на восприятие строк, не соответствующих стандарту, в том числе с синтаксисом спецпоследовательностей (<code class="literal">E'...'</code>).</p></dd><dt id="GUC-ESCAPE-STRING-WARNING"><span class="term"><code class="varname">escape_string_warning</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.3.1.3" class="indexterm"></a> <a id="id-1.6.7.16.2.2.3.1.4" class="indexterm"></a></span> <a href="#GUC-ESCAPE-STRING-WARNING" class="id_link">#</a></dt><dd><p>Когда этот параметр включён, сервер выдаёт предупреждение, если обратная косая черта (<code class="literal">\</code>) встречается в обычной строковой константе (с синтаксисом <code class="literal">'...'</code>) и параметр <code class="varname">standard_conforming_strings</code> отключён. Значение по умолчанию — <code class="literal">on</code> (вкл.).</p><p>Приложения, которые предпочитают использовать обратную косую в виде спецсимвола, должны перейти к применению синтаксиса спецстрок (<code class="literal">E'...'</code>), так как по умолчанию теперь в обычных строках обратная косая воспринимается как обычный символ, в соответствии со стандартом SQL. Включение данного параметра помогает найти код, нуждающийся в модификации.</p></dd><dt id="GUC-LO-COMPAT-PRIVILEGES"><span class="term"><code class="varname">lo_compat_privileges</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.4.1.3" class="indexterm"></a></span> <a href="#GUC-LO-COMPAT-PRIVILEGES" class="id_link">#</a></dt><dd><p>В <span class="productname">PostgreSQL</span> до версии 9.0 для больших объектов не назначались права доступа, и поэтому они были всегда доступны на чтение и запись для всех пользователей. Если установить для этого параметра значение <code class="literal">on</code>, существующие теперь проверки прав отключаются для совместимости с предыдущими версиями. Значение по умолчанию — <code class="literal">off</code>. Изменить этот параметр могут только суперпользователи и пользователи с соответствующим правом <code class="literal">SET</code>.</p><p>Установка данного параметра не приводит к отключению всех проверок безопасности, связанных с большими объектами — затрагиваются только те проверки, которые изменились в <span class="productname">PostgreSQL</span> 9.0.</p></dd><dt id="GUC-QUOTE-ALL-IDENTIFIERS"><span class="term"><code class="varname">quote_all_identifiers</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.5.1.3" class="indexterm"></a></span> <a href="#GUC-QUOTE-ALL-IDENTIFIERS" class="id_link">#</a></dt><dd><p>Принудительно заключать в кавычки все идентификаторы, даже если это не ключевые слова (сегодня), при получении SQL из базы данных. Это касается вывода <code class="command">EXPLAIN</code>, а также результатов функций типа <code class="function">pg_get_viewdef</code>. См. также описание аргумента <code class="option">--quote-all-identifiers</code> команд <a class="xref" href="app-pgdump.html" title="pg_dump"><span class="refentrytitle"><span class="application">pg_dump</span></span></a> и <a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>.</p></dd><dt id="GUC-STANDARD-CONFORMING-STRINGS"><span class="term"><code class="varname">standard_conforming_strings</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.6.1.3" class="indexterm"></a> <a id="id-1.6.7.16.2.2.6.1.4" class="indexterm"></a></span> <a href="#GUC-STANDARD-CONFORMING-STRINGS" class="id_link">#</a></dt><dd><p>Этот параметр определяет, будет ли обратная косая черта в обычных строковых константах (<code class="literal">'...'</code>) восприниматься буквально, как того требует стандарт SQL. Начиная с версии <span class="productname">PostgreSQL</span> 9.1, он имеет значение <code class="literal">on</code> (в предыдущих версиях значение по умолчанию было <code class="literal">off</code>). Приложения могут выяснить, как обрабатываются строковые константы, проверив этот параметр. Наличие этого параметра может также быть признаком того, что поддерживается синтаксис спецпоследовательностей (<code class="literal">E'...'</code>). Этот синтаксис (<a class="xref" href="sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE" title="4.1.2.2. Строковые константы со спецпоследовательностями в стиле C">Подраздел 4.1.2.2</a>) следует использовать, если приложению нужно, чтобы обратная косая воспринималась как спецсимвол.</p></dd><dt id="GUC-SYNCHRONIZE-SEQSCANS"><span class="term"><code class="varname">synchronize_seqscans</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.2.2.7.1.3" class="indexterm"></a></span> <a href="#GUC-SYNCHRONIZE-SEQSCANS" class="id_link">#</a></dt><dd><p>Этот параметр включает синхронизацию обращений при последовательном сканировании больших таблиц, чтобы эти операции читали один блок примерно в одно и то же время, и, таким образом, нагрузка разделялась между ними. Когда он включён, сканирование может начаться в середине таблицы, чтобы синхронизироваться со сканированием, которое уже выполняется. По достижении конца таблицы сканирование <span class="quote">«<span class="quote">заворачивается</span>»</span> к началу и завершает обработку пропущенных строк. Это может привести к непредсказуемому изменению порядка строк, возвращаемых запросами, в которых отсутствует предложение <code class="literal">ORDER BY</code>. Когда этот параметр выключен (имеет значение <code class="literal">off</code>), реализуется поведение, принятое до версии 8.3, когда последовательное сканирование всегда начиналось с начала таблицы. Значение по умолчанию — <code class="literal">on</code>.</p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-COMPATIBLE-CLIENTS"><div class="titlepage"><div><div><h3 class="title">20.13.2. Совместимость с разными платформами и клиентами <a href="#RUNTIME-CONFIG-COMPATIBLE-CLIENTS" class="id_link">#</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-TRANSFORM-NULL-EQUALS"><span class="term"><code class="varname">transform_null_equals</code> (<code class="type">boolean</code>) <a id="id-1.6.7.16.3.2.1.1.3" class="indexterm"></a> <a id="id-1.6.7.16.3.2.1.1.4" class="indexterm"></a></span> <a href="#GUC-TRANSFORM-NULL-EQUALS" class="id_link">#</a></dt><dd><p>Когда этот параметр включён, проверки вида <code class="literal"><em class="replaceable"><code>выражение</code></em> = NULL</code> (или <code class="literal">NULL = <em class="replaceable"><code>выражение</code></em></code>) воспринимаются как <code class="literal"><em class="replaceable"><code>выражение</code></em> IS NULL</code>, то есть они истинны, если <em class="replaceable"><code>выражение</code></em> даёт значение NULL, и ложны в противном случае. Согласно спецификации SQL, сравнение <code class="literal"><em class="replaceable"><code>выражение</code></em> = NULL</code> должно всегда возвращать NULL (неизвестное значение). Поэтому по умолчанию этот параметр выключен (равен <code class="literal">off</code>).</p><p>Однако формы фильтров в <span class="productname">Microsoft Access</span> генерируют запросы, в которых проверка на значение NULL записывается как <code class="literal"><em class="replaceable"><code>выражение</code></em> = NULL</code>, так что если вы используете этот интерфейс для обращения к базе данных, имеет смысл включить данный параметр. Так как проверки вида <code class="literal"><em class="replaceable"><code>выражение</code></em> = NULL</code> всегда возвращают значение NULL (следуя правилам стандарта SQL), они не очень полезны и не должны встречаться в обычных приложениях, так что на практике от включения этого параметра не будет большого вреда. Однако начинающие пользователи часто путаются в семантике выражений со значениями NULL, поэтому по умолчанию этот параметр выключен.</p><p>Заметьте, что этот параметр влияет только на точную форму сравнения <code class="literal">= NULL</code>, но не на другие операторы сравнения или выражения, результат которых может быть равнозначен сравнению с применением оператора равенства (например, конструкцию <code class="literal">IN</code>). Поэтому данный параметр не может быть универсальной защитой от плохих приёмов программирования.</p><p>За сопутствующей информацией обратитесь к <a class="xref" href="functions-comparison.html" title="9.2. Функции и операторы сравнения">Разделу 9.2</a>.</p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-locks.html" title="20.12. Управление блокировками">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html" title="Глава 20. Настройка сервера">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-error-handling.html" title="20.14. Обработка ошибок">След.</a></td></tr><tr><td width="40%" align="left" valign="top">20.12. Управление блокировками </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> 20.14. Обработка ошибок</td></tr></table></div></body></html>