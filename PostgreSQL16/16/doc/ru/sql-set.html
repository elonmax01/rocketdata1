<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SET</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="sql-selectinto.html" title="SELECT INTO" /><link rel="next" href="sql-set-constraints.html" title="SET CONSTRAINTS" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">SET</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-selectinto.html" title="SELECT INTO">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><th width="60%" align="center">Команды SQL</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-set-constraints.html" title="SET CONSTRAINTS">След.</a></td></tr></table><hr /></div><div class="refentry" id="SQL-SET"><div class="titlepage"></div><a id="id-1.9.3.174.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">SET</span></h2><p>SET — изменить параметр времени выполнения</p></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><pre class="synopsis">SET [ SESSION | LOCAL ] <em class="replaceable"><code>параметр_конфигурации</code></em> { TO | = } { <em class="replaceable"><code>значение</code></em> | '<em class="replaceable"><code>значение</code></em>' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { <em class="replaceable"><code>значение</code></em> | '<em class="replaceable"><code>значение</code></em>' | LOCAL | DEFAULT }</pre></div><div class="refsect1" id="id-1.9.3.174.5"><h2>Описание</h2><p>Команда <code class="command">SET</code> изменяет конфигурационные параметры времени выполнения. С помощью <code class="command">SET</code> можно «на лету» изменить многие из параметров, перечисленных в <a class="xref" href="runtime-config.html" title="Глава 20. Настройка сервера">Главе 20</a>. (Но некоторые параметры могут изменять только суперпользователи и пользователя, имеющие право <code class="literal">SET</code> для них, а другие нельзя изменять после запуска сервера или сеанса.) <code class="command">SET</code> влияет на значение параметра только в рамках текущего сеанса.</p><p>Если команда <code class="command">SET</code> (или равнозначная <code class="command">SET SESSION</code>) выполняется внутри транзакции, которая затем прерывается, эффект команды <code class="command">SET</code> пропадает, когда транзакция откатывается. Если же окружающая транзакция фиксируется, этот эффект сохраняется до конца сеанса, если его не переопределит другая команда <code class="command">SET</code>.</p><p>Действие <code class="command">SET LOCAL</code> продолжается только до конца текущей транзакции, независимо от того, фиксируется она или нет. Особый случай представляет использование <code class="command">SET</code> с последующей <code class="command">SET LOCAL</code> в одной транзакции: значение, заданное <code class="command">SET LOCAL</code>, будет сохраняться до конца транзакции, но после этого (если транзакция фиксируется) восстановится значение, заданное командой <code class="command">SET</code>.</p><p>Действия <code class="command">SET</code> или <code class="command">SET LOCAL</code> также отменяются при откате к точке сохранения, установленной до выполнения этих команд.</p><p>Если <code class="command">SET LOCAL</code> применяется в функции, параметр <code class="literal">SET</code> для которой устанавливает значение той же переменной (см. <a class="xref" href="sql-createfunction.html" title="CREATE FUNCTION"><span class="refentrytitle">CREATE FUNCTION</span></a>), действие команды <code class="command">SET LOCAL</code> прекращается при выходе из функции; то есть, в любом случае восстанавливается значение, существовавшее при вызове функции. Это позволяет использовать <code class="command">SET LOCAL</code> для динамических и неоднократных изменений параметра в рамках функции, и при этом иметь удобную возможность использовать параметр <code class="literal">SET</code> для сохранения и восстановления значения, полученного извне. Однако обычная команда <code class="command">SET</code> переопределяет любой параметр <code class="literal">SET</code> окружающей функции; её действие сохраняется, если не происходит откат транзакции.</p><div class="note"><h3 class="title">Примечание</h3><p>В <span class="productname">PostgreSQL</span> с версии 8.0 до 8.2 действие <code class="command">SET LOCAL</code> могло отменяться при освобождении ранее установленной точки сохранения или при успешном выходе из блока исключения <span class="application">PL/pgSQL</span>. Затем это поведение было признано неинтуитивным, и было изменено.</p></div></div><div class="refsect1" id="id-1.9.3.174.6"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">SESSION</code></span></dt><dd><p>Указывает, что команда действует в рамках текущего сеанса. (Это поведение по умолчанию, если не указано ни <code class="literal">SESSION</code>, ни <code class="literal">LOCAL</code>.)</p></dd><dt><span class="term"><code class="literal">LOCAL</code></span></dt><dd><p>Указывает, что команда действует только в рамках текущей транзакции. После <code class="command">COMMIT</code> или <code class="command">ROLLBACK</code> в силу вновь вступает значение, определённое на уровне сеанса. При выполнении такой команды вне блока транзакции выдаётся предупреждение и больше ничего не происходит.</p></dd><dt><span class="term"><em class="replaceable"><code>параметр_конфигурации</code></em></span></dt><dd><p>Имя устанавливаемого параметра времени выполнения. Доступные параметры описаны в <a class="xref" href="runtime-config.html" title="Глава 20. Настройка сервера">Главе 20</a> и ниже.</p></dd><dt><span class="term"><em class="replaceable"><code>значение</code></em></span></dt><dd><p>Новое значение параметра. Параметры могут задаваться в виде строковых констант, идентификаторов, чисел или списков перечисленных типов через запятую, в зависимости от конкретного параметра. Указание <code class="literal">DEFAULT</code> в данном контексте позволяет сбросить параметр к значению по умолчанию (то есть, к тому значению, которое он имел бы, если в текущем сеансе не выполнялись бы команды <code class="command">SET</code>).</p></dd></dl></div><p>Помимо конфигурационных параметров, описанных в <a class="xref" href="runtime-config.html" title="Глава 20. Настройка сервера">Главе 20</a>, есть ещё несколько параметров, которые можно изменить только командой <code class="command">SET</code> или которые имеют особый синтаксис: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">SCHEMA</code></span></dt><dd><p><code class="literal">SET SCHEMA '<em class="replaceable"><code>значение</code></em>'</code> — альтернативное написание команды <code class="literal">SET search_path TO <em class="replaceable"><code>значение</code></em></code>. Такой синтаксис позволяет указать только одну схему.</p></dd><dt><span class="term"><code class="literal">NAMES</code></span></dt><dd><p><code class="literal">SET NAMES <em class="replaceable"><code>значение</code></em></code> — альтернативное написание команды <code class="literal">SET client_encoding TO <em class="replaceable"><code>значение</code></em></code>.</p></dd><dt><span class="term"><code class="literal">SEED</code></span></dt><dd><p>Устанавливает внутреннее начальное значение для генератора случайных чисел (функции <code class="function">random</code>). В качестве значения допускаются числа с плавающей точкой от -1 до 1 включительно.</p><p>Это начальное значение также можно установить, вызвав функцию <code class="function">setseed</code>: </p><pre class="programlisting">SELECT setseed(<em class="replaceable"><code>значение</code></em>);</pre></dd><dt><span class="term"><code class="literal">TIME ZONE</code></span></dt><dd><p><code class="literal">SET TIME ZONE '<em class="replaceable"><code>значение</code></em>'</code> — альтернативное написание команды <code class="literal">SET timezone TO '<em class="replaceable"><code>значение</code></em>'</code>. Синтаксис <code class="literal">SET TIME ZONE</code> позволяет указывать часовой пояс в специальном формате. Например, допускаются следующие значения: </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">'PST8PDT'</code></span></dt><dd><p>Часовой пояс Беркли, штат Калифорния.</p></dd><dt><span class="term"><code class="literal">'Europe/Rome'</code></span></dt><dd><p>Часовой пояс Италии.</p></dd><dt><span class="term"><code class="literal">-7</code></span></dt><dd><p>Часовой пояс, сдвинутый от UTC на 7 часов к западу (равнозначен PDT). Положительные значения означают сдвиг от UTC к востоку.</p></dd><dt><span class="term"><code class="literal">INTERVAL '-08:00' HOUR TO MINUTE</code></span></dt><dd><p>Часовой пояс, сдвинутый от UTC на 8 часов к западу (равнозначен PST).</p></dd><dt><span class="term"><code class="literal">LOCAL</code><br /></span><span class="term"><code class="literal">DEFAULT</code></span></dt><dd><p>Устанавливает в качестве часового пояса местный часовой пояс (то есть, значение серверного параметра <code class="varname">timezone</code> по умолчанию).</p></dd></dl></div><p>Значения часового пояса, заданные в виде чисел или интервалов, внутри переводятся в формат часовых поясов POSIX. Например, после <code class="literal">SET TIME ZONE -7</code>, команда <code class="command">SHOW TIME ZONE</code> покажет <code class="literal">&lt;-07&gt;+07</code>.</p><p>Аббревиатуры часовых поясов команда <code class="command">SET</code> не поддерживает; узнать о часовых поясах подробнее можно в <a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. Часовые пояса">Подразделе 8.5.3</a>.</p></dd></dl></div></div><div class="refsect1" id="id-1.9.3.174.7"><h2>Замечания</h2><p>Также изменить значение параметра можно с помощью функции <code class="function">set_config</code>; см. <a class="xref" href="functions-admin.html#FUNCTIONS-ADMIN-SET" title="9.27.1. Функции для управления конфигурацией">Подраздел 9.27.1</a>. Кроме того, выполнив UPDATE в системном представлении <a class="link" href="view-pg-settings.html" title="54.24. pg_settings"><code class="structname">pg_settings</code></a>, можно произвести то же действие, что выполняет <code class="command">SET</code>.</p></div><div class="refsect1" id="id-1.9.3.174.8"><h2>Примеры</h2><p>Установка пути поиска схем: </p><pre class="programlisting">SET search_path TO my_schema, public;</pre><p>Установка традиционного стиля даты <span class="productname">POSTGRES</span> с форматом ввода <span class="quote">«<span class="quote">день, месяц, год</span>»</span>: </p><pre class="screen">
SET datestyle TO postgres, dmy;
</pre><p>Установка часового пояса для Беркли, штат Калифорния: </p><pre class="screen">
SET TIME ZONE 'PST8PDT';
</pre><p>Установка часового пояса Италии: </p><pre class="screen">
SET TIME ZONE 'Europe/Rome';
</pre></div><div class="refsect1" id="id-1.9.3.174.9"><h2>Совместимость</h2><p><code class="literal">SET TIME ZONE</code> расширяет синтаксис, определённый в стандарте SQL. Стандарт допускает только числовые смещения часовых поясов, тогда как <span class="productname">PostgreSQL</span> позволяет задавать часовой пояс более гибко. Все другие функции <code class="literal">SET</code> являются расширениями <span class="productname">PostgreSQL</span>.</p></div><div class="refsect1" id="id-1.9.3.174.10"><h2>См. также</h2><span class="simplelist"><a class="xref" href="sql-reset.html" title="RESET"><span class="refentrytitle">RESET</span></a>, <a class="xref" href="sql-show.html" title="SHOW"><span class="refentrytitle">SHOW</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-selectinto.html" title="SELECT INTO">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="Команды SQL">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-set-constraints.html" title="SET CONSTRAINTS">След.</a></td></tr><tr><td width="40%" align="left" valign="top">SELECT INTO </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> SET CONSTRAINTS</td></tr></table></div></body></html>