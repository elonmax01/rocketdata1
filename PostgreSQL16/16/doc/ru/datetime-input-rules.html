<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>B.1. Интерпретация данных даты и времени</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени" /><link rel="next" href="datetime-invalid-input.html" title="B.2. Обработка недопустимых или неоднозначных значений даты/времени" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">B.1. Интерпретация данных даты и времени</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Наверх</a></td><th width="60%" align="center">Приложение B. Поддержка даты и времени</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="datetime-invalid-input.html" title="B.2. Обработка недопустимых или неоднозначных значений даты/времени">След.</a></td></tr></table><hr /></div><div class="sect1" id="DATETIME-INPUT-RULES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">B.1. Интерпретация данных даты и времени <a href="#DATETIME-INPUT-RULES" class="id_link">#</a></h2></div></div></div><p>Строки с датой/временем разбираются при вводе по следующему алгоритму.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Разделить входную строку на фрагменты и определить каждый фрагмент как строку, время, часовой пояс или цифру.</p><ol type="a" class="substeps"><li class="step"><p>Если числовой фрагмент содержит двоеточие (<code class="literal">:</code>), значит эта строка представляет время. Включаются все последующие цифры и двоеточия.</p></li><li class="step"><p>Если числовой фрагмент содержит тире (<code class="literal">-</code>), косую черту (<code class="literal">/</code>) или две и более точек (<code class="literal">.</code>), то это строка даты, которая, возможно, включает название месяца. Если фрагмент даты уже встречался, он интерпретируется как название часового пояса (например, <code class="literal">America/New_York</code>).</p></li><li class="step"><p>Если этот фрагмент является лишь числом, он представляет собой отдельное поле или составную дату ISO 8601 (например, <code class="literal">19990113</code> для 13 января 1999 года) или время (например, <code class="literal">141516</code> для 14:15:16).</p></li><li class="step"><p>Если фрагмент начинается с плюса (<code class="literal">+</code>) или минуса (<code class="literal">-</code>), то это или числовой часовой пояс или специальное поле.</p></li></ol></li><li class="step"><p>Если фрагмент содержит только буквы, сопоставить его с возможными строками:</p><ol type="a" class="substeps"><li class="step"><p>Проверить, не совпадает ли фрагмент с известной аббревиатурой часового пояса. Эти аббревиатуры считываются из файла конфигурации, описанного в <a class="xref" href="datetime-config-files.html" title="B.4. Файлы конфигурации даты/времени">Разделе B.4</a>.</p></li><li class="step"><p>Если фрагмент не найден, проверить во внутренней таблице, не совпадает ли он со специальной строкой (например, <code class="literal">today</code>), днём недели (например, <code class="literal">Thursday</code>), месяцем (например, <code class="literal">January</code>) или игнорируемым словом (например, <code class="literal">at</code>, <code class="literal">on</code>).</p></li><li class="step"><p>Если фрагмент всё же не найден, выдать ошибку.</p></li></ol></li><li class="step"><p>Когда фрагмент является числом или числовым полем:</p><ol type="a" class="substeps"><li class="step"><p>Если получено восемь или шесть цифр и никакое другое поле даты ранее не было прочитано, интерпретировать их как <span class="quote">«<span class="quote">составленную дату</span>»</span> (например, <code class="literal">19990118</code> или <code class="literal">990118</code>). Такая дата интерпретируется как <code class="literal">ГГГГММДД</code> или <code class="literal">ГГММДД</code>.</p></li><li class="step"><p>Если фрагмент представляет собой трёхзначное число, и год уже был прочитан, интерпретировать как день года.</p></li><li class="step"><p>Если это четыре или шесть цифр и год уже был прочитан, интерпретировать как время (<code class="literal">ЧЧММ</code> или <code class="literal">ЧЧММСС</code>).</p></li><li class="step"><p>Если найдены три или более цифр, а поля даты ещё не были найдены, интерпретировать как год (это ведёт к установке порядка гг-мм-дд для оставшихся полей даты).</p></li><li class="step"><p>В противном случае подразумевается, что порядок сортировки полей даты определяется значением <code class="varname">DateStyle</code>: мм-дд-гг, дд-мм-гг или гг-мм-дд. Выдать ошибку, если оказалось, что поле месяца или дня вышло за пределы диапазона.</p></li></ol></li><li class="step"><p>Если указан год до н. э., отнять год и добавить единицу для внутреннего хранения. (В григорианском календаре отсутствует нулевой год, поэтому 1 год до н. э. становится нулевым.)</p></li><li class="step"><p>Если год до н. э. не был указан, и если поле года имело два разряда, установить для записи года четыре разряда. Если поле меньше 70, добавить 2000, в противном случае добавить 1900. </p><div class="tip"><h3 class="title">Подсказка</h3><p>Годы 1–99 н. э. по григорианскому календарю могут вводиться в виде четырёхзначного числа с начальными нулями (например, <code class="literal">0099</code> — 99 год н. э.).</p></div></li></ol></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="datetime-appendix.html" title="Приложение B. Поддержка даты и времени">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="datetime-invalid-input.html" title="B.2. Обработка недопустимых или неоднозначных значений даты/времени">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Приложение B. Поддержка даты и времени </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> B.2. Обработка недопустимых или неоднозначных значений даты/времени</td></tr></table></div></body></html>