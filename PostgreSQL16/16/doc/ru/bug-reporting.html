<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5. Как правильно сообщить об ошибке</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="resources.html" title="4. Полезные ресурсы" /><link rel="next" href="tutorial.html" title="Часть I. Введение" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">5. Как правильно сообщить об ошибке</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="resources.html" title="4. Полезные ресурсы">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="preface.html" title="Предисловие">Наверх</a></td><th width="60%" align="center">Предисловие</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="tutorial.html" title="Часть I. Введение">След.</a></td></tr></table><hr /></div><div class="sect1" id="BUG-REPORTING"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5. Как правильно сообщить об ошибке <a href="#BUG-REPORTING" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="bug-reporting.html#BUG-REPORTING-IDENTIFYING-BUGS">5.1. Диагностика ошибок</a></span></dt><dt><span class="sect2"><a href="bug-reporting.html#BUG-REPORTING-WHAT-TO-REPORT">5.2. Что сообщать</a></span></dt><dt><span class="sect2"><a href="bug-reporting.html#BUG-REPORTING-WHERE-TO-REPORT-BUGS">5.3. Куда сообщать</a></span></dt></dl></div><p>Если вы найдёте ошибку в <span class="productname">PostgreSQL</span>, дайте нам знать о ней. Благодаря вашему отчёту об ошибке, <span class="productname">PostgreSQL</span> станет ещё более надёжным, ведь даже при самом высоком качестве кода нельзя гарантировать, что каждый блок и каждая функция <span class="productname">PostgreSQL</span> будет работать везде и при любых обстоятельствах.</p><p>Следующие предложения призваны помочь вам в составлении отчёта об ошибке, который можно будет обработать эффективно. Мы не требуем их неукоснительного выполнения, но всё же лучше следовать им для общего блага.</p><p>Мы не можем обещать, что каждая ошибка будет исправлена немедленно. Если ошибка очевидна, критична или касается множества пользователей, велики шансы, что ей кто-то займётся. Бывает, что мы рекомендуем обновить версию и проверить, сохраняется ли ошибка. Мы также можем решить, что ошибку нельзя исправить, пока не будет проделана большая работа, которая уже запланирована. Случается и так, что исправить ошибку слишком сложно, а на повестке дня есть много более важных дел. Если же вы хотите, чтобы вам помогли немедленно, возможно вам стоит заключить договор на коммерческую поддержку.</p><div class="sect2" id="BUG-REPORTING-IDENTIFYING-BUGS"><div class="titlepage"><div><div><h3 class="title">5.1. Диагностика ошибок <a href="#BUG-REPORTING-IDENTIFYING-BUGS" class="id_link">#</a></h3></div></div></div><p>Прежде чем сообщать об ошибке, пожалуйста, прочитайте и перечитайте документацию и убедитесь, что вообще возможно сделать то, что вы хотите. Если из документации неясно, можно это сделать или нет, пожалуйста, сообщите и об этом (тогда это ошибка в документации). Если выясняется, что программа делает что-то не так, как написано в документации, это тоже ошибка. Вот лишь некоторые примеры возможных ошибок: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Программа завершается с аварийным сигналом или сообщением об ошибке операционной системы, указывающей на проблему в программе. (В качестве контрпримера можно привести сообщение <span class="quote">«<span class="quote">Нет места на диске</span>»</span> — эту проблему вы должны решить сами.)</p></li><li class="listitem"><p>Программа выдаёт неправильный результат для любых вводимых данных.</p></li><li class="listitem"><p>Программа отказывается принимать допустимые (согласно документации) данные.</p></li><li class="listitem"><p>Программа принимает недопустимые данные без сообщения об ошибке или предупреждения. Но помните: то, что вы считаете недопустимым, мы можем считать приемлемым расширением или совместимым с принятой практикой.</p></li><li class="listitem"><p>Не удаётся скомпилировать, собрать или установить <span class="productname">PostgreSQL</span> на поддерживаемой платформе, выполняя соответствующие инструкции.</p></li></ul></div><p> Здесь под <span class="quote">«<span class="quote">программой</span>»</span> подразумевается произвольный исполняемый файл, а не исключительно серверный процесс.</p><p>Медленная работа или высокая загрузка ресурсов — это не обязательно ошибка. Попробуйте оптимизировать ваши приложения, прочитав документацию или попросив помощи в списках рассылки. Также может не быть ошибкой какое-то несоответствие стандарту <acronym class="acronym">SQL</acronym>, если только явно не декларируется соответствие в данном аспекте.</p><p>Прежде чем подготовить сообщение, проверьте, не упоминается ли эта ошибка в списке TODO или FAQ. Если вы не можете разобраться в нашем списке TODO, сообщите о своей проблеме. По крайней мере так мы сделаем список TODO более понятным.</p></div><div class="sect2" id="BUG-REPORTING-WHAT-TO-REPORT"><div class="titlepage"><div><div><h3 class="title">5.2. Что сообщать <a href="#BUG-REPORTING-WHAT-TO-REPORT" class="id_link">#</a></h3></div></div></div><p>Главное правило, которое нужно помнить — сообщайте все факты и только факты. Не стройте догадки, что по вашему мнению работает не так, что <span class="quote">«<span class="quote">по-видимому происходит</span>»</span>, или в какой части программы ошибка. Если вы не знакомы с тонкостями реализации, вы скорее всего ошибётесь и ничем нам не поможете. И даже если не ошибётесь, расширенные объяснения могут быть прекрасным дополнением, но не заменой фактам. Если мы соберёмся исправить ошибку, мы всё равно сами должны будем посмотреть, в чём она. С другой стороны, сообщить голые факты довольно просто (можно просто скопировать текст с экрана), но часто важные детали опускаются, потому что не считаются таковыми или кажется, что отчёт будет и без того понятен.</p><p>В каждом отчёте об ошибке следует указать: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Точную последовательность действий для воспроизведения проблемы, начиная <span class="emphasis"><em>с запуска программы</em></span>. Она должна быть самодостаточной; если вывод зависит от данных в таблицах, то недостаточно сообщить один лишь <code class="command">SELECT</code>, без предшествующих операторов <code class="command">CREATE TABLE</code> и <code class="command">INSERT</code>. У нас не будет времени, чтобы восстанавливать схему базы данных по предоставленной информации, и если предполагается, что мы будем создавать свои тестовые данные, вероятнее всего мы пропустим это сообщение.</p><p>Лучший формат теста для проблем с SQL — файл, который можно передать программе <span class="application">psql</span> и увидеть проблему. (И убедитесь, что в вашем файле <code class="filename">~/.psqlrc</code> ничего нет.) Самый простой способ получить такой файл — выгрузить объявления таблиц и данные, необходимые для создания полигона, с помощью <span class="application">pg_dump</span>, а затем добавить проблемный запрос. Постарайтесь сократить размер вашего тестового примера, хотя это не абсолютно необходимо. Если ошибка воспроизводится, мы найдём её в любом случае.</p><p>Если ваше приложение использует какой-то другой клиентский интерфейс, например <span class="application">PHP</span>, пожалуйста, попытайтесь свести ошибку к проблемным запросам. Мы вряд ли будем устанавливать веб-сервер у себя, чтобы воспроизвести вашу проблему. В любом случае помните, что нам нужны ваши конкретные входные файлы; мы не будем гадать, что подразумевается в сообщении о проблеме с <span class="quote">«<span class="quote">большими файлами</span>»</span> или <span class="quote">«<span class="quote">базой среднего размера</span>»</span>, так как это слишком расплывчатые понятия.</p></li><li class="listitem"><p>Результат, который вы получаете. Пожалуйста, не говорите, что что-то <span class="quote">«<span class="quote">не работает</span>»</span> или <span class="quote">«<span class="quote">сбоит</span>»</span>. Если есть сообщение об ошибке, покажите его, даже если вы его не понимаете. Если программа завершается ошибкой операционной системы, сообщите какой. Или если ничего не происходит, отразите это. Даже если в результате вашего теста происходит сбой программы или что-то очевидное, мы можем не наблюдать этого у себя. Проще всего будет скопировать текст с терминала, если это возможно.</p><div class="note"><h3 class="title">Примечание</h3><p>Если вы упоминаете сообщение об ошибке, пожалуйста, укажите его в наиболее полной форме. Например, в <span class="application">psql</span>, для этого сначала выполните <code class="literal">\set VERBOSITY verbose</code>. Если вы цитируете сообщения из журнала событий сервера, присвойте параметру выполнения <a class="xref" href="runtime-config-logging.html#GUC-LOG-ERROR-VERBOSITY">log_error_verbosity</a> значение <code class="literal">verbose</code>, чтобы журнал был наиболее подробным.</p></div><div class="note"><h3 class="title">Примечание</h3><p>В случае критических ошибок сообщение на стороне клиента может не содержать всю необходимую информацию. Пожалуйста, также изучите журнал сервера баз данных. Если сообщения журнала у вас не сохраняются, это подходящий повод, чтобы начать сохранять их.</p></div></li><li class="listitem"><p>Очень важно отметить, какой результат вы ожидали получить. Если вы просто напишете <span class="quote">«<span class="quote">Эта команда выдаёт это.</span>»</span> или <span class="quote">«<span class="quote">Это не то, что мне нужно.</span>»</span>, мы можем запустить ваш пример, посмотреть на результат и решить, что всё в порядке и никакой ошибки нет. Не заставляйте нас тратить время на расшифровку точного смысла ваших команд. В частности, воздержитесь от утверждений типа <span class="quote">«<span class="quote">Это не то, что делает Oracle/положено по стандарту SQL</span>»</span>. Выяснять, как должно быть по стандарту <acronym class="acronym">SQL</acronym>, не очень интересно, а кроме того мы не знаем, как ведут себя все остальные реляционные базы данных. (Если вы наблюдаете аварийное завершение программы, этот пункт, очевидно, неуместен.)</p></li><li class="listitem"><p>Все параметры командной строки и другие параметры запуска, включая все связанные переменные окружения или файлы конфигурации, которые вы изменяли. Пожалуйста, предоставляйте точные сведения. Если вы используете готовый дистрибутив, в котором сервер БД запускается при загрузке системы, вам следует выяснить, как это происходит.</p></li><li class="listitem"><p>Всё, что вы делали не так, как написано в инструкциях по установке.</p></li><li class="listitem"><p>Версию <span class="productname">PostgreSQL</span>. Чтобы выяснить версию сервера, к которому вы подключены, можно выполнить команду <code class="literal">SELECT version();</code>. Большинство исполняемых программ также поддерживают параметр <code class="option">--version</code>; как минимум должно работать <code class="literal">postgres --version</code> и <code class="literal">psql --version</code>. Если такая функция или параметры не поддерживаются, вероятно вашу версию давно пора обновить. Если вы используете дистрибутивный пакет, например RPM, сообщите это, включая полную версию этого пакета. Если же вы работаете со снимком Git, укажите это и хеш последней правки.</p><p>Если ваша версия старее, чем 16.3, мы почти наверняка посоветуем вам обновиться. В каждом новом выпуске очень много улучшений и исправлений ошибок, так что ошибка, которую вы встретили в старой версии <span class="productname">PostgreSQL</span>, скорее всего уже исправлена. Мы можем обеспечить только ограниченную поддержку для тех, кто использует старые версии <span class="productname">PostgreSQL</span>; если вам этого недостаточно, подумайте о заключении договора коммерческой поддержки.</p><p>
     </p></li><li class="listitem"><p>Сведения о платформе, включая название и версию ядра, библиотеки C, характеристики процессора, памяти и т. д. Часто бывает достаточно сообщить название и версию ОС, но не рассчитывайте, что все знают, что именно подразумевается под <span class="quote">«<span class="quote">Debian</span>»</span>, или что все используют x86_64. Если у вас возникают сложности со сборкой кода и установкой, также необходима информация о сборочной среде вашего компьютера (компилятор, <span class="application">make</span> и т. д.).</p></li></ul></div><p> Не бойтесь, если ваш отчёт об ошибке не будет краток. У таланта есть ещё и брат. Лучше сообщить обо всём сразу, чем мы будем потом выуживать факты из вас. С другой стороны, если файлы, которые вы хотите показать, велики, правильнее будет сначала спросить, хочет ли кто-то взглянуть на них. В <a class="ulink" href="https://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">этой статье</a> вы найдёте другие советы по составлению отчётов об ошибках.</p><p>Не тратьте всё своё время, чтобы выяснить, при каких входных данных исчезает проблема. Это вряд ли поможет решить её. Если выяснится, что быстро исправить ошибку нельзя, тогда у вас будет время найти обходной путь и сообщить о нём. И опять же, не тратьте своё время на выяснение, почему возникает эта ошибка. Мы найдём её причину достаточно быстро.</p><p>Сообщая об ошибке, старайтесь не допускать путаницы в терминах. Программный пакет в целом называется <span class="quote">«<span class="quote">PostgreSQL</span>»</span>, иногда <span class="quote">«<span class="quote">Postgres</span>»</span> для краткости. Если вы говорите именно о серверном процессе, упомяните это; не следует говорить <span class="quote">«<span class="quote">сбой в PostgreSQL</span>»</span>. Сбой одного серверного процесса кардинально отличается от сбоя родительского процесса <span class="quote">«<span class="quote">postgres</span>»</span>, поэтому, пожалуйста, не называйте <span class="quote">«<span class="quote">сбоем сервера</span>»</span> отключение одного из подчинённых серверных процессов и наоборот. Кроме того, клиентские программы, такие как интерактивный <span class="quote">«<span class="quote"><span class="application">psql</span></span>»</span> существуют совершенно отдельно от серверной части. По возможности постарайтесь точно указать, где наблюдается проблема, на стороне клиента или сервера.</p></div><div class="sect2" id="BUG-REPORTING-WHERE-TO-REPORT-BUGS"><div class="titlepage"><div><div><h3 class="title">5.3. Куда сообщать <a href="#BUG-REPORTING-WHERE-TO-REPORT-BUGS" class="id_link">#</a></h3></div></div></div><p>В общем случае посылать сообщения об ошибках следует в список рассылки <code class="email">&lt;<a class="email" href="mailto:pgsql-bugs@lists.postgresql.org">pgsql-bugs@lists.postgresql.org</a>&gt;</code>. Вам надо будет написать информативную тему письма, возможно включив в неё часть сообщения об ошибке.</p><p>Ещё один вариант отправки сообщения — заполнить отчёт об ошибке в веб-форме на <a class="ulink" href="https://www.postgresql.org/" target="_top">сайте проекта</a>. В этом случае ваше сообщение будет автоматически отправлено в список рассылки <code class="email">&lt;<a class="email" href="mailto:pgsql-bugs@lists.postgresql.org">pgsql-bugs@lists.postgresql.org</a>&gt;</code>.</p><p>Если вы сообщаете об ошибке, связанной с безопасностью, и не хотите, чтобы ваше сообщение появилось в публичных архивах, не отправляйте его в <code class="literal">pgsql-bugs</code>. Об уязвимостях вы можете написать в закрытую группу <code class="email">&lt;<a class="email" href="mailto:security@postgresql.org">security@postgresql.org</a>&gt;</code>.</p><p>Не посылайте сообщения в списки рассылки для пользователей, например в <code class="email">&lt;<a class="email" href="mailto:pgsql-sql@lists.postgresql.org">pgsql-sql@lists.postgresql.org</a>&gt;</code> или <code class="email">&lt;<a class="email" href="mailto:pgsql-general@lists.postgresql.org">pgsql-general@lists.postgresql.org</a>&gt;</code>. Эти рассылки предназначены для ответов на вопросы пользователей, и их подписчики обычно не хотят получать сообщения об ошибках, более того, они вряд ли исправят их.</p><p>Также, пожалуйста, <span class="emphasis"><em>не</em></span> отправляйте отчёты об ошибках в список <code class="email">&lt;<a class="email" href="mailto:pgsql-hackers@lists.postgresql.org">pgsql-hackers@lists.postgresql.org</a>&gt;</code>. Этот список предназначен для обсуждения разработки <span class="productname">PostgreSQL</span>, и будет лучше, если сообщения об ошибках будут существовать отдельно. Мы перенесём обсуждение вашей ошибки в <code class="literal">pgsql-hackers</code>, если проблема потребует дополнительного рассмотрения.</p><p>Если вы столкнулись с ошибкой в документации, лучше всего написать об этом в список рассылки, посвящённый документации, <code class="email">&lt;<a class="email" href="mailto:pgsql-docs@lists.postgresql.org">pgsql-docs@lists.postgresql.org</a>&gt;</code>. Пожалуйста, постарайтесь конкретизировать, какая часть документации вас не устраивает.</p><p>Если ваша ошибка связана с переносимостью на неподдерживаемой платформе, отправьте письмо по адресу <code class="email">&lt;<a class="email" href="mailto:pgsql-hackers@lists.postgresql.org">pgsql-hackers@lists.postgresql.org</a>&gt;</code>, чтобы мы (и вы) смогли запустить <span class="productname">PostgreSQL</span> на вашей платформе.</p><div class="note"><h3 class="title">Примечание</h3><p>Ввиду огромного количества спама письма во все эти списки рассылки проходят модерацию, если отправитель не подписан на соответствующую рассылку. Это означает, что написанное вами письмо может появиться в рассылке после некоторой задержки. Если вы хотите подписаться на эти рассылки, посетите <a class="ulink" href="https://lists.postgresql.org/" target="_top">https://lists.postgresql.org/</a>, чтобы узнать, как это сделать.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="resources.html" title="4. Полезные ресурсы">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="preface.html" title="Предисловие">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial.html" title="Часть I. Введение">След.</a></td></tr><tr><td width="40%" align="left" valign="top">4. Полезные ресурсы </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> Часть I. Введение</td></tr></table></div></body></html>