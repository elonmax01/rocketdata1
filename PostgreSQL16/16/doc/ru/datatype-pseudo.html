<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.21. Псевдотипы</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="datatype-pg-lsn.html" title="8.20. Тип pg_lsn" /><link rel="next" href="functions.html" title="Глава 9. Функции и операторы" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">8.21. Псевдотипы</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="datatype-pg-lsn.html" title="8.20. Тип pg_lsn">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="datatype.html" title="Глава 8. Типы данных">Наверх</a></td><th width="60%" align="center">Глава 8. Типы данных</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="functions.html" title="Глава 9. Функции и операторы">След.</a></td></tr></table><hr /></div><div class="sect1" id="DATATYPE-PSEUDO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.21. Псевдотипы <a href="#DATATYPE-PSEUDO" class="id_link">#</a></h2></div></div></div><a id="id-1.5.7.29.2" class="indexterm"></a><a id="id-1.5.7.29.3" class="indexterm"></a><a id="id-1.5.7.29.4" class="indexterm"></a><a id="id-1.5.7.29.5" class="indexterm"></a><a id="id-1.5.7.29.6" class="indexterm"></a><a id="id-1.5.7.29.7" class="indexterm"></a><a id="id-1.5.7.29.8" class="indexterm"></a><a id="id-1.5.7.29.9" class="indexterm"></a><a id="id-1.5.7.29.10" class="indexterm"></a><a id="id-1.5.7.29.11" class="indexterm"></a><a id="id-1.5.7.29.12" class="indexterm"></a><a id="id-1.5.7.29.13" class="indexterm"></a><a id="id-1.5.7.29.14" class="indexterm"></a><a id="id-1.5.7.29.15" class="indexterm"></a><a id="id-1.5.7.29.16" class="indexterm"></a><a id="id-1.5.7.29.17" class="indexterm"></a><a id="id-1.5.7.29.18" class="indexterm"></a><a id="id-1.5.7.29.19" class="indexterm"></a><a id="id-1.5.7.29.20" class="indexterm"></a><a id="id-1.5.7.29.21" class="indexterm"></a><a id="id-1.5.7.29.22" class="indexterm"></a><a id="id-1.5.7.29.23" class="indexterm"></a><a id="id-1.5.7.29.24" class="indexterm"></a><a id="id-1.5.7.29.25" class="indexterm"></a><a id="id-1.5.7.29.26" class="indexterm"></a><p>В систему типов <span class="productname">PostgreSQL</span> включены несколько специальных элементов, которые в совокупности называются <em class="firstterm">псевдотипами</em>. Псевдотип нельзя использовать в качестве типа данных столбца, но можно объявить функцию с аргументом или результатом такого типа. Каждый из существующих псевдотипов полезен в ситуациях, когда характер функции не позволяет просто получить или вернуть определённый тип данных <acronym class="acronym">SQL</acronym>. Все существующие псевдотипы перечислены в <a class="xref" href="datatype-pseudo.html#DATATYPE-PSEUDOTYPES-TABLE" title="Таблица 8.27. Псевдотипы">Таблице 8.27</a>.</p><div class="table" id="DATATYPE-PSEUDOTYPES-TABLE"><p class="title"><strong>Таблица 8.27. Псевдотипы</strong></p><div class="table-contents"><table class="table" summary="Псевдотипы" border="1"><colgroup><col class="col1" /><col class="col2" /></colgroup><thead><tr><th>Name</th><th>Описание</th></tr></thead><tbody><tr><td><code class="type">any</code></td><td>Указывает, что функция принимает любой вводимый тип данных.</td></tr><tr><td><code class="type">anyelement</code></td><td>Указывает, что функция принимает любой тип данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anyarray</code></td><td>Указывает, что функция принимает любой тип массива (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anynonarray</code></td><td>Указывает, что функция принимает любой тип данных, кроме массивов (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anyenum</code></td><td>Указывает, что функция принимает любое перечисление (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a> и <a class="xref" href="datatype-enum.html" title="8.7. Типы перечислений">Раздел 8.7</a>).</td></tr><tr><td><code class="type">anyrange</code></td><td>Указывает, что функция принимает любой диапазонный тип данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a> и <a class="xref" href="rangetypes.html" title="8.17. Диапазонные типы">Раздел 8.17</a>).</td></tr><tr><td><code class="type">anymultirange</code></td><td>Указывает, что функция принимает любой мультидиапазонный тип данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a> и <a class="xref" href="rangetypes.html" title="8.17. Диапазонные типы">Раздел 8.17</a>).</td></tr><tr><td><code class="type">anycompatible</code></td><td>Указывает, что функция принимает любой тип данных и может автоматически приводить различные аргументы к общему типу данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anycompatiblearray</code></td><td>Указывает, что функция принимает любой тип массива и может автоматически приводить различные аргументы к общему типу данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anycompatiblenonarray</code></td><td>Указывает, что функция принимает любой тип, отличный от массива, и может автоматически приводить различные аргументы к общему типу данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a>).</td></tr><tr><td><code class="type">anycompatiblerange</code></td><td>Указывает, что функция принимает любой тип диапазонный данных и может автоматически приводить различные аргументы к общему типу данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a> и <a class="xref" href="rangetypes.html" title="8.17. Диапазонные типы">Раздел 8.17</a>).</td></tr><tr><td><code class="type">anycompatiblemultirange</code></td><td>Указывает, что функция принимает любой мультидиапазонный тип данных и может автоматически приводить различные аргументы к общему типу данных (см. <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подраздел 38.2.5</a> и <a class="xref" href="rangetypes.html" title="8.17. Диапазонные типы">Раздел 8.17</a>).</td></tr><tr><td><code class="type">cstring</code></td><td>Указывает, что функция принимает или возвращает строку в стиле C.</td></tr><tr><td><code class="type">internal</code></td><td>Указывает, что функция принимает или возвращает внутренний серверный тип данных.</td></tr><tr><td><code class="type">language_handler</code></td><td>Обработчик процедурного языка объявляется как возвращающий тип <code class="type">language_handler</code>.</td></tr><tr><td><code class="type">fdw_handler</code></td><td>Обработчик обёртки сторонних данных объявляется как возвращающий тип <code class="type">fdw_handler</code>.</td></tr><tr><td><code class="type">table_am_handler</code></td><td>Обработчик табличного метода доступа объявляется как возвращающий тип <code class="type">table_am_handler</code>.</td></tr><tr><td><code class="type">index_am_handler</code></td><td>Обработчик метода доступа индекса объявляется как возвращающий тип <code class="type">index_am_handler</code>.</td></tr><tr><td><code class="type">tsm_handler</code></td><td>Обработчик метода выборки из таблицы объявляется как возвращающий тип <code class="type">tsm_handler</code>.</td></tr><tr><td><code class="type">record</code></td><td>Указывает, что функция принимает или возвращает неопределённый тип строки.</td></tr><tr><td><code class="type">trigger</code></td><td>Триггерная функция объявляется как возвращающая тип <code class="type">trigger</code>.</td></tr><tr><td><code class="type">event_trigger</code></td><td>Функция событийного триггера объявляется как возвращающая тип <code class="type">event_trigger</code>.</td></tr><tr><td><code class="type">pg_ddl_command</code></td><td>Обозначает представление команд DDL, доступное событийным триггерам.</td></tr><tr><td><code class="type">void</code></td><td>Указывает, что функция не возвращает значение.</td></tr><tr><td><code class="type">unknown</code></td><td>Обозначает ещё не распознанный тип, например простую строковую константу.</td></tr></tbody></table></div></div><br class="table-break" /><p>Функции, написанные на языке C (встроенные или динамически загружаемые), могут быть объявлены с параметрами или результатами любого из этих псевдотипов. Ответственность за безопасное поведение функции с аргументами таких типов ложится на разработчика функции.</p><p>Функции, написанные на процедурных языках, могут использовать псевдотипы, только если это позволяет соответствующий язык. В настоящее время большинство процедурных языков запрещают использовать псевдотипы в качестве типа аргумента и позволяют использовать для результатов только типы <code class="type">void</code> и <code class="type">record</code> (и <code class="type">trigger</code> или <code class="type">event_trigger</code>, когда функция реализует триггер или событийный триггер). Некоторые языки также поддерживают полиморфные функции с полиморфными псевдотипами, подробно рассмотренными в <a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. Полиморфные типы">Подразделе 38.2.5</a>.</p><p>Псевдотип <code class="type">internal</code> используется в объявлениях функций, предназначенных только для внутреннего использования в СУБД, но не для прямого вызова в запросах <acronym class="acronym">SQL</acronym>. Если у функции есть как хотя бы один аргумент типа <code class="type">internal</code>, её нельзя будет вызывать из <acronym class="acronym">SQL</acronym>. Чтобы сохранить типобезопасность при таком ограничении, следуйте важному правилу: не создавайте функцию, возвращающую результат типа <code class="type">internal</code>, если у неё нет ни одного аргумента <code class="type">internal</code>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datatype-pg-lsn.html" title="8.20. Тип pg_lsn">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="datatype.html" title="Глава 8. Типы данных">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="functions.html" title="Глава 9. Функции и операторы">След.</a></td></tr><tr><td width="40%" align="left" valign="top">8.20. Тип <code class="type">pg_lsn</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> Глава 9. Функции и операторы</td></tr></table></div></body></html>