<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>F.47. tsm_system_time — метод извлечения выборки SYSTEM_TIME для TABLESAMPLE</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="tsm-system-rows.html" title="F.46. tsm_system_rows — метод извлечения выборки SYSTEM_ROWS для TABLESAMPLE" /><link rel="next" href="unaccent.html" title="F.48. unaccent — словарь текстового поиска, который убирает диакритические знаки" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">F.47. tsm_system_time — метод извлечения выборки <code class="literal">SYSTEM_TIME</code> для <code class="literal">TABLESAMPLE</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="tsm-system-rows.html" title="F.46. tsm_system_rows — метод извлечения выборки SYSTEM_ROWS для TABLESAMPLE">Пред.</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><th width="60%" align="center">Приложение F. Дополнительно поставляемые модули и расширения</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="10%" align="right"> <a accesskey="n" href="unaccent.html" title="F.48. unaccent — словарь текстового поиска, который убирает диакритические знаки">След.</a></td></tr></table><hr /></div><div class="sect1" id="TSM-SYSTEM-TIME"><div class="titlepage"><div><div><h2 class="title" style="clear: both">F.47. tsm_system_time — метод извлечения выборки <code class="literal">SYSTEM_TIME</code> для <code class="literal">TABLESAMPLE</code> <a href="#TSM-SYSTEM-TIME" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="tsm-system-time.html#TSM-SYSTEM-TIME-EXAMPLES">F.47.1. Примеры</a></span></dt></dl></div><a id="id-1.11.7.57.2" class="indexterm"></a><p>Модуль <code class="filename">tsm_system_time</code> предоставляет метод извлечения выборки <code class="literal">SYSTEM_TIME</code>, который можно использовать в предложении <code class="literal">TABLESAMPLE</code> команды <a class="link" href="sql-select.html" title="SELECT"><code class="command">SELECT</code></a>.</p><p>Этот метод извлечения выборки принимает в единственном аргументе число с плавающей точкой, задающее максимальное время (в миллисекундах), которое отводится на чтение таблицы. Это даёт возможность непосредственно управлять длительностью выполнения запроса, ценой того, что размер выборки оказывается трудно предсказуемым. Результирующая выборка будет содержать столько строк, сколько удастся прочитать за отведённое время, если только быстрее не будет прочитана вся таблица.</p><p>Как и встроенный метод извлечения выборки <code class="literal">SYSTEM</code>, <code class="literal">SYSTEM_TIME</code> производит выборку на уровне блоков, так что выборка будет не полностью случайной, а может подвергаться эффектам кластеризации, особенно когда выбирается небольшое число строк.</p><p><code class="literal">SYSTEM_TIME</code> не поддерживает предложение <code class="literal">REPEATABLE</code>.</p><p>Данный модуль считается <span class="quote">«<span class="quote">доверенным</span>»</span>, то есть его могут устанавливать обычные пользователи, имеющие право <code class="literal">CREATE</code> в текущей базе данных.</p><div class="sect2" id="TSM-SYSTEM-TIME-EXAMPLES"><div class="titlepage"><div><div><h3 class="title">F.47.1. Примеры <a href="#TSM-SYSTEM-TIME-EXAMPLES" class="id_link">#</a></h3></div></div></div><p>Пример получения выборки из таблицы с применением метода <code class="literal">SYSTEM_TIME</code>. Сначала нужно установить расширение:</p><pre class="programlisting">CREATE EXTENSION tsm_system_time;</pre><p>Затем вы можете использовать его в команде <code class="command">SELECT</code>, например так: </p><pre class="programlisting">SELECT * FROM my_table TABLESAMPLE SYSTEM_TIME(1000);</pre><p>Эта команда выдаст настолько большую выборку из <code class="structname">my_table</code>, насколько много строк она успеет прочитать за 1 секунду (1000 миллисекунд). Разумеется, если за 1 секунду удастся прочитать всю таблицу, будут возвращены все её строки.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tsm-system-rows.html" title="F.46. tsm_system_rows — метод извлечения выборки SYSTEM_ROWS для TABLESAMPLE">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Приложение F. Дополнительно поставляемые модули и расширения">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="unaccent.html" title="F.48. unaccent — словарь текстового поиска, который убирает диакритические знаки">След.</a></td></tr><tr><td width="40%" align="left" valign="top">F.46. tsm_system_rows — метод извлечения выборки <code class="literal">SYSTEM_ROWS</code> для <code class="literal">TABLESAMPLE</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="Документация к PostgreSQL 16.3">Начало</a></td><td width="40%" align="right" valign="top"> F.48. unaccent — словарь текстового поиска, который убирает диакритические знаки</td></tr></table></div></body></html>